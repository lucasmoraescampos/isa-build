"use strict";(self.webpackChunkMeuBilhete_NewSite=self.webpackChunkMeuBilhete_NewSite||[]).push([[751],{7507:(M,u,i)=>{i.r(u),i.d(u,{MyOrdersModule:()=>Ze});var d=i(3075),a=i(9808),l=i(3287),g=i(7579),x=i(2722),p=i(7445),m=i(9646),_=i(262),e=i(5e3),v=i(7556),f=i(3290),C=i(2313),k=i(5970),U=i(3300),y=i(8827),I=i(7862),w=i(7217),O=i(6770),b=i(5003);const E=["modalTickets"];function D(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"s"),e.qZA())}function P(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit;return e.oxw(2).cancelOrder(o)}),e._UZ(1,"i",26),e._uU(2," Cancelar"),e.qZA()}}function S(n,s){if(1&n&&(e.TgZ(0,"a",27),e._UZ(1,"i",28),e._uU(2," Vouchers"),e.qZA()),2&n){const t=e.oxw(2).$implicit,r=e.oxw(2);e.Q6J("href","https://voucher.ingressosa.com/voucher/?id2="+t.id+"&cId="+r.customerId,e.LSH)}}function N(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3).$implicit,c=e.MAs(3);return e.oxw(2).paymentModal(o.additionalData,c,o.id)}),e._uU(1," Ver Pix "),e.qZA()}}function J(n,s){if(1&n&&(e.ynx(0),e.YNc(1,N,2,0,"a",29),e.BQk()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf","Initial"==t.status||"Processing"==t.status)}}function Y(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div",12),e.TgZ(2,"div",13),e.TgZ(3,"div",14),e.TgZ(4,"h5",15),e._uU(5),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",16),e.TgZ(9,"h6",17),e._uU(10),e.qZA(),e.TgZ(11,"p",18),e._uU(12),e.ALo(13,"date"),e._UZ(14,"br"),e._uU(15),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).viewTickets(o)}),e._UZ(18,"i",20),e._uU(19),e.YNc(20,D,2,0,"span",5),e.qZA(),e.YNc(21,P,3,0,"button",21),e.qZA(),e.qZA(),e.TgZ(22,"div",22),e.TgZ(23,"h4",23),e._uU(24),e.ALo(25,"number"),e.qZA(),e.YNc(26,S,3,1,"a",24),e.qZA(),e.YNc(27,J,2,1,"ng-container",5),e.qZA(),e.qZA()}if(2&n){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(5),e.Oqu(t.eventName),e.xp6(1),e.Gre("badge ",r.getStatusClass(t.status),""),e.xp6(1),e.Oqu(r.getStatusDescription(t.status)),e.xp6(3),e.Oqu(t.code),e.xp6(2),e.hij("",e.xi3(13,14,t.createdAt,"dd/MM/YYYY")," "),e.xp6(3),e.hij(" ",e.xi3(16,17,t.createdAt,"HH:mm"),""),e.xp6(4),e.hij(" ",t.tickets.length," ingresso"),e.xp6(1),e.Q6J("ngIf",t.quantityTickets>1),e.xp6(1),e.Q6J("ngIf","parcial"==t.canRefund&&null==t.tickets[0].customerComissionerId&&"Approved"==t.status),e.xp6(3),e.hij("R$ ",e.xi3(25,20,t.amount,"1.2-2"),""),e.xp6(2),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",null!=t.additionalData)}}function R(n,s){if(1&n&&e._UZ(0,"img",49),2&n){const t=e.oxw(5);e.Q6J("src","data:image/jpg;base64,"+t.paymentData.qrCodeImageData,e.LSH)}}function Q(n,s){if(1&n&&e._UZ(0,"img",49),2&n){const t=e.oxw(5);e.Q6J("src",t.paymentData.qrCodeImageData,e.LSH)}}function B(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",41),e.TgZ(2,"div",42),e.TgZ(3,"div",43),e.TgZ(4,"div",44),e.TgZ(5,"div"),e.YNc(6,R,1,1,"img",45),e.YNc(7,Q,1,1,"img",45),e.qZA(),e.TgZ(8,"div"),e.TgZ(9,"p"),e._UZ(10,"input",46,47),e.qZA(),e.TgZ(12,"a",48),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(11);return e.oxw(4).copyQrCode(o)}),e._uU(13,"Copiar Chave"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(4);e.xp6(6),e.Q6J("ngIf",!t.paymentData.isImageEncoded),e.xp6(1),e.Q6J("ngIf",t.paymentData.isImageEncoded),e.xp6(3),e.Q6J("value",t.paymentData.qrCode)}}function F(n,s){1&n&&(e.TgZ(0,"p",50),e._uU(1,"Pagamento aprovado!"),e.qZA())}function $(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"div",32),e.TgZ(2,"h5",33),e._uU(3,"Pagamento pix"),e.qZA(),e._UZ(4,"p",34),e.qZA(),e.TgZ(5,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).closePixPaymentModal()}),e.TgZ(6,"span",36),e._uU(7,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",37),e.YNc(9,B,14,3,"div",3),e.YNc(10,F,2,0,"ng-template",null,38,e.W1O),e.qZA(),e.TgZ(12,"div",39),e.TgZ(13,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).closePixPaymentModal()}),e._uU(14," Fechar"),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(11),r=e.oxw(3);e.xp6(9),e.Q6J("ngIf",0==r.paymentSuccess)("ngIfElse",t)}}function j(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Y,28,23,"div",9),e.YNc(2,$,15,2,"ng-template",null,10,e.W1O),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",t.tickets.length>=1)}}function L(n,s){if(1&n&&(e.ynx(0),e.YNc(1,j,4,1,"ng-container",8),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.orders)}}function H(n,s){if(1&n&&(e.TgZ(0,"p",51),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage)}}const W=function(){return{margin:0,width:"150px",height:"24px"}},K=function(){return{margin:0,width:"70px",height:"20px"}},V=function(){return{margin:0,width:"60px",height:"18px"}},z=function(){return{margin:0,width:"80px",height:"12px"}},G=function(){return{"margin-top":"20px",width:"110px",height:"30px"}},X=function(){return{margin:0,width:"100px",height:"30px"}};function ee(n,s){1&n&&(e.TgZ(0,"div",11),e.TgZ(1,"div",12),e.TgZ(2,"div",13),e.TgZ(3,"div",14),e._UZ(4,"ngx-skeleton-loader",53),e._UZ(5,"br"),e._UZ(6,"ngx-skeleton-loader",53),e.qZA(),e.TgZ(7,"div",16),e._UZ(8,"ngx-skeleton-loader",53),e._UZ(9,"br"),e._UZ(10,"ngx-skeleton-loader",53),e._UZ(11,"br"),e._UZ(12,"ngx-skeleton-loader",53),e.qZA(),e.qZA(),e.TgZ(13,"div",22),e._UZ(14,"ngx-skeleton-loader",53),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(4),e.Q6J("theme",e.DdM(6,W)),e.xp6(2),e.Q6J("theme",e.DdM(7,K)),e.xp6(2),e.Q6J("theme",e.DdM(8,V)),e.xp6(2),e.Q6J("theme",e.DdM(9,z)),e.xp6(2),e.Q6J("theme",e.DdM(10,G)),e.xp6(2),e.Q6J("theme",e.DdM(11,X)))}const te=function(){return[]};function ne(n,s){1&n&&(e.ynx(0),e.YNc(1,ee,15,12,"div",52),e.BQk()),2&n&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,te).constructor(6)))}function re(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,c=e.oxw(2),h=e.MAs(11);return c.openTransferTicketModal(h,c.selectedOrder,o.id)}),e._UZ(1,"i",66),e._uU(2," Transferir"),e.qZA()}}function oe(n,s){if(1&n&&(e.TgZ(0,"td",61),e.YNc(1,re,3,0,"button",64),e.qZA()),2&n){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("ngIf","Approved"==r.selectedOrder.status&&(t.price+t.fee)*t.qty>0&&"61cfcfff-370c-4eb0-ae85-66df4bad5c23"!==r.selectedOrder.producerOwnerId&&null==t.transferDate&&"4cae550f-988a-4230-8e64-868615ea40ca"!==r.selectedOrder.eventId&&"ae44c2e5-0d1e-4df2-8798-9ddcf9c5b0c7"!==r.selectedOrder.eventId&&"51075614-c7cc-429e-90b5-d32bce891165"!==r.selectedOrder.eventId&&"92f46974-58a2-4485-98ec-56c503d68339"!==r.selectedOrder.eventId)}}function ie(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"td",61),e.TgZ(1,"button",65),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(18);return e.oxw(2).openModalTransferedTicket(o)}),e._uU(2," Detalhes da transfer\xeancia"),e.qZA(),e.qZA()}}function se(n,s){if(1&n&&(e.TgZ(0,"div",54),e.TgZ(1,"p",69),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"p",70),e._uU(5," por: "),e.TgZ(6,"b",71),e._uU(7),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.hij("Transferido para voc\xea em: ",e.xi3(3,2,t.transferDate,"dd/MM/YYYY"),""),e.xp6(5),e.Oqu(t.transferPreviousCustomer.name)}}function ce(n,s){if(1&n&&(e.TgZ(0,"div",54),e.TgZ(1,"p",69),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"p",70),e._uU(5,"para: "),e.TgZ(6,"b",71),e._uU(7),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.hij("Transferido por voc\xea em: ",e.xi3(3,2,t.transferDate,"dd/MM/YYYY"),""),e.xp6(5),e.Oqu(t.customer.name)}}function ae(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"div",32),e.TgZ(2,"h5",33),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return null==o.openModalTransferedTicketRef?null:o.openModalTransferedTicketRef.hide()}),e.TgZ(5,"span",36),e._uU(6,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,se,8,5,"div",67),e.YNc(8,ce,8,5,"ng-template",null,68,e.W1O)}if(2&n){const t=e.MAs(9),r=e.oxw().$implicit;e.xp6(3),e.hij("Detalhes da transfer\xeancia do ingresso ",r.name,""),e.xp6(4),e.Q6J("ngIf",1==r.recievedTicket)("ngIfElse",t)}}function de(n,s){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td",59),e.TgZ(2,"h5",60),e._uU(3),e.qZA(),e.TgZ(4,"p",60),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td",61),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td",61),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td",61),e._uU(13),e.ALo(14,"number"),e.qZA(),e.YNc(15,oe,2,1,"td",62),e.YNc(16,ie,3,0,"td",62),e.YNc(17,ae,10,3,"ng-template",null,63,e.W1O),e.qZA()),2&n){const t=s.$implicit;e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.sector),e.xp6(2),e.hij("R$ ",e.xi3(8,7,t.fee,"1.2-2"),""),e.xp6(3),e.hij("R$ ",e.xi3(11,10,t.price,"1.2-2"),""),e.xp6(3),e.hij("R$ ",e.xi3(14,13,(t.price+t.fee)*t.qty,"1.2-2"),""),e.xp6(2),e.Q6J("ngIf",null==t.transferDate),e.xp6(1),e.Q6J("ngIf",null!=t.transferDate)}}function _e(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"div",32),e.TgZ(2,"h5",33),e._uU(3),e.qZA(),e.TgZ(4,"p",34),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return null==o.modalTicketsRef?null:o.modalTicketsRef.hide()}),e.TgZ(7,"span",36),e._uU(8,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",54),e.TgZ(10,"div",55),e.TgZ(11,"table",56),e.TgZ(12,"thead"),e.TgZ(13,"tr"),e.TgZ(14,"th",57),e._uU(15,"Ingresso"),e.qZA(),e.TgZ(16,"th",58),e._uU(17,"Taxa"),e.qZA(),e.TgZ(18,"th",58),e._uU(19,"Pre\xe7o"),e.qZA(),e.TgZ(20,"th",58),e._uU(21,"Total"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"tbody",59),e.YNc(23,de,19,16,"tr",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",39),e.TgZ(25,"h3",17),e._uU(26),e.ALo(27,"number"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.selectedOrder.eventName),e.xp6(2),e.Oqu(t.selectedOrder.code),e.xp6(18),e.Q6J("ngForOf",t.selectedOrder.tickets),e.xp6(3),e.hij("R$ ",e.xi3(27,4,t.selectedOrder.amount,"1.2-2"),"")}}function le(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"td",59),e.TgZ(2,"h5",60),e._uU(3),e.qZA(),e.TgZ(4,"p",60),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td",61),e._uU(7),e.ALo(8,"number"),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.sector),e.xp6(2),e.hij("R$ ",e.xi3(8,3,(t.price+t.fee)*t.qty,"1.2-2"),"")}}function ue(n,s){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,le,9,6,"ng-container",5),e.qZA()),2&n){const t=s.$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.selectedOrder.ticketId==t.id)}}function me(n,s){if(1&n&&(e.TgZ(0,"div",77),e.TgZ(1,"h5"),e._uU(2,"Transferir para: "),e.qZA(),e.TgZ(3,"p",77),e._uU(4),e.qZA(),e.TgZ(5,"p",77),e._uU(6),e.qZA(),e.TgZ(7,"p",77),e._uU(8),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.hij("Nome: ",t.newTransferCustomerName,""),e.xp6(2),e.hij("Email: ",t.newTransferCustomerEmail,""),e.xp6(2),e.hij("Telefone: ",t.newTransferCustomerPhone,"")}}function ge(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"div",32),e.TgZ(2,"h5",33),e._uU(3),e.qZA(),e.TgZ(4,"p",34),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return null==o.openTransferTicketModalRef?null:o.openTransferTicketModalRef.hide()}),e.TgZ(7,"span",36),e._uU(8,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",54),e.TgZ(10,"div",55),e.TgZ(11,"table",56),e.TgZ(12,"thead"),e.TgZ(13,"tr"),e.TgZ(14,"th",57),e._uU(15,"Ingresso"),e.qZA(),e.TgZ(16,"th",58),e._uU(17,"Valor Total"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"tbody",59),e.YNc(19,ue,2,1,"tr",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",72),e.TgZ(21,"label",73),e._uU(22,"Insira o cpf para quem quer transferir o ingresso"),e.qZA(),e.TgZ(23,"input",74),e.NdJ("keyup",function(o){return e.CHM(t),e.oxw().checkCustomerRegister(o)})("input",function(o){return e.CHM(t),e.oxw().checkCustomerRegister(o)})("ngModelChange",function(o){return e.CHM(t),e.oxw().transferCpf=o}),e.qZA(),e.YNc(24,me,9,3,"div",75),e.qZA(),e.qZA(),e.TgZ(25,"div",39),e.TgZ(26,"button",76),e.NdJ("click",function(){return e.CHM(t),e.oxw().transferTicket()}),e._UZ(27,"i",66),e._uU(28," Concluir transfer\xeancia"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.selectedOrder.eventName),e.xp6(2),e.Oqu(t.selectedOrder.code),e.xp6(14),e.Q6J("ngForOf",t.selectedOrder.tickets),e.xp6(4),e.Q6J("ngModel",t.transferCpf),e.xp6(1),e.Q6J("ngIf",""!==t.newTransferCustomerName),e.xp6(2),e.Q6J("disabled",1==t.loadingUserInformation||0==t.transfer)}}const pe=[{path:"",component:(()=>{class n{constructor(t,r,o,c,h,Z,T,q,A,Te){this.authService=t,this.recaptchaV3Service=r,this.titleService=o,this.alertService=c,this.myOrdersService=h,this.modalService=Z,this.myProfileService=T,this.activatedRoute=q,this.router=A,this.orderService=Te,this.fengIntegration=!1,this.transfer=!1,this.orders=[],this.transferedOrders=[],this.loading=!1,this.loadingUserInformation=!1,this.selectedTicketTransfer="",this.transferCpf="",this.paymentData=[],this.paymentSuccess=!1,this.newTransferCustomerName="",this.newTransferCustomerEmail="",this.newTransferCustomerPhone="",this.comissionerMode=!1,this.customerId="",this.errorMessage="",this.unsubscribe$=new g.x}ngOnInit(){this.titleService.setTitle("Meus ingressos - "+this.authService.getCustomer().name),this.loadOrders(),this.checkComissioner(),this.customerId=this.authService.getCustomer().id}ngOnDestroy(){this.unsubscribe$.next(null),this.unsubscribe$.complete()}checkComissioner(){this.myProfileService.getComissioner().subscribe(t=>{this.comissionerMode=t,this.loadOrders()}),null!=this.authService.getCustomer().modeComissioner&&1==this.authService.getCustomer().modeComissioner&&(this.comissionerMode=!0,this.loadOrders())}paymentModal(t,r,o){var c=t.qrCodeBase64.split(",");this.paymentData={qrCode:t.qrCode,qrCodeImageData:t.qrCodeBase64.replace("data:image/jpg;base64,",""),isImageEncoded:c.length>1},this.checkPayment(o),this.openPixPaymentModalRef=this.modalService.show(r,{class:"modal-dialog-centered"})}checkPayment(t){this.subscription=(0,p.F)(5e3).subscribe(()=>{this.orderService.getOrderById(t).pipe((0,_.K)(r=>(this.alertService.toast({icon:"error",title:"Erro",text:r.error.errors[0].msg}),(0,m.of)(r)))).subscribe(r=>{"Approved"==r[0].status&&(this.paymentSuccess=!0,this.subscription.unsubscribe())})})}closePixPaymentModal(){var t;this.subscription.unsubscribe(),null===(t=this.openPixPaymentModalRef)||void 0===t||t.hide()}copyQrCode(t){t.select(),t.value=void 0!==this.paymentData.qrCode?this.paymentData.qrCode:this.paymentData.walletAddress,document.execCommand("copy"),t.setSelectionRange(0,0)}getStatusClass(t){return"Approved"==t?"bg-success":"Canceled"==t||"GoBack"==t||"Chargeback"==t?"bg-danger":"bg-warning"}getStatusDescription(t){return"Initial"==t?"N\xe3o processado":"Processing"==t?"Em an\xe1lise":"Approved"==t?"Aprovado":"Canceled"==t?"Cancelado":"Processando"}viewTickets(t){this.selectedOrder=t,this.modalTicketsRef=this.modalService.show(this.modalTickets,{class:"modal-dialog-centered"})}cancelOrder(t){this.alertService.confirm({icon:"warning",title:"Tem certeza que deseja cancelar seu pedido?",text:"Se cancelar todos os ingressos contidos nele ser\xe3o cancelados. O valor estornado ser\xe1 apenas o do ingresso, a taxa de conveni\xeancia ser\xe1 retida. Deseja cancelar mesmo assim?",cancelButtonText:"Voltar"}).then(r=>{r.value&&this.myOrdersService.cancel(t.id).pipe((0,x.R)(this.unsubscribe$)).subscribe({next:()=>{this.alertService.toast({icon:"success",title:"Sucesso",text:"Pedido cancelado com sucesso."})},error:o=>{this.alertService.toast({icon:"error",title:"Erro",text:o.error.errors[0].msg})}})})}openTransferTicketModal(t,r,o){var c;null===(c=this.modalTicketsRef)||void 0===c||c.hide(),this.selectedTicketTransfer=r,this.selectedTicketTransfer.ticketId=o,this.openTransferTicketModalRef=this.modalService.show(t)}transferTicket(){this.myOrdersService.transferTicket(this.selectedOrder.tickets[0].customer,this.selectedTicketTransfer.ticketId,this.transferCpf).pipe((0,_.K)(t=>(this.alertService.toast({icon:"error",title:"Erro ao transferir ingresso",text:t.error.errors[0].msg}),(0,m.of)(t)))).subscribe(t=>{var r;null==t.error&&(this.loadOrders(),null===(r=this.openTransferTicketModalRef)||void 0===r||r.hide(),this.alertService.toast({icon:"success",title:"Sucesso",text:"Ingresso tranferido com sucesso"}))})}openModalTransferedTicket(t){var r;null===(r=this.modalTicketsRef)||void 0===r||r.hide(),this.openModalTransferedTicketRef=this.modalService.show(t)}checkCustomerRegister(t){this.loadingUserInformation=!0,14==t.srcElement.value.length?this.myProfileService.checkCustomerRegisterWithCpf(t.srcElement.value).subscribe(r=>{this.loadingUserInformation=!1,r.length>=1?(this.transfer=!0,this.newTransferCustomerName=r[0].name,this.newTransferCustomerEmail=r[0].email,this.newTransferCustomerPhone=r[0].phones[0]):(this.transfer=!1,this.alertService.toast({icon:"error",title:"Erro",text:"Este CPF n\xe3o possui cadastro na IngressoS.A., solicite o novo titular que cadastre"}),this.newTransferCustomerName="")}):this.newTransferCustomerName=""}loadOrders(){this.loading=!0,this.recaptchaV3Service.execute("submitSearch").subscribe(t=>{const r=this.authService.getCustomer();let o;1==this.comissionerMode&&(o={comissionerId:this.authService.getCustomer().comissionerId}),this.myOrdersService.getOrders(r.doc,r.email,t,o).pipe((0,x.R)(this.unsubscribe$),(0,_.K)(c=>(0,m.of)(c))).subscribe(c=>{this.orders=c,null!=c.error&&(this.errorMessage=c.error.errors[0].msg),this.loading=!1,c.forEach((h,Z)=>{h.tickets.forEach((T,q)=>{null!=T.transferPreviousCustomerId&&T.transferPreviousCustomerId!==this.authService.getCustomer().id&&(this.orders[Z].tickets=this.orders[Z].tickets.filter(A=>A.customerId==this.customerId)),null!=T.transferPreviousCustomerId&&T.transferPreviousCustomerId==this.authService.getCustomer().id&&(this.orders[Z].tickets=this.orders[Z].tickets.filter(A=>A))})})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.e),e.Y36(f.YC),e.Y36(C.Dx),e.Y36(k.c),e.Y36(U.U),e.Y36(y.tT),e.Y36(I.c),e.Y36(l.gz),e.Y36(l.F0),e.Y36(w.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-my-orders"]],viewQuery:function(t,r){if(1&t&&e.Gf(E,5),2&t){let o;e.iGM(o=e.CRH())&&(r.modalTickets=o.first)}},decls:12,vars:3,consts:[[1,"container-fluid","mt-5"],[1,"text-center","fw-bold","text-grad"],[1,"row","mb-5"],[4,"ngIf","ngIfElse"],["showErrorMessage",""],[4,"ngIf"],["modalTickets",""],["modalTransferTicket",""],[4,"ngFor","ngForOf"],["class","col-sm-6 col-lg-4 my-3",4,"ngIf"],["modalPixPayment",""],[1,"col-sm-6","col-lg-4","my-3"],[1,"card"],[1,"card-body","d-flex","justify-content-between"],[1,""],[1,"text-capitalize"],[1,"text-end"],[1,"text-grad","fw-bold"],[1,"date","text-muted"],[1,"btn","bg-grad","btn-sm","fw-bold","text-uppercase","m-1",3,"click"],[1,"fa","fa-ticket","me-2"],["class","btn btn-outline-danger btn-sm text-uppercase m-1",3,"click",4,"ngIf"],[1,"card-footer","d-flex","justify-content-between","border-0"],[1,"fw-bold","text-grad"],["class","text-grad h6","target","_blank",3,"href",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm","text-uppercase","m-1",3,"click"],[1,"las","la-times-circle","me-1"],["target","_blank",1,"text-grad","h6",3,"href"],[1,"las","la-tag"],["target","_blank","class","btn btn-success  float-end w-25 mb-3 ms-3",3,"click",4,"ngIf"],["target","_blank",1,"btn","btn-success","float-end","w-25","mb-3","ms-3",3,"click"],[1,"modal-header","border-0"],[1,"d-flex","align-items-center"],[1,"modal-title","pull-left","fw-bold","text-uppercase","m-0","me-2"],[1,"text-grad","m-0"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body","text-center"],["showSuccessMessage",""],[1,"modal-footer","border-0"],[1,"btn","btn-grad",3,"click"],[1,"row"],[1,"col-xs-12","col-md-12"],[1,"container","text-center","pdtextdiv"],[1,"mx-auto"],["width","300",3,"src",4,"ngIf"],["readonly","","type","text",1,"form-control",3,"value"],["inputQrCode",""],[1,"btn","btn-lg","btn-success","mx-2","mt-3",2,"color","white","cursor","pointer",3,"click"],["width","300",3,"src"],[2,"color","green"],[1,"fs-4","text-center"],["class","col-sm-6 col-lg-4 my-3",4,"ngFor","ngForOf"],[3,"theme"],[1,"modal-body"],[1,"table-responsive"],[1,"table"],[1,"text-grad","border-0"],[1,"text-grad","text-center","border-0"],[1,"border-0"],[1,"m-0"],[1,"text-center","border-0"],["class","text-center border-0",4,"ngIf"],["modalTransferedTicket",""],["class","btn btn-outline-danger btn-primary btn-sm text-uppercase m-1 text-white",3,"click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-primary","btn-sm","text-uppercase","m-1","text-white",3,"click"],[1,"las","la-exchange-alt"],["class","modal-body",4,"ngIf","ngIfElse"],["showTransferedTicketBy",""],[1,"fs-5"],[1,"fs-4"],[1,"text-grad"],[1,"mt-2","mb-3"],[1,"mb-2"],["type","text","mask","000.000.000-00",1,"form-control",3,"ngModel","keyup","input","ngModelChange"],["class","mt-3",4,"ngIf"],[1,"btn","btn-outline-danger","btn-grad","btn-sm","text-uppercase","m-1",3,"disabled","click"],[1,"mt-3"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Meus ingressos"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,L,2,1,"ng-container",3),e.YNc(5,H,2,1,"ng-template",null,4,e.W1O),e.YNc(7,ne,2,2,"ng-container",5),e.qZA(),e.qZA(),e.YNc(8,_e,28,7,"ng-template",null,6,e.W1O),e.YNc(10,ge,29,6,"ng-template",null,7,e.W1O)),2&t){const o=e.MAs(6);e.xp6(4),e.Q6J("ngIf",""==r.errorMessage)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",1==r.loading)}},directives:[a.O5,a.sg,O.xr,b.hx,d.Fj,d.JJ,d.On],pipes:[a.uU,a.JJ],styles:[".card[_ngcontent-%COMP%]{border-radius:18px}.card-footer[_ngcontent-%COMP%]{background:none}.date[_ngcontent-%COMP%]{line-height:1.15}.badge[_ngcontent-%COMP%]{border-radius:25px;font-weight:400}"]}),n})()}];let fe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.Bz.forChild(pe)],l.Bz]}),n})();var xe=i(2340);const he={validation:!1};let Ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:f.We,useValue:xe.N.recaptchaKeyV3}],imports:[[a.ez,fe,f.dw,d.u5,b.yI.forRoot(he),O.hx,y.zk.forRoot()]]}),n})()},2805:(M,u,i)=>{i.d(u,{H:()=>x});var d=i(8306),a=i(4986),l=i(3532),g=i(1165);function x(p=0,m,_=a.P){let e=-1;return null!=m&&((0,l.K)(m)?_=m:e=m),new d.y(v=>{let f=(0,g.q)(p)?+p-_.now():p;f<0&&(f=0);let C=0;return _.schedule(function(){v.closed||(v.next(C++),0<=e?this.schedule(void 0,e):v.complete())},f)})}},2722:(M,u,i)=>{i.d(u,{R:()=>x});var d=i(4482),a=i(5403),l=i(8421),g=i(5032);function x(p){return(0,d.e)((m,_)=>{(0,l.Xf)(p).subscribe(new a.Q(_,()=>_.complete(),g.Z)),!_.closed&&m.subscribe(_)})}},4986:(M,u,i)=>{i.d(u,{P:()=>g,z:()=>l});var d=i(4408);const l=new(i(640).v)(d.o),g=l},1165:(M,u,i)=>{function d(a){return a instanceof Date&&!isNaN(a)}i.d(u,{q:()=>d})}}]);