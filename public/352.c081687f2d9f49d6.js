(self.webpackChunkMeuBilhete_NewSite=self.webpackChunkMeuBilhete_NewSite||[]).push([[352],{8352:(Cn,Ci,j)=>{"use strict";j.r(Ci),j.d(Ci,{EventModule:()=>Fo});var ee=j(9808),L=j(8827),e=(j(655),j(5e3)),ye=j(2313);let pt=(()=>{class r{}return r.Fade="fade",r.Slide="slide",r.Rotate="rotate",r.Zoom="zoom",r})(),si=(()=>{let r=class{};return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[ee.ez]]}),r})();var zt=j(6770),$e=j(9485);function ct(r,d,i,a){return new(i||(i=Promise))(function(f,k){function O(Q){try{G(a.next(Q))}catch(de){k(de)}}function U(Q){try{G(a.throw(Q))}catch(de){k(de)}}function G(Q){Q.done?f(Q.value):function g(f){return f instanceof i?f:new i(function(k){k(f)})}(Q.value).then(O,U)}G((a=a.apply(r,d||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;let Ge=(()=>{class r{showDesigner(i){return ct(this,void 0,void 0,function*(){const a=yield this.getSeatsio(i.region,i.chartJsUrl);return delete i.chartJsUrl,delete i.region,new a.SeatingChartDesigner(i).render()})}showSeatingChart(i){return ct(this,void 0,void 0,function*(){const a=yield this.getSeatsio(i.region,i.chartJsUrl);return delete i.chartJsUrl,delete i.region,new a.SeatingChart(i).render()})}showEventManager(i){return ct(this,void 0,void 0,function*(){const a=yield this.getSeatsio(i.region,i.chartJsUrl);return delete i.chartJsUrl,delete i.region,new a.EventManager(i).render()})}showChartManager(i){return ct(this,void 0,void 0,function*(){const a=yield this.getSeatsio(i.region,i.chartJsUrl);return delete i.chartJsUrl,delete i.region,new a.ChartManager(i).render()})}getSeatsio(i,a){return"undefined"!=typeof seatsio?Promise.resolve(seatsio):this.loadSeatsio(i,a)}loadSeatsio(i,a="https://cdn-{region}.seatsio.net/chart.js"){return new Promise((g,f)=>{const k=document.createElement("script");k.onload=()=>g(seatsio),k.onerror=()=>f(`Could not load ${k.src}`),k.src=a.replace("{region}",i),document.head.appendChild(k)})}ngOnDestroy(){}ngOnInit(){}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=e.Yz7({factory:function(){return new r},token:r,providedIn:"root"}),r})(),Ai=(()=>{class r{constructor(i){this.id="chart",this.seatsioService=i}render(i){throw new Error("Not implemented")}ngOnInit(){return ct(this,void 0,void 0,function*(){this.config.divId&&(this.id=this.config.divId),"onRenderStarted"in this.config&&this.config.onRenderStarted(),this.chart=yield this.render(this.config)})}ngOnDestroy(){this.chart&&this.chart.destroy()}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(Ge))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],inputs:{id:"id",config:"config",class:"class"},decls:0,vars:0,template:function(i,a){},encapsulation:2}),r})(),Zn=(()=>{class r extends Ai{constructor(i){super(i)}render(i){return this.seatsioService.showSeatingChart(this.config)}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(Ge))},r.\u0275cmp=e.Xpm({type:r,selectors:[["si-seatsio-seating-chart"]],features:[e._Bn([Ge]),e.qOj],decls:1,vars:4,consts:[[2,"height","100vh",3,"id"]],template:function(i,a){1&i&&e._UZ(0,"div",0),2&i&&(e.Tol(a.class),e.s9C("id",a.id))},styles:[""]}),r})(),Vi=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[]]}),r})(),dn=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[ee.ez,Vi]]}),r})();var H=j(3075),tt=j(508),Ne=j(3191),qe=j(1159),Wi=j(6360),je=j(925),mt=j(727),ft=j(5664),It=j(226);const di=["sliderWrapper"],ze=(0,je.i$)({passive:!1}),xt={provide:H.JU,useExisting:(0,e.Gpc)(()=>Me),multi:!0};class ht{}const Et=(0,tt.sb)((0,tt.pj)((0,tt.Id)(class{constructor(r){this._elementRef=r}}),"accent"));let Me=(()=>{class r extends Et{constructor(i,a,g,f,k,O,U,G){super(i),this._focusMonitor=a,this._changeDetectorRef=g,this._dir=f,this._ngZone=O,this._animationMode=G,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new e.vpe,this.input=new e.vpe,this.valueChange=new e.vpe,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=mt.w0.EMPTY,this._pointerDown=Q=>{this.disabled||this._isSliding||!Mt(Q)&&0!==Q.button||this._ngZone.run(()=>{this._touchId=Mt(Q)?function De(r,d){for(let i=0;i<r.touches.length;i++){const a=r.touches[i].target;if(d===a||d.contains(a))return r.touches[i].identifier}}(Q,this._elementRef.nativeElement):void 0;const de=Xi(Q,this._touchId);if(de){const oe=this.value;this._isSliding="pointer",this._lastPointerEvent=Q,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(Q),this._focusHostElement(),this._updateValueFromPosition(de),this._valueOnSlideStart=oe,Q.cancelable&&Q.preventDefault(),oe!=this.value&&this._emitInputEvent()}})},this._pointerMove=Q=>{if("pointer"===this._isSliding){const de=Xi(Q,this._touchId);if(de){Q.preventDefault();const oe=this.value;this._lastPointerEvent=Q,this._updateValueFromPosition(de),oe!=this.value&&this._emitInputEvent()}}},this._pointerUp=Q=>{"pointer"===this._isSliding&&(!Mt(Q)||"number"!=typeof this._touchId||dt(Q.changedTouches,this._touchId))&&(Q.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=U,this.tabIndex=parseInt(k)||0,O.runOutsideAngular(()=>{const Q=i.nativeElement;Q.addEventListener("mousedown",this._pointerDown,ze),Q.addEventListener("touchstart",this._pointerDown,ze)})}get invert(){return this._invert}set invert(i){this._invert=(0,Ne.Ig)(i)}get max(){return this._max}set max(i){this._max=(0,Ne.su)(i,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(i){this._min=(0,Ne.su)(i,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(i){this._step=(0,Ne.su)(i,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(i){this._thumbLabel=(0,Ne.Ig)(i)}get tickInterval(){return this._tickInterval}set tickInterval(i){this._tickInterval="auto"===i?"auto":"number"==typeof i||"string"==typeof i?(0,Ne.su)(i,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(i){if(i!==this._value){let a=(0,Ne.su)(i,0);this._roundToDecimal&&a!==this.min&&a!==this.max&&(a=parseFloat(a.toFixed(this._roundToDecimal))),this._value=a,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(i){this._vertical=(0,Ne.Ig)(i)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(i){this._focusHostElement(i)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const a=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${a})`}}_getTrackFillStyles(){const i=this.percent,g=this.vertical?`1, ${i}, 1`:`${i}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${g})`,display:0===i?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let i=100*this._tickIntervalPercent,O={backgroundSize:this.vertical?`2px ${i}%`:`${i}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${i/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const U=this._shouldInvertAxis();let G;G=this.vertical?U?"Bottom":"Top":U?"Right":"Left",O[`padding${G}`]=`${this._getThumbGap()}px`}return O}_getThumbContainerStyles(){const i=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?i:!i)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const i=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?i:!i}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{this._isActive=!!i&&"keyboard"!==i,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const i=this._elementRef.nativeElement;i.removeEventListener("mousedown",this._pointerDown,ze),i.removeEventListener("touchstart",this._pointerDown,ze),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(i){if(this.disabled||(0,qe.Vb)(i)||this._isSliding&&"keyboard"!==this._isSliding)return;const a=this.value;switch(i.keyCode){case qe.Ku:this._increment(10);break;case qe.VM:this._increment(-10);break;case qe.uR:this.value=this.max;break;case qe.Sd:this.value=this.min;break;case qe.oh:this._increment("rtl"==this._getDirection()?1:-1);break;case qe.LH:this._increment(1);break;case qe.SV:this._increment("rtl"==this._getDirection()?-1:1);break;case qe.JH:this._increment(-1);break;default:return}a!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",i.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(i){const a=this._document,g=Mt(i),k=g?"touchend":"mouseup";a.addEventListener(g?"touchmove":"mousemove",this._pointerMove,ze),a.addEventListener(k,this._pointerUp,ze),g&&a.addEventListener("touchcancel",this._pointerUp,ze);const O=this._getWindow();void 0!==O&&O&&O.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const i=this._document;i.removeEventListener("mousemove",this._pointerMove,ze),i.removeEventListener("mouseup",this._pointerUp,ze),i.removeEventListener("touchmove",this._pointerMove,ze),i.removeEventListener("touchend",this._pointerUp,ze),i.removeEventListener("touchcancel",this._pointerUp,ze);const a=this._getWindow();void 0!==a&&a&&a.removeEventListener("blur",this._windowBlur)}_increment(i){const a=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(a+this.step*i,this.min,this.max)}_updateValueFromPosition(i){if(!this._sliderDimensions)return;let k=this._clamp(((this.vertical?i.y:i.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(k=1-k),0===k)this.value=this.min;else if(1===k)this.value=this.max;else{const O=this._calculateValue(k),U=Math.round((O-this.min)/this.step)*this.step+this.min;this.value=this._clamp(U,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let i;if("auto"==this.tickInterval){let a=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;i=Math.ceil(30/(a*this.step/(this.max-this.min)))*this.step/a}else i=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=Ze(i)?i:0}_createChangeEvent(i=this.value){let a=new ht;return a.source=this,a.value=i,a}_calculatePercentage(i){const a=((i||0)-this.min)/(this.max-this.min);return Ze(a)?a:0}_calculateValue(i){return this.min+i*(this.max-this.min)}_clamp(i,a=0,g=1){return Math.max(a,Math.min(i,g))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(i){this._elementRef.nativeElement.focus(i)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(i){this.value=i}registerOnChange(i){this._controlValueAccessorChangeFn=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(e.SBq),e.Y36(ft.tE),e.Y36(e.sBO),e.Y36(It.Is,8),e.$8M("tabindex"),e.Y36(e.R0b),e.Y36(ee.K0),e.Y36(Wi.Qb,8))},r.\u0275cmp=e.Xpm({type:r,selectors:[["mat-slider"]],viewQuery:function(i,a){if(1&i&&e.Gf(di,5),2&i){let g;e.iGM(g=e.CRH())&&(a._sliderWrapper=g.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(i,a){1&i&&e.NdJ("focus",function(){return a._onFocus()})("blur",function(){return a._onBlur()})("keydown",function(f){return a._onKeydown(f)})("keyup",function(){return a._onKeyup()})("mouseenter",function(){return a._onMouseenter()})("selectstart",function(f){return f.preventDefault()}),2&i&&(e.Ikx("tabIndex",a.tabIndex),e.uIk("aria-disabled",a.disabled)("aria-valuemax",a.max)("aria-valuemin",a.min)("aria-valuenow",a.value)("aria-valuetext",null==a.valueText?a.displayValue:a.valueText)("aria-orientation",a.vertical?"vertical":"horizontal"),e.ekj("mat-slider-disabled",a.disabled)("mat-slider-has-ticks",a.tickInterval)("mat-slider-horizontal",!a.vertical)("mat-slider-axis-inverted",a._shouldInvertAxis())("mat-slider-invert-mouse-coords",a._shouldInvertMouseCoords())("mat-slider-sliding",a._isSliding)("mat-slider-thumb-label-showing",a.thumbLabel)("mat-slider-vertical",a.vertical)("mat-slider-min-value",a._isMinValue())("mat-slider-hide-last-tick",a.disabled||a._isMinValue()&&a._getThumbGap()&&a._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===a._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[e._Bn([xt]),e.qOj],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0,1),e.TgZ(2,"div",2),e._UZ(3,"div",3),e._UZ(4,"div",4),e.qZA(),e.TgZ(5,"div",5),e._UZ(6,"div",6),e.qZA(),e.TgZ(7,"div",7),e._UZ(8,"div",8),e._UZ(9,"div",9),e.TgZ(10,"div",10),e.TgZ(11,"span",11),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(3),e.Q6J("ngStyle",a._getTrackBackgroundStyles()),e.xp6(1),e.Q6J("ngStyle",a._getTrackFillStyles()),e.xp6(1),e.Q6J("ngStyle",a._getTicksContainerStyles()),e.xp6(1),e.Q6J("ngStyle",a._getTicksStyles()),e.xp6(1),e.Q6J("ngStyle",a._getThumbContainerStyles()),e.xp6(5),e.Oqu(a.displayValue))},directives:[ee.PC],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),r})();function Ze(r){return!isNaN(r)&&isFinite(r)}function Mt(r){return"t"===r.type[0]}function Xi(r,d){let i;return i=Mt(r)?"number"==typeof d?dt(r.touches,d)||dt(r.changedTouches,d):r.touches[0]||r.changedTouches[0]:r,i?{x:i.clientX,y:i.clientY}:void 0}function dt(r,d){for(let i=0;i<r.length;i++)if(r[i].identifier===d)return r[i]}let gi=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[ee.ez,tt.BQ],tt.BQ]}),r})();var Yt=j(4376),pi=j(1268);let ki=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[{provide:ye.ok,useClass:ye.hm}],imports:[[ee.ez,H.u5,H.UX,gi,Yt.A0,pi.F]]}),r})(),Ii=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[ee.ez,H.u5]]}),r})();var Je=j(3287);class it{}it.gallery=[{height:"400px",width:"100%",imageAnimation:pt.Slide,thumbnailsColumns:5},{breakpoint:1199,height:"200px",imageAnimation:pt.Slide,thumbnailsColumns:4},{breakpoint:991,height:"400px",imageAnimation:pt.Slide,thumbnailsColumns:4},{breakpoint:767,height:"300px",imageAnimation:pt.Slide,thumbnailsColumns:5},{breakpoint:575,height:"250px",imageAnimation:pt.Slide,thumbnailsColumns:4},{breakpoint:359,height:"200px",imageAnimation:pt.Slide,thumbnailsColumns:3}];var _i=j(4776),Zt=j(7579),Jt=j(262),mi=j(9646),Ke=j(2722),gn=j(2340),m=j(8922),x=j(756),w=j(7217),I=j(5970),S=j(7556),Y=j(7862),ie=j(3254);let Ce=(()=>{class r{constructor(i){this._document=i,this.eventSchema=a=>{var g={"@context":"https://schema.org","@type":"Event",name:a.name,startDate:a.startDate,endDate:a.endDate,eventAttendanceMode:"https://schema.org/OfflineEventAttendanceMode",eventStatus:"https://schema.org/EventScheduled",location:{"@type":"Place",name:a.location.name,address:{"@type":"PostalAddress",streetAddress:a.location.streetAddress,addressLocality:a.location.addressLocality,addressRegion:a.location.addressRegion,addressCountry:a.location.addressCountry||"BR"}},image:a.images,description:a.description||a.name,offers:{"@type":"Offer",url:a.eventUrl,availability:"https://schema.org/InStock"},performer:{"@type":"PerformingGroup",name:a.name},organizer:{"@type":"Organization",name:a.companyName,url:a.companyUrl}};return a.minPrice&&(g.offers.price=a.minPrice,g.offers.priceCurrency="BRL"),g}}removeStructuredData(){const i=Array();["structured-data","structured-data-org"].forEach(a=>{i.push(...Array.from(this._document.head.getElementsByClassName(a)))}),i.forEach(a=>this._document.head.removeChild(a))}insertSchema(i,a="structured-data"){let g,f=!1;this._document.head.getElementsByClassName(a).length?g=this._document.head.getElementsByClassName(a)[0]:(g=this._document.createElement("script"),f=!0),g.setAttribute("class",a),g.type=r.scriptType,g.text=JSON.stringify(i),f&&this._document.head.appendChild(g)}}return r.scriptType="application/ld+json",r.websiteSchema=(d,i)=>({"@context":"http://schema.org","@type":"WebSite",url:d||"https://google.com",name:i||"Google",sameAs:["https://facebook.com/google","https://instagram.com/google","https://twitter.com/google"]}),r.orgSchema=()=>({"@context":"https://schema.org","@type":"Organization",url:"https://google.com",name:"Google",contactPoint:{"@type":"ContactPoint",telephone:"01293019413",contactType:"Customer service"}}),r.\u0275fac=function(i){return new(i||r)(e.LFG(ee.K0))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var pe=j(5307),Re=j(4594),Te=j(7423),$i=j(5245),Qt=j(2638),pn=j(9814);function Nn(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"label",3),e._UZ(1,"mat-radio-button",4),e.TgZ(2,"button",5),e.NdJ("click",function(){return e.CHM(i),e.oxw().unselectTicket()}),e.TgZ(3,"mat-icon",6),e._uU(4,"close"),e.qZA(),e.qZA(),e.TgZ(5,"div",7),e.TgZ(6,"h5"),e._uU(7),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"h5"),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.ALo(18,"number"),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=d.$implicit,a=e.oxw();e.xp6(1),e.Q6J("value",i.id)("hidden",a.ticketId==i.id),e.xp6(1),e.Q6J("hidden",a.ticketId!=i.id),e.xp6(5),e.Oqu(i.name),e.xp6(2),e.AsE("",a.place.row," ",a.place.number,""),e.xp6(2),e.Oqu(i.lotName),e.xp6(3),e.hij("R$ ",e.xi3(15,9,a.amount(i.price),"1.2-2"),""),e.xp6(3),e.hij("R$ ",e.xi3(18,12,a.amount(i.fee),"1.2-2")," (Taxa)")}}let Tr=(()=>{class r{constructor(i){this.service=i,this.unsubscribe$=new Zt.x,this.ticketId=""}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.service.setView(m.b.PLACES)}ngOnChanges(){this.place&&this.place.selectedTicket&&(this.ticketId=this.place.selectedTicket.id)}selectTicket(){const i=this.place.tickets.find(a=>a.id===this.ticketId);this.service.reserve(this.place,i).then(()=>{this.service.setView(m.b.PLACES)})}unselectTicket(){this.service.cancelReserve(this.place).then(()=>{this.ticketId="",this.service.setView(m.b.PLACES)})}amount(i){return i*this.place.quantity}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(pe.a))},r.\u0275cmp=e.Xpm({type:r,selectors:[["mapv2-tickets"]],inputs:{place:"place"},features:[e.TTD],decls:3,vars:2,consts:[[1,"mapv2-tickets"],[3,"ngModel","ngModelChange","change"],["class","mapv2-tickets-item",4,"ngFor","ngForOf"],[1,"mapv2-tickets-item"],[3,"value","hidden"],["mat-icon-button","",1,"delete-ticket-item",3,"hidden","click"],[1,"material-icons-outlined"],[1,"info"],[1,"price"]],template:function(i,a){1&i&&(e.TgZ(0,"section",0),e.TgZ(1,"mat-radio-group",1),e.NdJ("ngModelChange",function(f){return a.ticketId=f})("change",function(){return a.selectTicket()}),e.YNc(2,Nn,19,15,"label",2),e.qZA(),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngModel",a.ticketId),e.xp6(1),e.Q6J("ngForOf",null==a.place?null:a.place.tickets))},directives:[pn.VQ,H.JJ,H.On,ee.sg,pn.U0,Te.lW,$i.Hw],pipes:[ee.JJ],styles:[".mapv2-tickets[_ngcontent-%COMP%]{background-color:#fff;width:400px;height:100%;overflow:auto;border-top:1px solid #EDEDED}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:20px;margin:0}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #f2f2f2}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]:hover{background-color:#f2f2f2;cursor:pointer}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;-webkit-user-select:none;user-select:none}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400;color:#6e6e6e}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-left:20px;width:100%}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{width:100%;text-align:end}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{animation:fadeIn .5s}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   .delete-ticket-item[_ngcontent-%COMP%]{margin:-8px -2px 0 -10px;animation:fadeIn .5s}@media (max-width: 575px){.mapv2-tickets[_ngcontent-%COMP%]{max-width:calc(100vw - 40px)}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]{flex-wrap:wrap;gap:10px;border-bottom:1px solid #f2f2f2;padding-right:50px}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%], .mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   .delete-ticket-item[_ngcontent-%COMP%]{position:absolute;right:10px;z-index:99}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-left:0}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{text-align:start}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px}.mapv2-tickets[_ngcontent-%COMP%]   .mapv2-tickets-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}"]}),r})();function wr(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"button",4),e.NdJ("click",function(){const f=e.CHM(i).$implicit;return e.oxw().deletePlace(f)}),e.TgZ(3,"mat-icon",5),e._uU(4,"close"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",6),e.TgZ(6,"h5"),e._uU(7),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"h5"),e._uU(12),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.ALo(16,"number"),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=d.$implicit;e.xp6(7),e.Oqu(i.selectedTicket.name),e.xp6(2),e.AsE("",i.row," ",i.number,""),e.xp6(3),e.hij("R$ ",e.xi3(13,5,i.selectedTicket.price*i.quantity,"1.2-2"),""),e.xp6(3),e.hij("R$ ",e.xi3(16,8,i.selectedTicket.fee*i.quantity,"1.2-2")," (Taxa)")}}let Xn=(()=>{class r{constructor(i){this.service=i,this.unsubscribe$=new Zt.x}ngOnInit(){const i=this.service.getCart();this.selectedPlaces=i.places}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}deletePlace(i){this.service.cancelReserve(i).then(()=>{this.service.setView(m.b.PLACES)})}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(pe.a))},r.\u0275cmp=e.Xpm({type:r,selectors:[["mapv2-cart"]],decls:2,vars:1,consts:[[1,"mapv2-cart"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-item"],[1,"remove-place"],["mat-icon-button","",3,"click"],["color","primary",1,"material-icons-outlined"],[1,"place-ticket"],[1,"ticket-price"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0),e.YNc(1,wr,17,11,"div",1),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",a.selectedPlaces))},directives:[ee.sg,Te.lW,$i.Hw],pipes:[ee.JJ],styles:[".mapv2-cart{width:400px;border-top:1px solid #EDEDED}.mapv2-cart .cart-item{display:flex;align-items:center;gap:15px;padding:15px}.mapv2-cart .cart-item:not(:last-child){border-bottom:1px solid #f2f2f2}.mapv2-cart .cart-item:hover{background-color:#f2f2f2}.mapv2-cart .cart-item button{outline:none}.mapv2-cart .cart-item h5,.mapv2-cart .cart-item p{margin:0}.mapv2-cart .cart-item p{font-weight:400;color:#6e6e6e}.mapv2-cart .cart-item .ticket-price{margin-left:auto}@media (max-width: 575px){.mapv2-cart{max-width:calc(100vw - 40px)}.mapv2-cart .cart-item .ticket-price h5{font-size:16px}.mapv2-cart .cart-item .ticket-price p{font-size:14px}}\n"],encapsulation:2}),r})();function $n(r,d){if(1&r&&(e.TgZ(0,"div",1),e._UZ(1,"div",2),e.qZA()),2&r){const i=e.oxw();e.xp6(1),e.Udp("width",i.size+"px")("height",i.size+"px")("border-width",i.weight+"px")("border-color",i.fill)("border-bottom-color","transparent")}}let Sr=(()=>{class r{constructor(){this.show=!0,this.size=32,this.fill="#FFFFFF",this.weight=3}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["mapv2-loader"]],inputs:{show:"show",size:"size",fill:"fill",weight:"weight"},decls:1,vars:1,consts:[["class","map-loader-backdrop",4,"ngIf"],[1,"map-loader-backdrop"],[1,"map-loader"]],template:function(i,a){1&i&&e.YNc(0,$n,2,10,"div",0),2&i&&e.Q6J("ngIf",a.show)},directives:[ee.O5],styles:[".map-loader-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.5);z-index:99999}.map-loader[_ngcontent-%COMP%]{border:5px solid #FFFFFF;border-bottom-color:transparent;border-radius:50%;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),r})(),jn=(()=>{class r{transform(i=[],a){return a?i.filter(g=>!!g.tickets.find(f=>f.sectorId==a)):i}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275pipe=e.Yjl({name:"placesBySector",type:r,pure:!0}),r})();function Pr(r,d){if(1&r&&(e.TgZ(0,"h6",24),e._uU(1),e.qZA()),2&r){const i=e.oxw();e.xp6(1),e.Oqu(i.sector.name)}}function Kn(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(i),e.oxw().openCart()}),e.TgZ(1,"mat-icon",2),e._uU(2,"local_activity"),e.qZA(),e._uU(3),e.ALo(4,"number"),e.qZA()}if(2&r){const i=e.oxw();e.Q6J("disabled",i.isTicketsShowing||i.isCartShowing),e.xp6(3),e.hij(" R$ ",e.xi3(4,2,i.amount,"1.2-2")," ")}}function ji(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",28),e.NdJ("click",function(){const f=e.CHM(i).$implicit;return e.oxw(2).openTickets(f)}),e.qZA()}if(2&r){const i=d.$implicit,a=e.oxw(2);e.ekj("disabled",a.isDisabledPlace(i)),e.Q6J("ngStyle",a.getPlaceStyle(i))}}function er(r,d){if(1&r&&(e.TgZ(0,"div",26),e.YNc(1,ji,1,3,"div",27),e.ALo(2,"placesBySector"),e.qZA()),2&r){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,i.map.places,i.sector.id))}}function Ot(r,d){if(1&r&&e._UZ(0,"mapv2-tickets",29),2&r){const i=e.oxw();e.Q6J("place",i.selectedPlace)}}function qn(r,d){1&r&&e._UZ(0,"mapv2-cart")}let tr=(()=>{class r{constructor(i){this.service=i,this.unsubscribe$=new Zt.x,this.zoom=1,this.amount=0}ngOnInit(){this.initializeLoading(),this.initializeView(),this.initializeMap(),this.initializeSector()}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.next(),this.service.setView(m.b.PLACES)}get isTicketsShowing(){return this.view===m.b.TICKETS}get isCartShowing(){return this.view===m.b.CART}closePlaces(){this.service.hide()}closeDrawer(){this.service.setView(m.b.PLACES)}openTickets(i){this.isDisabledPlace(i)||(this.selectedPlace=i,this.service.setView(m.b.TICKETS))}openCart(){this.service.setView(m.b.CART)}getPlaceStyle(i){const[a,g]=i.coords.split(","),f="circle"==i.shape?"100%":"1px";let k;return k=this.selectedPlaces.find(U=>U.row==i.row&&U.number==i.number)?"rgba(0, 0, 255, .8)":i.available?"rgba(0, 255, 0, .8)":"rgba(160, 160, 160, .8)",{top:`${g}px`,left:`${a}px`,height:`${i.height}px`,width:`${i.width}px`,borderRadius:f,backgroundColor:k}}isDisabledPlace(i){const a=this.selectedPlaces.find(g=>g.row==i.row&&g.number==i.number);return!i.available&&!a}zoomIn(){const i=document.querySelector("#image-zoom");this.zoom+=.1,i.style.zoom=this.zoom.toString()}zoomOut(){const i=document.querySelector("#image-zoom");this.zoom-.1>=1&&(this.zoom-=.1),i.style.zoom=this.zoom.toString()}loadImageEvents(){const i=document.getElementById("image-zoom");i.addEventListener("mousedown",a=>{this.startX=a.clientX,this.startY=a.clientY,this.scrollStartX=i.scrollLeft,this.scrollStartY=i.scrollTop;const g=k=>{const Q=k.clientY-this.startY;i.scrollLeft=this.scrollStartX-(k.clientX-this.startX),i.scrollTop=this.scrollStartY-Q,i.style.pointerEvents="none"},f=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",f),i.style.pointerEvents="auto"};document.addEventListener("mousemove",g),document.addEventListener("mouseup",f)}),i.addEventListener("wheel",a=>{a.preventDefault();const g=.05;a.deltaY<0?this.zoom+=g:this.zoom-g>=1&&(this.zoom-=g),i.style.zoom=this.zoom.toString()})}initializeMap(){this.service.getMap().pipe((0,Ke.R)(this.unsubscribe$)).subscribe({next:i=>{i&&(this.map=i,this.selectedPlaces=i.places.filter(a=>a.isReserved),this.amount=this.selectedPlaces.reduce((a,g)=>a+(g.selectedTicket.price+g.selectedTicket.fee)*g.quantity,0))}})}initializeSector(){this.service.getSelectedSector().pipe((0,Ke.R)(this.unsubscribe$)).subscribe({next:i=>{i&&(this.sector=i)}})}initializeLoading(){this.service.isLoading().pipe((0,Ke.R)(this.unsubscribe$)).subscribe({next:i=>{this.loading=i}})}initializeView(){this.service.getView().pipe((0,Ke.R)(this.unsubscribe$)).subscribe({next:i=>{this.view=i}})}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(pe.a))},r.\u0275cmp=e.Xpm({type:r,selectors:[["mapv2-places"]],decls:38,vars:8,consts:[[1,"mapv2-toolbar"],["mat-icon-button","",3,"click"],["fontSet","material-icons-outlined"],["class","toolbar-title",4,"ngIf"],[1,"toolbar-spacer"],["mat-button","","class","btn-ticket-amount",3,"disabled","click",4,"ngIf"],[1,"mapv2-places-content"],[1,"mapv2-image-container"],["id","image-zoom",3,"contextmenu"],[3,"src","load"],["class","places-container",4,"ngIf"],[1,"zoom-control"],["mat-mini-fab","",3,"click"],[1,"legend"],[1,"item"],[1,"badge","badge1"],[1,"badge","badge2"],[1,"badge","badge3"],[1,"btn-done"],["mat-fab","",3,"click"],["mode","over","position","end",3,"opened","closed"],[3,"place",4,"ngIf"],[4,"ngIf"],[3,"show"],[1,"toolbar-title"],["mat-button","",1,"btn-ticket-amount",3,"disabled","click"],[1,"places-container"],["class","area",3,"disabled","ngStyle","click",4,"ngFor","ngForOf"],[1,"area",3,"ngStyle","click"],[3,"place"]],template:function(i,a){1&i&&(e.TgZ(0,"mat-toolbar",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return a.closePlaces()}),e.TgZ(2,"mat-icon",2),e._uU(3,"arrow_back"),e.qZA(),e.qZA(),e.YNc(4,Pr,2,1,"h6",3),e._UZ(5,"span",4),e.YNc(6,Kn,5,5,"button",5),e.qZA(),e.TgZ(7,"mat-drawer-container",6),e.TgZ(8,"mat-drawer-content"),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.NdJ("contextmenu",function(f){return f.preventDefault()}),e.TgZ(11,"img",9),e.NdJ("load",function(){return a.loadImageEvents()}),e.qZA(),e.YNc(12,er,3,4,"div",10),e.qZA(),e.TgZ(13,"div",11),e.TgZ(14,"button",12),e.NdJ("click",function(){return a.zoomIn()}),e.TgZ(15,"mat-icon",2),e._uU(16,"zoom_in"),e.qZA(),e.qZA(),e.TgZ(17,"button",12),e.NdJ("click",function(){return a.zoomOut()}),e.TgZ(18,"mat-icon",2),e._uU(19,"zoom_out"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",13),e.TgZ(21,"div",14),e._UZ(22,"span",15),e._uU(23," Dispon\xedvel "),e.qZA(),e.TgZ(24,"div",14),e._UZ(25,"span",16),e._uU(26," Indispon\xedvel "),e.qZA(),e.TgZ(27,"div",14),e._UZ(28,"span",17),e._uU(29," Selecionado "),e.qZA(),e.qZA(),e.TgZ(30,"div",18),e.TgZ(31,"button",19),e.NdJ("click",function(){return a.closePlaces()}),e.TgZ(32,"mat-icon"),e._uU(33,"done"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"mat-drawer",20),e.NdJ("closed",function(){return a.closeDrawer()}),e.YNc(35,Ot,1,1,"mapv2-tickets",21),e.YNc(36,qn,1,0,"mapv2-cart",22),e.qZA(),e.qZA(),e._UZ(37,"mapv2-loader",23)),2&i&&(e.xp6(4),e.Q6J("ngIf",a.sector),e.xp6(2),e.Q6J("ngIf",a.selectedPlaces.length>0),e.xp6(5),e.Q6J("src",a.map.image,e.LSH),e.xp6(1),e.Q6J("ngIf",a.sector),e.xp6(22),e.Q6J("opened",a.isTicketsShowing||a.isCartShowing),e.xp6(1),e.Q6J("ngIf",a.isTicketsShowing&&a.selectedPlace),e.xp6(1),e.Q6J("ngIf",a.isCartShowing),e.xp6(1),e.Q6J("show",a.loading))},directives:[Re.Ye,Te.lW,$i.Hw,ee.O5,Qt.kh,Qt.LW,ee.sg,ee.PC,Qt.jA,Tr,Xn,Sr],pipes:[ee.JJ,jn],styles:[".mapv2-toolbar[_ngcontent-%COMP%]   .btn-ticket-amount[_ngcontent-%COMP%]{font-size:18px;line-height:18px;padding:8px;animation:fadeIn .5s}.mapv2-toolbar[_ngcontent-%COMP%]   .btn-ticket-amount[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;margin:-4px 5px 0 0;transform:rotate(135deg)}.mapv2-places-content[_ngcontent-%COMP%]{position:relative;height:calc(100% - 60px)}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-sidenav[_ngcontent-%COMP%]{width:300px}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:#ededed;overflow:hidden}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{animation:fadeIn .5s}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   #image-zoom[_ngcontent-%COMP%]{position:absolute;max-width:100%;max-height:100%;overflow:auto;-webkit-touch-callout:none;-webkit-user-select:none;-o-user-select:none;user-select:none}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   #image-zoom[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .zoom-control[_ngcontent-%COMP%]{position:absolute;top:25px;right:25px;display:flex;flex-direction:column;gap:10px}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .zoom-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#000}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{display:flex;gap:20px;position:absolute;bottom:25px;left:15px;border-radius:5px;padding:5px 8px;background:#FFFFFF;box-shadow:#32325d40 0 2px 5px -1px,#0000004d 0 1px 3px -1px}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;gap:5px;align-items:center;color:#000}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{width:20px;height:20px;display:block;border-radius:5px}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .badge1[_ngcontent-%COMP%]{background:lime}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .badge2[_ngcontent-%COMP%]{background:#a0a0a0}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .badge3[_ngcontent-%COMP%]{background:blue}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .btn-done[_ngcontent-%COMP%]{position:absolute;bottom:25px;right:25px}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .btn-done[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;height:60px;background-color:#198754;color:#fff}.place-cart[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;background:#FFFFFF;overflow:auto;z-index:-1}.place-cart.show[_ngcontent-%COMP%]{left:0;z-index:999;animation:slideInRight .5s ease-in-out}.place-cart.hidden[_ngcontent-%COMP%]{animation:slideInLeft .5s ease-in-out}.places-container[_ngcontent-%COMP%]{position:absolute;inset:0}.places-container[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{position:absolute;transition:all .1s}.places-container[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.places-container[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]:not(.disabled):hover{opacity:.7}@media (max-width: 430px){.mapv2-toolbar[_ngcontent-%COMP%]   .btn-ticket-amount[_ngcontent-%COMP%]{font-size:13px;line-height:13px}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{font-size:13px}.mapv2-places-content[_ngcontent-%COMP%]   .mapv2-image-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:2px}}"]}),r})();var Nt=j(8966);let ce=(()=>{class r{constructor(i,a){this.elementRef=i,this.service=a,this.unsubscribe$=new Zt.x,this.zoom=1,this.sectors=[],this.map=null}ngOnInit(){this.initializeCanvas(),this.initializeMap(),this.initializeSectors()}ngOnDestroy(){this.unsubscribe$.next(null),this.unsubscribe$.complete()}onResize(){const i=this.elementRef.nativeElement.parentElement;if(i){const a=i.offsetWidth;a>0&&(this.zoom=a/this.imgElement.width)}}openPlaces(i){this.service.setSelectedSector(i),this.service.hasPlaces(i.id)&&this.service.show()}fillPolygon(i){const a=String(i.getAttribute("coords")).split(",").map(g=>Number(g));this.context.beginPath(),this.context.moveTo(a[0],a[1]);for(let g=2;g<a.length;g+=2)this.context.lineTo(a[g],a[g+1]);this.context.lineTo(a[0],a[1]),this.context.fillStyle=this.map.color,this.context.globalAlpha=.5,this.context.fill()}drawOn(){const i=document.querySelector("#mapv2__map");i.innerHTML="",this.sectors.filter(a=>a.mapSectors.length>0).forEach(a=>{a.mapSectors.forEach(g=>{const f=document.createElement("area");f.shape="poly",f.style.cursor="pointer",f.coords=g.coords.map(({x:k,y:O})=>k+","+O).join(","),f.onmouseover=()=>{this.fillPolygon(f)},f.onmouseout=()=>{this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},f.onclick=()=>{this.openPlaces(a)},i.appendChild(f)})})}initializeCanvas(){this.canvas=document.querySelector("#mapv2__sectors__canvas"),this.imgElement=document.querySelector("#mapv2__sectors__img"),this.context=this.canvas.getContext("2d")}initializeMap(){this.service.getMap().pipe((0,Ke.R)(this.unsubscribe$)).subscribe({next:i=>{i&&(this.map=i,this.imgElement.src=this.map.imageSectors,this.imgElement.onload=()=>{this.onResize(),this.canvas.width=this.imgElement.width,this.canvas.height=this.imgElement.height,this.drawOn()})}})}initializeSectors(){this.service.getSectors().pipe((0,Ke.R)(this.unsubscribe$)).subscribe({next:i=>{this.sectors=i,this.drawOn()}})}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(e.SBq),e.Y36(pe.a))},r.\u0275cmp=e.Xpm({type:r,selectors:[["mapv2-sectors"]],hostBindings:function(i,a){1&i&&e.NdJ("resize",function(){return a.onResize()},!1,e.Jf7)},decls:4,vars:2,consts:[[1,"mapv2-sectors-container",3,"resize"],["id","mapv2__sectors__canvas"],["id","mapv2__sectors__img","usemap","#mapv2__sectors__map"],["name","mapv2__sectors__map","id","mapv2__map"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0),e.NdJ("resize",function(){return a.onResize()},!1,e.Jf7),e._UZ(1,"canvas",1),e._UZ(2,"img",2),e._UZ(3,"map",3),e.qZA()),2&i&&e.Udp("zoom",a.zoom)},styles:[".mapv2-sectors-container[_ngcontent-%COMP%]{position:relative;animation:fadeIn .5s ease-in-out}.mapv2-sectors-container[_ngcontent-%COMP%]   #mapv2__sectors__canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;pointer-events:none;z-index:1}"]}),r})();function fi(r,d){1&r&&e._UZ(0,"mapv2-sectors")}let Ei=(()=>{class r{constructor(i,a){this.service=i,this.dialog=a,this.unsubscribe$=new Zt.x,this.change=new e.vpe,this.map=null}ngOnInit(){this.service.loadSectors(this.eventId),this.service.loadMap(this.eventId).then(i=>{this.map=i,this.service.isShowing().pipe((0,Ke.R)(this.unsubscribe$)).subscribe({next:a=>{a?this.dialog.open(tr,{disableClose:!0,autoFocus:!1,panelClass:"mapv2-dialog",maxWidth:"100vw"}):this.dialog.closeAll()}}),this.service.listenReserves().pipe((0,Ke.R)(this.unsubscribe$)).subscribe({next:a=>{a&&this.change.emit(a)}})})}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.next()}ngOnChanges(){this.sectorId&&this.service.setSelectedSectorById(this.sectorId)}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(pe.a),e.Y36(Nt.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["mapv2"]],inputs:{eventId:"eventId",sectorId:"sectorId"},outputs:{change:"change"},features:[e.TTD],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(i,a){1&i&&e.YNc(0,fi,1,0,"mapv2-sectors",0),2&i&&e.Q6J("ngIf",a.map&&a.map.imageSectors)},directives:[ee.O5,ce],styles:['@import"https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined";.cdk-overlay-container{z-index:999999}.cdk-overlay-pane.mapv2-dialog{width:100vw;height:100vh}.cdk-overlay-pane.mapv2-dialog .mat-dialog-container{padding:0;border-radius:0}.mat-toolbar.mapv2-toolbar{position:relative;background-color:#fff;color:#000;height:60px;z-index:99}.mat-toolbar.mapv2-toolbar .toolbar-title{font-size:18px;font-weight:400;margin:0 0 0 10px}.mat-toolbar.mapv2-toolbar .toolbar-spacer{flex:1 1 auto}button{text-transform:uppercase;outline:none!important}button.mat-icon-button{display:flex;justify-content:center;align-items:center}mapv2{display:block}@media (max-width: 430px){.mat-toolbar.mapv2-toolbar .toolbar-title{font-size:16px}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}\n'],encapsulation:2}),r})();const Vt=["chart"];let ut=(()=>{class r{constructor(i,a){this.alertService=i,this.orderService=a,this.selectedSeats=new e.vpe,this.deselectedSeats=new e.vpe,this.sendLoadingSeatsIo=new e.vpe,this.prices=[]}ngOnInit(){this.config={divId:"chart",region:"sa",workspaceKey:gn.N.seatsioWorkspaceKey,event:this.event.seatsioEventKey,language:"pt",session:"continue",pricing:this.prices,priceFormatter:i=>"R$ "+i.toLocaleString("pt-br",{minimumFractionDigits:2}),onChartRenderingFailed:i=>{i.destroy(),this.sendLoading(!1),this.alertService.toast({icon:"error",title:"Erro",text:"Erro ao criar mapa de assentos. Para tentar novamente recarregue a p\xe1gina."})},onRenderStarted:()=>{this.sendLoading(!0)},onHoldTokenExpired:()=>{},onChartRendered:i=>{this.sendLoading(!1)},onObjectSelected:i=>{i.pricing.ticketTypes.forEach(a=>{a.ticketType==i.selectedTicketType&&this.getSelectedObjects(i)})},onObjectDeselected:i=>{this.getDeselectedObjects(i)}},this.renderChart()}renderChart(){void 0!==this.event&&this.event.sectors.forEach(i=>{if(1==i.useSeats){let a={category:i.id,ticketTypes:[]};this.event.tickets.forEach(g=>{i.id==g.sectorId&&(a.ticketTypes[a.ticketTypes.length]={ticketType:g.id,price:g.price,label:g.name})}),this.prices[this.prices.length]=a}})}getSelectedObjects(i){this.event.tickets.forEach(a=>{a.id==i.selectedTicketType&&this.selectedSeats.emit({ticket:a,selectedSeat:i})})}sendLoading(i){this.sendLoadingSeatsIo.emit(i)}getDeselectedObjects(i){this.deselectedSeats.emit(i)}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(I.c),e.Y36(w.p))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-seatsio"]],viewQuery:function(i,a){if(1&i&&e.Gf(Vt,7),2&i){let g;e.iGM(g=e.CRH())&&(a.chart=g.first)}},inputs:{event:"event"},outputs:{selectedSeats:"selectedSeats",deselectedSeats:"deselectedSeats",sendLoadingSeatsIo:"sendLoadingSeatsIo"},decls:2,vars:1,consts:[["divId","chart",3,"config"],["chart",""]],template:function(i,a){1&i&&e._UZ(0,"si-seatsio-seating-chart",0,1),2&i&&e.Q6J("config",a.config)},directives:[Zn],styles:[""]}),r})();var nt=j(2281),Ar=j(9e3),kr=j(8111),_n=j(4974);const Dn=["selectTicketPlace"];function Rn(r,d){if(1&r&&(e.TgZ(0,"section",24),e.TgZ(1,"p"),e._uU(2,"Capacidade de pessoas no lugar: "),e.TgZ(3,"b"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"p"),e._uU(6,"Total: "),e.TgZ(7,"b"),e._uU(8),e.ALo(9,"number"),e.qZA(),e.qZA(),e.qZA()),2&r){const i=e.oxw(2);e.xp6(4),e.Oqu(i.selectedPlace.attrs.configs.qtdPerson),e.xp6(4),e.hij("R$ ",e.xi3(9,2,i.priceTotalPlace(),"1.2-2"),"")}}function Fn(r,d){if(1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p"),e.TgZ(2,"b"),e._uU(3,"Mesa com 4 cadeiras (Podendo adicionar at\xe9 2 cadeiras extras)"),e.qZA(),e.qZA(),e.TgZ(4,"p"),e.TgZ(5,"b"),e._uU(6,"Dispon\xedvel"),e.qZA(),e._uU(7),e.qZA(),e.TgZ(8,"p"),e.TgZ(9,"b"),e._uU(10,"Total"),e.qZA(),e._uU(11),e.ALo(12,"number"),e.qZA(),e.qZA()),2&r){const i=e.oxw(3);e.xp6(7),e.hij(": ",i.selectedPlace.attrs.configs.qtdDisponible,""),e.xp6(4),e.hij(": R$ ",e.xi3(12,2,i.priceTotalPlace(),"1.2-2"),"")}}function Ir(r,d){if(1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p"),e.TgZ(2,"b"),e._uU(3,"Capacidade de pessoas no lugar "),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"p"),e.TgZ(6,"b"),e._uU(7,"Dispon\xedvel"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"p"),e.TgZ(10,"b"),e._uU(11,"Total"),e.qZA(),e._uU(12),e.ALo(13,"number"),e.qZA(),e.qZA()),2&r){const i=e.oxw(3);e.xp6(4),e.hij(": ",i.selectedPlace.attrs.configs.qtdPerson,""),e.xp6(4),e.hij(": ",i.selectedPlace.attrs.configs.qtdDisponible,""),e.xp6(4),e.hij(": R$ ",e.xi3(13,3,i.priceTotalPlace(),"1.2-2"),"")}}function Un(r,d){if(1&r&&(e.TgZ(0,"section",24),e.YNc(1,Fn,13,5,"div",25),e.YNc(2,Ir,14,6,"div",25),e.qZA()),2&r){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.isEspecialEvent),e.xp6(1),e.Q6J("ngIf",!i.isEspecialEvent)}}function vi(r,d){if(1&r&&(e.TgZ(0,"p"),e._uU(1),e._UZ(2,"br"),e._uU(3),e.ALo(4,"number"),e.qZA()),2&r){const i=d.item;e.xp6(1),e.Oqu(i.ticketName),e.xp6(2),e.AsE(" ",i.lotName," - R$ ",e.xi3(4,3,i.unitPrice,"1.2-2"),"")}}function Ki(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",32),e.NdJ("click",function(){e.CHM(i);const g=e.oxw().index;return e.oxw(2).removeTicket(g)}),e._UZ(1,"br"),e.TgZ(2,"a",33),e._uU(3,"x"),e.qZA(),e.qZA()}}function xi(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"div",26),e.TgZ(3,"label"),e._uU(4),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"ng-select",27,28),e.NdJ("change",function(g){return e.CHM(i),e.oxw(2).getTicketChange(g)}),e.YNc(8,vi,5,6,"ng-template",29),e.qZA(),e.TgZ(9,"small",30),e._uU(10,"Selecione o ingresso"),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,Ki,4,0,"div",31),e.qZA()}if(2&r){const i=d.$implicit,a=d.index,g=e.oxw(2);let f;e.xp6(4),e.hij("Pessoa ",a+1,""),e.xp6(2),e.Q6J("items",g.permittedTicketsFromPlace)("searchable",!0)("formControl",i.get("dateTicketId")),e.xp6(3),e.ekj("hide",!g.ticketSelectFormShowError||(null==(f=i.get("dateTicketId"))?null:f.value)),e.xp6(2),e.Q6J("ngIf","shared"==g.selectedPlace.attrs.configs.type)}}function ir(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).newTicket()}),e._uU(1,"Adicionar cadeira extra"),e.qZA()}}function yi(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).cancelPlace()}),e._uU(1,"Cancelar"),e.qZA()}}function yt(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"form",9),e.NdJ("ngSubmit",function(){return e.CHM(i),e.oxw().submitSelectedTickets()}),e.TgZ(1,"div",10),e.TgZ(2,"h4",11),e._uU(3),e.qZA(),e.TgZ(4,"button",12),e.NdJ("click",function(){e.CHM(i);const g=e.oxw();return null==g.modalRef?null:g.modalRef.hide()}),e.TgZ(5,"span",13),e._uU(6,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",14),e.YNc(8,Rn,10,5,"section",15),e.YNc(9,Un,3,2,"section",15),e.TgZ(10,"section"),e.YNc(11,xi,12,7,"div",16),e.qZA(),e.TgZ(12,"div",17),e.TgZ(13,"div",18),e.YNc(14,ir,2,0,"button",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",20),e.YNc(16,yi,2,0,"button",21),e.TgZ(17,"button",22),e._UZ(18,"app-spinner",23),e._uU(19," Confirmar "),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=e.oxw();e.xp6(3),e.Oqu(i.selectedPlace.attrs.name),e.xp6(5),e.Q6J("ngIf","single"==i.selectedPlace.attrs.configs.type),e.xp6(1),e.Q6J("ngIf","shared"==i.selectedPlace.attrs.configs.type),e.xp6(1),e.ekj("d-none",!i.modalShowSelectTickets),e.xp6(1),e.Q6J("ngForOf",i.ticketSelectForm.controls),e.xp6(3),e.Q6J("ngIf",i.selectedPlace.attrs.configs.qtdDisponible>i.ticketSelectForm.value.length),e.xp6(2),e.Q6J("ngIf",i.onEditPlace),e.xp6(2),e.ekj("hide",!i.loadingConfirmPlace)}}let Wt=(()=>{class r{constructor(i,a,g,f,k,O,U,G){this.cdr=i,this.platform=a,this.fb=g,this.alertService=f,this.eventService=k,this.generalHelper=O,this.modalService=U,this.orderService=G,this.ticketCupom="",this.sendSelectedSeat=new e.vpe,this.ticketSelectForm=this.fb.array([]),this.permittedTicketsFromPlace=[],this.scale=1,this.zIndexLayerCount=0,this.ticketSelectFormShowError=!1,this.onEditPlace=!1,this.loadingMap=!1,this.blockClickPlace=!1,this.loadingConfirmPlace=!1,this.margin=30,this.marginW=0,this.marginH=0,this.iniX=0,this.iniY=0,this.modalShowSelectTickets=!0,this.isEspecialEvent=!1}ngOnInit(){this.loadMapPlace();var i=document.getElementById("canvas");i.addEventListener("touchmove",function(a){a.preventDefault()}),i.addEventListener("touchstart",function(a){a.preventDefault()}),i.addEventListener("touchend",function(a){a.preventDefault()}),i.addEventListener("touchcancel",function(a){a.preventDefault()}),window.addEventListener("resize",()=>{let a=this.getWidthMap();this.stage&&a&&(this.stage.setWidth(a),this.stage.batchDraw())})}ngOnChanges(i){this.sectorId=i.sectorId.currentValue,this.loadMapPlace()}getWidthMap(){let i=document.getElementById("box-map-place");return i&&i.clientWidth?i.clientWidth:null}getHeightMap(){let i=document.getElementById("box-map-place");return i&&i.clientHeight?i.clientHeight:0}getHeightZoomBar(){return this.getHeightMap()-80}loadMapPlace(){nt.pixelRatio=1,nt.hitOnDragEnabled=!0,nt.captureTouchEventsEnabled=!0,this.loadingMap=!0,this.stage&&this.stage.destroy(),this.eventService.getMap({sectorId:this.sectorId,orderMapReserveCode:this.uniqueIdGenerate()}).subscribe(i=>{let f,k,O,U,a=Kt=>Kt||0,g=i[0],Q=!1;window.screen.width<=1e3&&(Q=!0);let Ue,Xe,Le,oe=JSON.parse(g.canvas).attrs;oe.container="canvas",oe.idDB=g.id,oe.width=100,oe.height=Q?350:700,this.stage=new nt.Stage(oe),this.scale=this.stage.scaleX(),new Ar(this.stage,{domEvents:!0}).get("rotate").set({enable:!0});for(let Kt=0;Kt<g.layers.length;Kt++){let ei=g.layers[Kt],ti=JSON.parse(ei.canvas);ti.attrs.draggable=!1,ti.attrs.idDB=ei.id;let ke,Jn=ti.attrs;if(delete Jn.configs,"background"==Jn.type){ke=new nt.FastLayer(Jn),ke.transformsEnabled("position");for(let bi=0;bi<ti.children.length;bi++)if("background-image"==ti.children[bi].attrs.type){let Dt=ti.children[bi].attrs,Rt=new Image,Zi=this.generalHelper.getFileTypeFromBase64(Dt.imageBase64);Rt.src="data:"+Zi+";base64,"+Dt.imageBase64,delete Dt.imageBase64,Rt.onload=()=>{Dt.image=Rt,Dt.width=Rt.width,Dt.height=Rt.height;var we=new nt.Image(Dt);we.transformsEnabled("position"),ke.add(we),ke.draw();let bn=a(ke.attrs.x),ve=a(ke.attrs.x)+a(Rt.width),rn=a(ke.attrs.y),an=a(ke.attrs.y)+a(Rt.height);f=!f||f>bn?bn:f,k=!k||k<ve?ve:k,O=!O||O>rn?rn:O,U=!U||U<an?an:U}}}else{ke=new nt.Layer(Jn),ke.transformsEnabled("position");for(let bi=0;bi<ei.places.length;bi++){let Dt=ei.places[bi],Rt=JSON.parse(ei.places[bi].canvas),Zi=Rt.attrs;Zi.idDB=Dt.id,Zi.configs.qtdPerson=Dt.qtdPerson,Zi.configs.qtdDisponible=Dt.qtdDisponible;let we=new nt.Group(Zi);we.transformsEnabled("position"),Zi.configs.qtdDisponible>0?this.onClickPlace(we,Zi.id):we.listening(!1);for(let bn=0;bn<Rt.children.length;bn++){let rn,an,fr,vr,ve=Rt.children[bn];if("Circle"==ve.className||"Rect"==ve.className){let Ft=ve.attrs;if(0==we.attrs.configs.qtdDisponible&&(Ft.fill="rgba(204,204,204,1)"),this.orderService.getAllTickets().filter(Ie=>Ie.placeId==we.attrs.idDB).length>0&&(Ft.fill="rgba(247, 220, 43, 1)"),"Circle"==ve.className)if(rn=a(ke.attrs.x)+a(we.attrs.x)+a(ve.attrs.x)-a(ve.attrs.radius),an=a(ke.attrs.x)+a(we.attrs.x)+a(ve.attrs.x)+a(ve.attrs.radius),fr=a(ke.attrs.y)+a(we.attrs.y)+a(ve.attrs.y)-a(ve.attrs.radius),vr=a(ke.attrs.y)+a(we.attrs.y)+a(ve.attrs.y)+a(ve.attrs.radius),Xe&&Xe.attrs.fill==Ft.fill){let Ie=Xe.clone({x:Ft.x,y:Ft.y});Ie.cache(),we.add(Ie)}else{let Ie=new nt.Circle(Ft);Ie.transformsEnabled("position"),Ie.hitStrokeWidth(0),Ie.perfectDrawEnabled(!1),we.add(Ie),Ie.cache(),Xe=Ie.clone()}if("Rect"==ve.className)if(rn=a(ke.attrs.x)+a(we.attrs.x)+a(ve.attrs.x),an=a(ke.attrs.x)+a(we.attrs.x)+a(ve.attrs.x)+a(ve.attrs.width),fr=a(ke.attrs.y)+a(we.attrs.y)+a(ve.attrs.y),vr=a(ke.attrs.y)+a(we.attrs.y)+a(ve.attrs.y)+a(ve.attrs.height),Le&&Le.attrs.fill==Ft.fill){let Ie=Le.clone(Ft);Ie.cache(),we.add(Ie)}else{let Ie=new nt.Rect(Ft);Ie.transformsEnabled("position"),Ie.hitStrokeWidth(0),Ie.perfectDrawEnabled(!1),we.add(Ie),Ie.cache(),Le=Ie.clone()}let xr=0,yr=0,br=0,Cr=0;xr=!xr||xr>rn?rn:xr,yr=!yr||yr<an?an:yr,br=!br||br>fr?fr:br,Cr=!Cr||Cr<vr?vr:Cr}"Text"==ve.className&&(Ue=new nt.Text(ve.attrs),Ue.transformsEnabled("position"),Ue.hitStrokeWidth(0),Ue.perfectDrawEnabled(!1),we.add(Ue))}ke.add(we)}}this.stage.add(ke),this.stage.container().style.cursor="pointer",ke.zIndex(this.zIndexLayerCount),this.zIndexLayerCount+=1}this.loadingMap=!1,this.initZoom(),this.initPosition(),this.loadingMap=!1,setTimeout(()=>{let Kt=this.getWidthMap();this.getHeightMap(),this.stage.setWidth(Kt),this.stage.batchDraw()},100)})}getRelativePosition(i,a){return this.stage?{x:i/this.scale-this.stage.x()/this.scale,y:a/this.scale-this.stage.y()/this.scale}:null}initZoom(){let a=f=>{f.evt.preventDefault();var k=this.stage.scaleX(),O_x=this.getPointerPosition().x,O_y=this.getPointerPosition().y,U=f.evt.deltaY>0?1.21*k:k/1.21;this.stage.scale({x:U,y:U}),this.scale=U;var G={x:-(O_x-this.stage.getPointerPosition().x/U)*U,y:-(O_y-this.stage.getPointerPosition().y/U)*U};this.stage.position(G),this.stage.batchDraw()},g=f=>{f.evt.preventDefault(),this.stage.scaleX();var O_x=this.getPointerPosition().x,O_y=this.getPointerPosition().y,U=f.evt.gesture.scale;this.stage.scale({x:U,y:U}),this.scale=U;var G={x:-(O_x-this.stage.getPointerPosition().x/U)*U,y:-(O_y-this.stage.getPointerPosition().y/U)*U};this.stage.position(G),this.stage.batchDraw()};this.stage.on("wheel",f=>{a(f)}),this.stage.on("rotatestart",f=>{this.blockClickPlace=!0}),this.stage.on("rotate",f=>{g(f),f.preventDefault()}),this.stage.on("rotateend",f=>{this.blockClickPlace=!1})}getPointerPosition(){return{x:this.stage.getPointerPosition().x/this.scale-this.stage.x()/this.scale,y:this.stage.getPointerPosition().y/this.scale-this.stage.y()/this.scale}}initPosition(){let i=!1,a={},g=()=>{i=!0,a={x:this.getPointerPosition().x,y:this.getPointerPosition().y}},f=()=>{i=!1},k=()=>{if(i){let O={x:-(a.x-this.stage.getPointerPosition().x/this.scale)*this.scale,y:-(a.y-this.stage.getPointerPosition().y/this.scale)*this.scale};this.stage.position(O),this.stage.batchDraw()}};this.stage.on("mousedown",O=>{this.blockClickPlace=!1,g()}),this.stage.on("touchstart",O=>{this.blockClickPlace=!1,g(),O.preventDefault()}),this.stage.on("mouseup",O=>{f()}),this.stage.on("touchend",O=>{f(),O.preventDefault()}),this.stage.on("mousemove",O=>{this.blockClickPlace=!0,k()}),this.stage.on("touchmove",O=>{this.blockClickPlace=!1,k(),O.preventDefault()}),this.stage.on("touchcancel",O=>{O.preventDefault()})}onClickPlace(i,a){let g=()=>{this.sendSelectedSeat.emit(i),this.blockClickPlace||(this.selectedPlace=i,this.onEditPlace=this.orderService.getAllTickets().filter(f=>f.placeId==this.selectedPlace.attrs.idDB).length>0,this.loadModal())};i.on("click",f=>{g()}),i.on("touchend",f=>{g()})}loadModal(){this.modalRef=this.modalService.show(this.selectTicketModal),this.ticketSelectFormShowError=!1,this.modalShowSelectTickets=!0,this.ticketSelectForm=this.fb.array([]),this.permittedTicketsFromPlace=[],this.event.tickets.forEach((a,g)=>{a.sectorId==this.sectorId&&-1!=this.selectedPlace.attrs.configs.tickets.indexOf(a.ticketDateId)&&this.permittedTicketsFromPlace.push({ticketId:a.id,ticketName:a.name,fees:a.fees,ticketDateId:a.ticketDateId,lotId:a.lotId,placeName:this.selectedPlace.attrs.name,ticketTags:this.ticketCupom,isMapPlace:!0,placeId:this.selectedPlace.attrs.idDB,orderMapReserveCode:"",position:a.position,sectorId:a.sectorId,unitPriceWithFee:a.price+a.fee,unitPrice:a.price,fee:a.fee})});let i=1==this.permittedTicketsFromPlace.length?this.permittedTicketsFromPlace[0].ticketDateId:null;if("single"==this.selectedPlace.attrs.configs.type){for(let a=0;a<this.selectedPlace.attrs.configs.quantity;a++)this.ticketSelectForm.push(this.fb.group({dateTicketId:[i,H.kI.required]}));this.onEditPlace&&this.orderService.getAllTickets().filter(g=>g.placeId==this.selectedPlace.attrs.idDB).forEach((g,f,k)=>{var O;null===(O=this.ticketSelectForm.at(f).get("dateTicketId"))||void 0===O||O.setValue(g.ticketDateId)}),1==this.permittedTicketsFromPlace.length&&(this.modalShowSelectTickets=!1)}else"shared"==this.selectedPlace.attrs.configs.type?this.onEditPlace?this.orderService.getAllTickets().filter(g=>g.placeId==this.selectedPlace.attrs.idDB).forEach((g,f,k)=>{this.ticketSelectForm.push(this.fb.group({dateTicketId:[g.ticketDateId,H.kI.required]}))}):this.ticketSelectForm.push(this.fb.group({dateTicketId:[i,H.kI.required]})):this.alertService.toast({icon:"error",title:"Erro",text:"Tipo do lugar n\xe3o identificado"})}getTicketChange(i){}submitSelectedTickets(){if(this.ticketSelectForm.valid)if(0==this.ticketSelectForm.value.length)this.alertService.toast({icon:"error",title:"Erro",text:"Adicione pelo menos 1 pessoa"});else if(this.isEspecialEvent&&this.ticketSelectForm.value.length<4)this.alertService.toast({icon:"error",title:"Erro",text:"Adicione pelo menos 4 pessoas"});else{let i={code:this.uniqueIdGenerate(),places:[{placeId:this.selectedPlace.attrs.idDB,qtdPerson:this.ticketSelectForm.value.length}]};this.loadingConfirmPlace=!0,this.orderService.newMapReserve(i).subscribe(a=>{var g;this.loadingConfirmPlace=!1;let f=this.selectedPlace.children.filter(k=>"placebox"==k.attrs.type)[0];f.fill("rgba(247, 220, 43, 1)"),f.clearCache(),this.stage.batchDraw(),null===(g=this.modalRef)||void 0===g||g.hide();for(let k=0;k<this.ticketSelectForm.value.length;k++){let O=this.ticketSelectForm.value[k],U=this.permittedTicketsFromPlace.filter(Q=>Q.ticketDateId==O.dateTicketId)[0],G={fee:U.fee,fees:U.fees,id:U.ticketId,orderMapReserveCode:null!=i.code?i.code:void 0,ticketDateId:U.ticketDateId,name:U.ticketName,price:U.unitPrice,qty:1,isMapPlace:U.isMapPlace,placeName:U.placeName,position:U.position,lotId:U.lotId,sectorId:U.sectorId,placeId:this.selectedPlace.attrs.idDB,unitPrice:U.unitPrice.toString(),unitPriceWithFee:U.unitPriceWithFee.toString()};this.orderService.addTicket(G)}})}else this.ticketSelectFormShowError=!0}newTicket(){let i=this.selectedPlace.attrs.configs.qtdDisponible;i>this.ticketSelectForm.value.length?this.ticketSelectForm.push(this.fb.group({dateTicketId:[null,H.kI.required]})):this.alertService.toast({icon:"error",title:"Limite de ingressos atingido",text:"Voc\xea s\xf3 pode selecionar "+i+" ingressos para este lugar."})}removeTicket(i){this.ticketSelectForm.removeAt(i)}cancelPlace(){var i;this.orderService.removeTicketByPlaceId(this.selectedPlace.attrs.idDB);let a=this.selectedPlace.children.filter(g=>"placebox"==g.attrs.type)[0];a.fill(a.attrs.fillDefined),a.clearCache(),this.stage.batchDraw(),null===(i=this.modalRef)||void 0===i||i.hide()}changeZoomSlider(){this.stage.scale({x:this.scale,y:this.scale}),this.stage.position({x:-this.iniX*this.scale+this.marginW/2,y:-this.iniY*this.scale+this.marginH/2}),this.stage.batchDraw()}zoomIn(){this.scale+=.1,this.stage.scale({x:this.scale,y:this.scale}),this.stage.position({x:-this.iniX*this.scale+this.marginW/2,y:-this.iniY*this.scale+this.marginH/2}),this.stage.batchDraw()}zoomOut(){this.scale-=.1,this.stage.scale({x:this.scale,y:this.scale}),this.stage.position({x:-this.iniX*this.scale+this.marginW/2,y:-this.iniY*this.scale+this.marginH/2}),this.stage.batchDraw()}instructionsStatus(){return localStorage.getItem("instructions_understand")}okUnderstand(){localStorage.setItem("instructions_understand","1")}uniqueIdGenerate(){return localStorage.getItem("map_session_reserve")||localStorage.setItem("map_session_reserve",this.generalHelper.guid()),localStorage.getItem("map_session_reserve")}priceTotalPlace(){let i=0;for(let a=0;a<this.ticketSelectForm.controls.length;a++){let g=this.permittedTicketsFromPlace.find(f=>{var k;return(null==f?void 0:f.ticketDateId)==(null===(k=this.ticketSelectForm.at(a).get("dateTicketId"))||void 0===k?void 0:k.value)});g&&(i+=g.unitPrice+g.fee)}return i}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(e.sBO),e.Y36(je.t4),e.Y36(H.qu),e.Y36(I.c),e.Y36(x.P),e.Y36(kr.k),e.Y36(L.tT),e.Y36(w.p))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-map-place"]],viewQuery:function(i,a){if(1&i&&e.Gf(Dn,5),2&i){let g;e.iGM(g=e.CRH())&&(a.selectTicketModal=g.first)}},inputs:{event:"event",ticketCupom:"ticketCupom",sectorId:"sectorId"},outputs:{sendSelectedSeat:"sendSelectedSeat"},features:[e.TTD],decls:10,vars:10,consts:[[1,"text-center","d-flex","justify-content-center"],["type","grow","spinnerWidth","211"],[1,"d-flex","bd-highlight"],[1,"p-2","flex-grow-1","bd-highlight"],["id","box-map-place",1,"d-block",2,"width","100%","height","auto","overflow","hidden","z-index","999999"],["id","canvas",2,"overflow","hidden","border","solid 2px #EEEEEE","background","#ffffff"],[1,"d-block","text-center"],["vertical","",2,"width","100%",3,"step","min","max","ngModel","change","ngModelChange"],["selectTicketPlace",""],["id","modalForm",3,"ngSubmit"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],["class","modal-place-top",4,"ngIf"],["class","d-flex bd-highlight",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-12","text-right","mt-4",2,"text-align","right"],["type","button","class","btn btn-success btn-grad",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["form","modalForm","type","submit",1,"btn","btn-success","btn-grad"],["type","grow","spinnerWidth","21"],[1,"modal-place-top"],[4,"ngIf"],[1,"form-group"],["placeholder","Selecione o ingresso","bindLabel","ticketName","bindValue","ticketDateId",3,"items","searchable","formControl","change"],["dateTicketId",""],["ng-option-tmp",""],[2,"color","red"],["class","p-2 bd-highlight",3,"click",4,"ngIf"],[1,"p-2","bd-highlight",3,"click"],[1,"btn","btn-info","btn-rounded","btn-remove","mt-2"],["type","button",1,"btn","btn-success","btn-grad",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"app-spinner",1),e.qZA(),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"mat-slider",7),e.NdJ("change",function(){return a.changeZoomSlider()})("ngModelChange",function(f){return a.scale=f}),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,yt,20,10,"ng-template",null,8,e.W1O)),2&i&&(e.ekj("hide",!a.loadingMap),e.xp6(2),e.ekj("hide",a.loadingMap),e.xp6(5),e.Udp("height",a.getHeightZoomBar()+"px"),e.Q6J("step","0.1")("min","0.1")("max","5")("ngModel",a.scale))},directives:[_n.O,Me,H.JJ,H.On,H._Y,H.JL,H.F,ee.O5,ee.sg,Yt.w9,H.oH,Yt.ir],pipes:[ee.JJ],styles:["a.btn-remove[_ngcontent-%COMP%]{font-size:17px;font-weight:700;color:#fff}.zoom-map[_ngcontent-%COMP%]{font-size:15px;color:#ccc}.zoom-map-in[_ngcontent-%COMP%]{color:#333}.fnd_lightbox[_ngcontent-%COMP%]{display:block;position:fixed;z-index:999;width:100%;height:100%;text-align:center;top:0;left:0;background:rgba(0,0,0,.9)}.box-instructions[_ngcontent-%COMP%]{margin-top:150px}.box-instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:17px}.hide[_ngcontent-%COMP%]{display:none!important}  .modal-lg, .modal-xl[_ngcontent-%COMP%]{max-width:100%!important}  .modal-dialog{max-width:700px!important}"]}),r})(),nr=(()=>{class r{constructor(){this.value=0,this.min=0,this.max=99,this.target=null,this.allowAdd=!0,this.allowRemove=!0,this.change=new e.vpe}ngOnInit(){}add(){this.allowAdd&&(null===this.max||this.value<this.max)&&this.value++,this.change.emit({target:this.target,qty:this.value,action:"add"})}remove(){this.allowRemove&&null!==this.min&&this.value>this.min&&this.value--,this.change.emit({target:this.target,qty:this.value,action:"remove"})}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-qty"]],inputs:{value:"value",min:"min",max:"max",target:"target",allowAdd:"allowAdd",allowRemove:"allowRemove"},outputs:{change:"change"},decls:6,vars:1,consts:[[1,"qty"],["type","button",1,"btn","qtyBtn",3,"click"],["type","number","min","0","max","99","readonly","",1,"qtyObj",3,"ngModel","ngModelChange"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return a.remove()}),e._uU(2,"-"),e.qZA(),e.TgZ(3,"input",2),e.NdJ("ngModelChange",function(f){return a.value=f}),e.qZA(),e.TgZ(4,"button",1),e.NdJ("click",function(){return a.add()}),e._uU(5,"+"),e.qZA(),e.qZA()),2&i&&(e.xp6(3),e.Q6J("ngModel",a.value))},directives:[H.qQ,H.Fd,H.wV,H.Fj,H.JJ,H.On],styles:[".qty[_ngcontent-%COMP%]{background:var(--background-linear-gradient);border-radius:50px;width:110px;display:block}.qty[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;border:none;text-align:center}.qty[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:35px;color:#fff;font-weight:700;text-align:center;padding:5px 0;font-size:24px;line-height:20px;box-shadow:none}.qtyObj[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.qtyObj[_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),r})(),Mi=(()=>{class r{emptyItemRemove(i,a=[],g=!0,f=!0){let k=Object.assign(i,{});if(Array.isArray(i))for(let Q=0;Q<i.length;Q++)this.emptyItemRemove(i[Q]);else for(var U in k){var G=k[U];if(Array.isArray(G))for(let Q=0;Q<G.length;Q++)this.emptyItemRemove(G[Q]);else(""===G&&!0===g||null===G&&!0===f)&&-1==a.indexOf(U)&&delete k[U]}return k}emptyItemReplace(i,a,g){let f=Object.assign(i,{});if(Array.isArray(i))for(let G=0;G<i.length;G++)this.emptyItemReplace(i[G],a,g);else for(var O in f){var U=f[O];if(Array.isArray(U))for(let G=0;G<U.length;G++)this.emptyItemReplace(U[G],a,g);else U===a&&(f[O]=g)}return f}serializeDate(i){return i.map(g=>new Date(g.dateStartEvent).toLocaleString("pt-BR",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})).join("/")}serializeDate2(i){return i.map(g=>g.dateStartEvent)}dateTimeBR(i){return new Date(i).toLocaleString()}toCurrency(i){return null==i?"0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var en=j(5003);const tn=["cpfCustomer"];function Er(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira um cpf"),e.qZA(),e.qZA())}function Mr(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Cpf tem que ser v\xe1lido"),e.qZA(),e.qZA())}function rr(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,Er,3,0,"div",9),e.YNc(2,Mr,3,0,"div",9),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==i.controls.cpf||null==i.controls.cpf.errors?null:i.controls.cpf.errors.required)),e.xp6(1),e.Q6J("ngIf",1==(null==i.controls.cpf||null==i.controls.cpf.errors?null:i.controls.cpf.errors.invalidCpf))}}function ar(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira um nome"),e.qZA(),e.qZA())}function Zr(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira o nome completo"),e.qZA(),e.qZA())}function Or(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira o nome completo"),e.qZA(),e.qZA())}function Nr(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,ar,3,0,"div",9),e.YNc(2,Zr,3,0,"div",9),e.YNc(3,Or,3,0,"div",9),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==i.controls.name||null==i.controls.name.errors?null:i.controls.name.errors.required)),e.xp6(1),e.Q6J("ngIf",1==(null==i.controls.name||null==i.controls.name.errors?null:i.controls.name.errors.notFull)),e.xp6(1),e.Q6J("ngIf",1==(null==i.controls.name||null==i.controls.name.errors?null:i.controls.name.errors.minlength))}}function qr(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira um email"),e.qZA(),e.qZA())}function or(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira um email v\xe1lido"),e.qZA(),e.qZA())}function sr(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,qr,3,0,"div",9),e.YNc(2,or,3,0,"div",9),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==i.controls.email||null==i.controls.email.errors?null:i.controls.email.errors.required)),e.xp6(1),e.Q6J("ngIf",1==(null==i.controls.email||null==i.controls.email.errors?null:i.controls.email.errors.invalid))}}function Dr(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira um n\xfamero de celular v\xe1lido"),e.qZA(),e.qZA())}function mn(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,Dr,3,0,"div",9),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==i.controls.phone||null==i.controls.phone.errors?null:i.controls.phone.errors.required))}}function Rr(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira o modelo"),e.qZA(),e.qZA())}function Fr(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,Rr,3,0,"div",9),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==i.get("additionalInformation").controls.model||null==i.get("additionalInformation").controls.model.errors?null:i.get("additionalInformation").controls.model.errors.required))}}function Ur(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira a vers\xe3o"),e.qZA(),e.qZA())}function lr(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,Ur,3,0,"div",9),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==i.get("additionalInformation").controls.version||null==i.get("additionalInformation").controls.version.errors?null:i.get("additionalInformation").controls.version.errors.required))}}function Ln(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira o ano/modelo"),e.qZA(),e.qZA())}function cr(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,Ln,3,0,"div",9),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==i.get("additionalInformation").controls.yearModel||null==i.get("additionalInformation").controls.yearModel.errors?null:i.get("additionalInformation").controls.yearModel.errors.required))}}function Lr(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Insira a placa"),e.qZA(),e.qZA())}function Gr(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,Lr,3,0,"div",9),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==i.get("additionalInformation").controls.plate||null==i.get("additionalInformation").controls.plate.errors?null:i.get("additionalInformation").controls.plate.errors.required))}}function fn(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",26),e._uU(2,"Escolha o tamanho da camisa"),e.qZA(),e.qZA())}function Gn(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,fn,3,0,"div",9),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==i.get("additionalInformation").controls.sizeShirt||null==i.get("additionalInformation").controls.sizeShirt.errors?null:i.get("additionalInformation").controls.sizeShirt.errors.required))}}function zr(r,d){1&r&&(e.TgZ(0,"button",27),e._uU(1,"Finalizar compra"),e.qZA())}function Br(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return e.CHM(i),e.oxw().getOwner()}),e.TgZ(5,"div",1),e.TgZ(6,"h4"),e._uU(7),e.qZA(),e.TgZ(8,"div",4),e.TgZ(9,"div",5),e.TgZ(10,"input",6,7),e.NdJ("keyup",function(g){const k=e.CHM(i).index;return e.oxw().checkCustomerRegister(g,k)})("input",function(g){const k=e.CHM(i).index;return e.oxw().checkCustomerRegister(g,k)}),e.qZA(),e.TgZ(12,"label",8),e._uU(13,"CPF"),e.qZA(),e.YNc(14,rr,3,2,"div",9),e.qZA(),e.qZA(),e.TgZ(15,"div",4),e.TgZ(16,"div",5),e._UZ(17,"input",10),e.TgZ(18,"label",8),e._uU(19,"Nome"),e.qZA(),e.YNc(20,Nr,4,3,"div",9),e.qZA(),e.qZA(),e.TgZ(21,"div",4),e.TgZ(22,"div",5),e._UZ(23,"input",11),e.TgZ(24,"label",8),e._uU(25,"Email"),e.qZA(),e.YNc(26,sr,3,2,"div",9),e.qZA(),e.qZA(),e.TgZ(27,"div",4),e.TgZ(28,"div",5),e._UZ(29,"input",12),e.TgZ(30,"label",8),e._uU(31,"Telefone"),e.qZA(),e.YNc(32,mn,2,1,"div",9),e.qZA(),e.qZA(),e.TgZ(33,"div",4),e.TgZ(34,"div",5),e._UZ(35,"input",13),e.TgZ(36,"label",8),e._uU(37,"Modelo Porsche"),e.qZA(),e.YNc(38,Fr,2,1,"div",9),e.qZA(),e.qZA(),e.TgZ(39,"div",4),e.TgZ(40,"div",5),e._UZ(41,"input",14),e.TgZ(42,"label",8),e._uU(43,"Vers\xe3o"),e.qZA(),e.YNc(44,lr,2,1,"div",9),e.qZA(),e.qZA(),e.TgZ(45,"div",4),e.TgZ(46,"div",5),e._UZ(47,"input",15),e.TgZ(48,"label",8),e._uU(49,"Ano/Modelo"),e.qZA(),e.YNc(50,cr,2,1,"div",9),e.qZA(),e.qZA(),e.TgZ(51,"div",4),e.TgZ(52,"div",5),e._UZ(53,"input",16),e.TgZ(54,"label",8),e._uU(55,"Placa do ve\xedculo"),e.qZA(),e.YNc(56,Gr,2,1,"div",9),e.qZA(),e.qZA(),e.TgZ(57,"div",4),e.TgZ(58,"div",5),e.TgZ(59,"select",17),e.TgZ(60,"option",18),e._uU(61,"Tamanho da camisa"),e.qZA(),e.TgZ(62,"option",19),e._uU(63,"PP"),e.qZA(),e.TgZ(64,"option",20),e._uU(65,"P"),e.qZA(),e.TgZ(66,"option",21),e._uU(67,"M"),e.qZA(),e.TgZ(68,"option",22),e._uU(69,"G"),e.qZA(),e.TgZ(70,"option",23),e._uU(71,"GG"),e.qZA(),e.qZA(),e.YNc(72,Gn,2,1,"div",9),e.qZA(),e.qZA(),e.TgZ(73,"div",5),e._UZ(74,"input",24),e.TgZ(75,"label",8),e._uU(76,"Como ficou sabendo do Sportscar Together Day 2022?"),e.qZA(),e.qZA(),e.qZA(),e.YNc(77,zr,2,0,"button",25),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=d.$implicit,a=d.index,g=e.oxw();e.xp6(4),e.Q6J("formGroup",g.formPorscheOwner),e.xp6(3),e.hij("Formul\xe1rio ",a+1,""),e.xp6(3),e.Q6J("dropSpecialCharacters",!1)("formControl",i.get("cpf")),e.uIk("id",a),e.xp6(4),e.Q6J("ngIf",(null==i.controls.cpf?null:i.controls.cpf.errors)&&1==g.submitted),e.xp6(3),e.Q6J("readonly",""!==i.get("name").value&&""!==i.get("id").value)("formControl",i.get("name")),e.xp6(3),e.Q6J("ngIf",(null==i.controls.name?null:i.controls.name.errors)&&1==g.submitted),e.xp6(3),e.Q6J("readonly",""!==i.get("email").value&&""!==i.get("id").value)("formControl",i.get("email")),e.xp6(3),e.Q6J("ngIf",(null==i.controls.email?null:i.controls.email.errors)&&1==g.submitted),e.xp6(3),e.Q6J("readonly",""!==i.get("phone").value&&""!==i.get("id").value)("dropSpecialCharacters",!1)("formControl",i.get("phone")),e.xp6(3),e.Q6J("ngIf",(null==i.controls.phone?null:i.controls.phone.errors)&&1==g.submitted),e.xp6(3),e.Q6J("formControl",i.get("additionalInformation").get("model")),e.xp6(3),e.Q6J("ngIf",(null==i.get("additionalInformation").controls.model?null:i.get("additionalInformation").controls.model.errors)&&1==g.submitted),e.xp6(3),e.Q6J("formControl",i.get("additionalInformation").get("version")),e.xp6(3),e.Q6J("ngIf",(null==i.get("additionalInformation").controls.version?null:i.get("additionalInformation").controls.version.errors)&&1==g.submitted),e.xp6(3),e.Q6J("formControl",i.get("additionalInformation").get("yearModel")),e.xp6(3),e.Q6J("ngIf",(null==i.get("additionalInformation").controls.yearModel?null:i.get("additionalInformation").controls.yearModel.errors)&&1==g.submitted),e.xp6(3),e.Q6J("formControl",i.get("additionalInformation").get("plate")),e.xp6(3),e.Q6J("ngIf",(null==i.get("additionalInformation").controls.plate?null:i.get("additionalInformation").controls.plate.errors)&&1==g.submitted),e.xp6(3),e.Q6J("formControl",i.get("additionalInformation").get("sizeShirt")),e.xp6(13),e.Q6J("ngIf",(null==i.get("additionalInformation").controls.sizeShirt?null:i.get("additionalInformation").controls.sizeShirt.errors)&&1==g.submitted),e.xp6(2),e.Q6J("formControl",i.get("additionalInformation").get("question")),e.xp6(3),e.Q6J("ngIf",g.tickets.length-1==a)}}let Hr=(()=>{class r{constructor(i,a,g,f,k,O){this.formBuilder=i,this.myProfileService=a,this.orderService=g,this.arrayHelper=f,this.formHelper=k,this.alertService=O,this.tickets=[],this.submitted=!1,this.sendPorscheOwner=new e.vpe}ngOnInit(){this.formPorscheOwner=this.formBuilder.group({owner:this.formBuilder.array([])});for(let i=0;i<this.quantityTickets;i++){let a=this.formBuilder.group({id:[""],name:["",[H.kI.required,H.kI.minLength(5)]],email:["",[H.kI.required,H.kI.email]],phone:["",H.kI.required],cpf:["",H.kI.required],additionalInformation:this.formBuilder.group({model:["",H.kI.required],version:["",H.kI.required],yearModel:["",H.kI.required],plate:["",H.kI.required],sizeShirt:["",H.kI.required],question:[""]})},{validators:[this.formHelper.testCpf,this.formHelper.testFullName]});this.formPorscheOwner.get("owner").push(a),this.tickets[this.tickets.length]="Ingresso"}}getOwner(){if("VALID"==this.formPorscheOwner.status){this.sendPorscheOwner.emit(!0);let i=this.arrayHelper.emptyItemRemove(this.formPorscheOwner.value.owner);this.orderService.defineAdditionalCustomer(i)}else this.alertService.toast({icon:"error",title:"Preencha todos os campos",text:"Alguns campos n\xe3o est\xe3o preenchidos. Por favor, preencha todos os campos necess\xe1rios corretamente"});this.submitted=!0}checkCustomerRegister(i,a){this.cpfCustomer.toArray().forEach((g,f)=>{this.cpfCustomer.toArray()[f].nativeElement.id==a&&14==this.cpfCustomer.toArray()[f].nativeElement.value.length&&this.myProfileService.checkCustomerRegisterWithCpf(i.srcElement.value).subscribe(k=>{k.length>=1?(this.formPorscheOwner.get("owner").at(a).get("id").setValue(k[0].id),this.formPorscheOwner.get("owner").at(a).get("name").setValue(k[0].name),this.formPorscheOwner.get("owner").at(a).get("email").setValue(k[0].email),this.formPorscheOwner.get("owner").at(a).get("phone").setValue(k[0].phones[0])):(this.formPorscheOwner.get("owner").at(a).get("id").setValue(""),this.formPorscheOwner.get("owner").at(a).get("name").setValue(""),this.formPorscheOwner.get("owner").at(a).get("email").setValue(""),this.formPorscheOwner.get("owner").at(a).get("phone").setValue(""))})})}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(H.qu),e.Y36(Y.c),e.Y36(w.p),e.Y36(Mi),e.Y36(ie.w),e.Y36(I.c))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-form-porsche-event"]],viewQuery:function(i,a){if(1&i&&e.Gf(tn,5),2&i){let g;e.iGM(g=e.CRH())&&(a.cpfCustomer=g)}},inputs:{quantityTickets:"quantityTickets"},outputs:{sendPorscheOwner:"sendPorscheOwner"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"row","p-2"],[1,"col-sm-12"],[3,"formGroup","ngSubmit"],[1,"col-sm-6"],[1,"form-floating","mb-3"],["inputmode","numeric","mask","000.000.000-00","type","text","placeholder","CPF",1,"form-control","ps-5",3,"dropSpecialCharacters","formControl","keyup","input"],["cpfCustomer",""],["for","floatingInput"],[4,"ngIf"],["type","text","required","true","required","","id","floatingInput",1,"form-control",3,"readonly","formControl"],["type","email","required","true","required","","id","floatingInput",1,"form-control",3,"readonly","formControl"],["type","text","required","true","required","","mask","(00) 00000-0000","id","floatingInput",1,"form-control",3,"readonly","dropSpecialCharacters","formControl"],["type","text","required","true","required","","id","floatingInput","placeholder","000.000.000-00",1,"form-control",3,"formControl"],["type","text","required","","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"formControl"],["type","text","required","","id","floatingInput","placeholder","Nome",1,"form-control",3,"formControl"],["type","text","required","","id","floatingInput","placeholder","(00) 00000-0000",1,"form-control",3,"formControl"],["required","","id","floatingInput",1,"form-control",3,"formControl"],["value",""],["value","PP"],["value","P"],["value","M"],["value","G"],["value","GG"],["type","text","id","floatingInput","placeholder","(00) 00000-0000",1,"form-control",3,"formControl"],["class","btn btn-grad",4,"ngIf"],[1,"text-danger"],[1,"btn","btn-grad"]],template:function(i,a){1&i&&e.YNc(0,Br,78,28,"div",0),2&i&&e.Q6J("ngForOf",a.formPorscheOwner.get("owner").controls)},directives:[ee.sg,H._Y,H.JL,H.sg,en.hx,H.Fj,H.JJ,H.oH,ee.O5,H.Q7,H.EJ,H.YN,H.Kr],styles:[""]}),r})();var _e=j(8332);let Yr=(()=>{class r{transform(i,a,g){return i?a&&g?i.filter(f=>zn(f[a]).includes(zn(g))):i:[]}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275pipe=e.Yjl({name:"filter",type:r,pure:!0}),r})();function zn(r){const d={a:"\xe1|\xe0|\xe3|\xe2|\xc0|\xc1|\xc3|\xc2",e:"\xe9|\xe8|\xea|\xc9|\xc8|\xca",i:"\xed|\xec|\xee|\xcd|\xcc|\xce",o:"\xf3|\xf2|\xf4|\xf5|\xd3|\xd2|\xd4|\xd5",u:"\xfa|\xf9|\xfb|\xfc|\xda|\xd9|\xdb|\xdc",c:"\xe7|\xc7",n:"\xf1|\xd1"};r=r.toLowerCase();for(let i in d)r=r.replace(new RegExp(d[i],"g"),i);return r}let hr=(()=>{class r{transform(i,a){return i.includes(a)}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275pipe=e.Yjl({name:"isOnlyOneTicketByCustomer",type:r,pure:!0}),r})();const dr=["sellLink"];function Pe(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",2),e._uU(2,"Vendas encerradas."),e.qZA(),e.qZA())}function ur(r,d){if(1&r&&e._UZ(0,"img",33),2&r){const i=e.oxw(3);e.Q6J("src",i.event.banner,e.LSH)}}const Jr=function(){return{height:"100%"}};function gr(r,d){1&r&&e._UZ(0,"ngx-skeleton-loader",34),2&r&&e.Q6J("theme",e.DdM(1,Jr))}function Qr(r,d){if(1&r&&(e.TgZ(0,"div",31),e.YNc(1,ur,1,1,"img",32),e.YNc(2,gr,1,2,"ngx-skeleton-loader",8),e.qZA()),2&r){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.event),e.xp6(1),e.Q6J("ngIf",!i.event)}}function Vr(r,d){1&r&&(e.TgZ(0,"div",31),e._UZ(1,"img",35),e.qZA())}function Wr(r,d){if(1&r&&(e.TgZ(0,"h2",36),e._uU(1),e.qZA()),2&r){const i=e.oxw(2);e.xp6(1),e.Oqu(i.event.name)}}const Xr=function(){return{"max-width":"300px",height:"50px"}};function vn(r,d){1&r&&e._UZ(0,"ngx-skeleton-loader",34),2&r&&e.Q6J("theme",e.DdM(1,Xr))}function pr(r,d){1&r&&(e.TgZ(0,"h5",37),e._uU(1,"Fotos"),e.qZA())}const xn=function(){return{"max-width":"150px",margin:"0"}};function _r(r,d){1&r&&e._UZ(0,"ngx-skeleton-loader",34),2&r&&e.Q6J("theme",e.DdM(1,xn))}const Bn=function(){return{height:"300px",margin:"0"}};function $r(r,d){1&r&&e._UZ(0,"ngx-skeleton-loader",34),2&r&&e.Q6J("theme",e.DdM(1,Bn))}function se(r,d){if(1&r&&(e.TgZ(0,"div",13),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.YNc(3,pr,2,0,"h5",16),e.YNc(4,_r,1,2,"ngx-skeleton-loader",8),e.qZA(),e.TgZ(5,"div",17),e.YNc(6,$r,1,2,"ngx-skeleton-loader",8),e.qZA(),e.qZA(),e.qZA()),2&r){const i=e.oxw(2);e.xp6(3),e.Q6J("ngIf",i.event),e.xp6(1),e.Q6J("ngIf",!i.event),e.xp6(2),e.Q6J("ngIf",!i.event)}}function jr(r,d){1&r&&(e.TgZ(0,"h5",37),e._uU(1,"Sobre o evento"),e.qZA())}function qt(r,d){1&r&&e._UZ(0,"ngx-skeleton-loader",34),2&r&&e.Q6J("theme",e.DdM(1,xn))}function mr(r,d){if(1&r&&e._UZ(0,"p",40),2&r){const i=e.oxw(4);e.Q6J("innerHtml",null==i.event?null:i.event.description,e.oJD)}}function Kr(r,d){1&r&&e._UZ(0,"ngx-skeleton-loader",34),2&r&&e.Q6J("theme",e.DdM(1,Bn))}function ea(r,d){if(1&r&&(e.TgZ(0,"div",13),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.YNc(3,jr,2,0,"h5",16),e.YNc(4,qt,1,2,"ngx-skeleton-loader",8),e.qZA(),e.TgZ(5,"div",38),e.YNc(6,mr,1,1,"p",39),e.YNc(7,Kr,1,2,"ngx-skeleton-loader",8),e.qZA(),e.qZA(),e.qZA()),2&r){const i=e.oxw(3);e.xp6(3),e.Q6J("ngIf",i.event),e.xp6(1),e.Q6J("ngIf",!i.event),e.xp6(2),e.Q6J("ngIf",i.event),e.xp6(1),e.Q6J("ngIf",!i.event)}}function ta(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,ea,8,4,"div",11),e.qZA()),2&r){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==i.event?null:i.event.description)}}function ia(r,d){1&r&&(e.TgZ(0,"h5",37),e._uU(1,"Sobre o evento"),e.qZA())}function na(r,d){1&r&&(e.TgZ(0,"div",40),e.TgZ(1,"div"),e._uU(2,"Evento: Ws Experience - Goiania."),e.qZA(),e.TgZ(3,"div"),e._uU(4,"Data: 08 e 09 de Outubro de 2022."),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Local: Estacionamento do Serra Dourada"),e.qZA(),e.TgZ(7,"div"),e._uU(8,"Evento Exclusivo para maiores de 18 anos."),e.qZA(),e.TgZ(9,"div"),e._uU(10,"Horario de inicio dia 08: 14h00m\xa0"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"Horario de inici0 dia 09: 14h00m"),e.qZA(),e.TgZ(13,"div"),e._UZ(14,"br"),e.qZA(),e.TgZ(15,"div"),e._uU(16,"\xa0"),e.qZA(),e.TgZ(17,"div"),e._UZ(18,"br"),e.qZA(),e.TgZ(19,"div"),e._uU(20,"* \u2022 O EVENTO*"),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"br"),e.qZA(),e.TgZ(23,"div"),e._uU(24,"O WS EXPERIENCE acontecer\xe1 nos dias 08 e 09 de outubro e proporcionar\xe1 uma experi\xeancia diferente, dois dias, dois eventos e duas experi\xeancias completamente diferentes."),e.qZA(),e.TgZ(25,"div"),e._UZ(26,"br"),e.qZA(),e.TgZ(27,"div"),e._uU(28,"\u2022 GAROTA VIP - 08/10"),e.qZA(),e.TgZ(29,"div"),e._UZ(30,"br"),e.qZA(),e.TgZ(31,"div"),e._uU(32,"O Garota Vip tem como principais caracter\xedsticas o tradicional show mais longo do Wesley Safad\xe3o, convidados especiais e ser\xe1 open bar nas \xe1reas: \u201cLounges\u201d, \u201cNingu\xe9m \xe9 de Ferro\u201d e \u201cVirote\u201d."),e.qZA(),e.TgZ(33,"div"),e._UZ(34,"br"),e.qZA(),e.TgZ(35,"div"),e._uU(36,"\u2022 BLOCO VAI SAFAD\xc3O - 09/10"),e.qZA(),e.TgZ(37,"div"),e._UZ(38,"br"),e.qZA(),e.TgZ(39,"div"),e._uU(40,"O Bloco Vai Safad\xe3o, tem como principais caracter\xedsticas o show no Trio, Abad\xe1 e tamb\xe9m conta com atra\xe7\xf5es especiais. (Evento sem open bar)."),e.qZA(),e.TgZ(41,"div"),e._UZ(42,"br"),e.qZA(),e.TgZ(43,"div"),e._uU(44,"*\u2022 INGRESSOS *"),e.qZA(),e.TgZ(45,"div"),e._UZ(46,"br"),e.qZA(),e.TgZ(47,"div"),e._uU(48,"Disponibilizamos um ingresso \u201cpassaporte\u201d, v\xe1lido para os dois dias. Ou seja, te dar\xe1 direito as duas experi\xeancias, incluindo a retirado do abad\xe1."),e.qZA(),e.TgZ(49,"div"),e._UZ(50,"br"),e.qZA(),e.TgZ(51,"div"),e._uU(52,"\xa0"),e.qZA(),e.TgZ(53,"div"),e._UZ(54,"br"),e.qZA(),e.TgZ(55,"div"),e._uU(56,"Setores:"),e.qZA(),e.TgZ(57,"div"),e._UZ(58,"br"),e.qZA(),e.TgZ(59,"div"),e._uU(60,"Revoada - Area Sem Open Bar."),e.qZA(),e.TgZ(61,"div"),e._UZ(62,"br"),e.qZA(),e.TgZ(63,"div"),e._uU(64,"Virote - (Open - Agua, Cerveja e Refrigerante. Somente S\xe1bado"),e.qZA(),e.TgZ(65,"div"),e._uU(66,"08/10/22)"),e.qZA(),e.TgZ(67,"div"),e._uU(68,"Garcons e Banheiros Exclusivos."),e.qZA(),e.TgZ(69,"div"),e._uU(70,"Evento Exclusivo para maiores de 18 anos."),e.qZA(),e.TgZ(71,"div"),e._UZ(72,"br"),e.qZA(),e.TgZ(73,"div"),e._uU(74,"\xa0"),e.qZA(),e.TgZ(75,"div"),e._UZ(76,"br"),e.qZA(),e.TgZ(77,"div"),e._uU(78,"Ningu\xe9m \xe9 de Ferro - (Open - Agua, Cerveja, Refrigerante, Vodka,"),e.qZA(),e.TgZ(79,"div"),e._uU(80,"Gin e Whisk. Somente S\xe1bado 08/10/22)"),e.qZA(),e.TgZ(81,"div"),e._uU(82,"Garcons e Banheiros Exclusivos."),e.qZA(),e.TgZ(83,"div"),e._uU(84,"Evento Exclusivo para maiores de 18 anos."),e.qZA(),e.TgZ(85,"div"),e._UZ(86,"br"),e.qZA(),e.TgZ(87,"div"),e._uU(88,"\u2022 OS LOUNGES TAMB\xc9M VALEM PARA OS 2 DIAS, COMO RESERVAR?"),e.qZA(),e.TgZ(89,"div"),e._UZ(90,"br"),e.qZA(),e.TgZ(91,"div"),e._uU(92,"Sim, os ingressos de lounges tamb\xe9m s\xe3o v\xe1lidos para os dois dias e eles podem ser adquiridos atrav\xe9s do contato: Gustavo Cesar - (62)982158535"),e.qZA(),e.TgZ(93,"div"),e._UZ(94,"br"),e.qZA(),e.TgZ(95,"div"),e._uU(96,"Evento Exclusivo para maiores de 18 anos."),e.qZA(),e.TgZ(97,"div"),e._UZ(98,"br"),e.qZA(),e.TgZ(99,"div"),e._uU(100,"\u2022 OPEN BAR"),e.qZA(),e.TgZ(101,"div"),e._UZ(102,"br"),e.qZA(),e.TgZ(103,"div"),e._uU(104,"O evento contar\xe1 com Open bar somente no Garota Vip (08/10) e nas \xe1reas: \u201cLounges, Ningu\xe9m \xc9 De Ferro\u201d e \u201cVirote\u201d. No Bloco Vai Safad\xe3o (09/10) o evento n\xe3o ter\xe1 open bar.\xa0"),e.qZA(),e.TgZ(105,"div"),e._UZ(106,"br"),e.qZA(),e.TgZ(107,"div"),e._uU(108,"Pol\xedtica de meia-entrada"),e.qZA(),e.TgZ(109,"div"),e._UZ(110,"br"),e.qZA(),e.TgZ(111,"div"),e._uU(112,"https://www.ingressosa.com/half-price-policy"),e.qZA(),e.TgZ(113,"div"),e._UZ(114,"br"),e.qZA(),e.TgZ(115,"div"),e._uU(116,"O que e ingresso meia solid\xe1rio?"),e.qZA(),e.TgZ(117,"div"),e._UZ(118,"br"),e.qZA(),e.TgZ(119,"div"),e._uU(120,"O ingresso solid\xe1rio \xe9 uma op\xe7\xe3o para as pessoas que n\xe3o se enquadram na meia-entrada, \xe9 um ingresso com desconto, mediante a entrega de 1kg de alimento n\xe3o perec\xedvel por ingresso na entrada do evento."),e.qZA(),e.TgZ(121,"div"),e._UZ(122,"br"),e.qZA(),e.TgZ(123,"div"),e._uU(124,"Termos de Uso \u201cINGRESSO SA\u201d"),e.qZA(),e.TgZ(125,"div"),e._UZ(126,"br"),e.qZA(),e.TgZ(127,"div"),e._uU(128,"https://www.ingressosa.com/terms-of-us"),e.qZA(),e.TgZ(129,"div"),e._UZ(130,"br"),e.qZA(),e.TgZ(131,"div"),e._uU(132,"Procon"),e.qZA(),e.TgZ(133,"div"),e._UZ(134,"br"),e.qZA(),e.TgZ(135,"div"),e._uU(136,"https://www.procon.go.gov.br/"),e.qZA(),e.TgZ(137,"div"),e._UZ(138,"br"),e.qZA(),e.TgZ(139,"div"),e._uU(140,"Telefone: 151"),e.qZA(),e.qZA())}function ra(r,d){if(1&r&&(e.TgZ(0,"div",13),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.YNc(3,ia,2,0,"h5",16),e.YNc(4,na,141,0,"div",39),e.qZA(),e.qZA(),e.qZA()),2&r){const i=e.oxw(2);e.xp6(3),e.Q6J("ngIf",i.event),e.xp6(1),e.Q6J("ngIf",i.event)}}function aa(r,d){1&r&&(e.TgZ(0,"h5",37),e._uU(1,"Localiza\xe7\xe3o"),e.qZA())}function Hn(r,d){1&r&&e._UZ(0,"ngx-skeleton-loader",34),2&r&&e.Q6J("theme",e.DdM(1,xn))}function oa(r,d){if(1&r&&e._UZ(0,"iframe",41),2&r){const i=e.oxw(2);e.Q6J("src",i.event.googleMapsUrl,e.uOi)}}function sa(r,d){1&r&&e._UZ(0,"ngx-skeleton-loader",34),2&r&&e.Q6J("theme",e.DdM(1,Bn))}function la(r,d){if(1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",43),e._uU(2),e.qZA(),e.qZA()),2&r){const i=e.oxw(3);e.xp6(2),e.Oqu(i.event.startDate)}}function ca(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",42),e._uU(2,"04 e 05 de mar\xe7o"),e.qZA(),e.qZA())}function ha(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",42),e._uU(2,"04 e 05 de mar\xe7o"),e.qZA(),e.qZA())}function da(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",42),e._uU(2,"Dia 18 a dia 28 de maio"),e.qZA(),e.qZA())}function ua(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",42),e._uU(2,"DIAS 09 e 10/06"),e.qZA(),e.qZA())}function ga(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",42),e._uU(2,"30 e 31 de dezembro"),e.qZA(),e.qZA())}function yn(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",42),e._uU(2,"04/10 a 04/11"),e.qZA(),e.qZA())}function nn(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",42),e._uU(2,"12 a 15 de outubro"),e.qZA(),e.qZA())}function pa(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",42),e._uU(2,"04/10 a 02/11"),e.qZA(),e.qZA())}function _a(r,d){1&r&&(e.TgZ(0,"div"),e.TgZ(1,"p",42),e._uU(2,"04/10 a 02/11"),e.qZA(),e.qZA())}function ma(r,d){if(1&r&&(e.ynx(0),e.YNc(1,la,3,1,"div",22),e.YNc(2,ca,3,0,"div",22),e.YNc(3,ha,3,0,"div",22),e.YNc(4,da,3,0,"div",22),e.YNc(5,ua,3,0,"div",22),e.YNc(6,ga,3,0,"div",22),e.YNc(7,yn,3,0,"div",22),e.YNc(8,nn,3,0,"div",22),e.YNc(9,pa,3,0,"div",22),e.YNc(10,_a,3,0,"div",22),e.TgZ(11,"p",42),e._uU(12),e.qZA(),e.BQk()),2&r){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf","f0aa98ac-686f-4e28-9bce-617612f99860"!==i.event.id&&"43c00201-57c7-43c1-ade5-0d4d742a33a8"!==i.event.id&&"7067c247-dec4-4f85-89c5-69efc403e37d"!=i.event.id&&"846387aa-74b6-49a5-b00b-c64c51de219b"!=i.event.id&&"54baac91-9fa2-4662-9ef4-7db0a036b560"!==i.event.id&&"5384208e-ac70-4ccb-ab45-c533e9db168b"!==i.event.id&&"661af29a-d682-4921-82f7-f975b61f7c7f"!==i.event.id&&"5384208e-ac70-4ccb-ab45-c533e9db168b"!==i.event.id&&"661af29a-d682-4921-82f7-f975b61f7c7f"!==i.event.id),e.xp6(1),e.Q6J("ngIf","f0aa98ac-686f-4e28-9bce-617612f99860"==i.event.id),e.xp6(1),e.Q6J("ngIf","43c00201-57c7-43c1-ade5-0d4d742a33a8"==i.event.id),e.xp6(1),e.Q6J("ngIf","7067c247-dec4-4f85-89c5-69efc403e37d"==i.event.id),e.xp6(1),e.Q6J("ngIf","846387aa-74b6-49a5-b00b-c64c51de219b"==i.event.id),e.xp6(1),e.Q6J("ngIf","54baac91-9fa2-4662-9ef4-7db0a036b560"==i.event.id),e.xp6(1),e.Q6J("ngIf","5384208e-ac70-4ccb-ab45-c533e9db168b"==i.event.id),e.xp6(1),e.Q6J("ngIf","661af29a-d682-4921-82f7-f975b61f7c7f"==i.event.id),e.xp6(1),e.Q6J("ngIf","5384208e-ac70-4ccb-ab45-c533e9db168b"==i.event.id),e.xp6(1),e.Q6J("ngIf","661af29a-d682-4921-82f7-f975b61f7c7f"==i.event.id),e.xp6(2),e.Oqu(i.event.startTime)}}const fa=function(){return{"max-width":"200px",height:"40px",margin:"0"}},va=function(){return{"max-width":"100px",height:"30px",margin:"0"}};function xa(r,d){1&r&&(e.ynx(0),e._UZ(1,"ngx-skeleton-loader",34),e._UZ(2,"br"),e._UZ(3,"ngx-skeleton-loader",34),e.BQk()),2&r&&(e.xp6(1),e.Q6J("theme",e.DdM(2,fa)),e.xp6(2),e.Q6J("theme",e.DdM(3,va)))}function ya(r,d){if(1&r&&(e.ynx(0),e.TgZ(1,"h6",42),e._uU(2),e.qZA(),e.TgZ(3,"p",44),e._uU(4),e.qZA(),e.BQk()),2&r){const i=e.oxw(2);e.xp6(2),e.Oqu(i.event.address),e.xp6(2),e.AsE("",i.event.city," - ",i.event.uf,"")}}const ba=function(){return{"max-width":"200px",margin:"0"}};function Ca(r,d){1&r&&(e.ynx(0),e._UZ(1,"ngx-skeleton-loader",34),e._UZ(2,"br"),e._UZ(3,"ngx-skeleton-loader",34),e.BQk()),2&r&&(e.xp6(1),e.Q6J("theme",e.DdM(2,ba)),e.xp6(2),e.Q6J("theme",e.DdM(3,xn)))}function Ta(r,d){if(1&r&&(e.TgZ(0,"div",53),e.TgZ(1,"p",54),e._uU(2),e.qZA(),e.qZA()),2&r){const i=e.oxw(4);e.xp6(2),e.Oqu(i.ticketCupomError)}}function wa(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",47),e.TgZ(2,"div",48),e.TgZ(3,"div",49),e.TgZ(4,"div",50),e.TgZ(5,"input",51),e.NdJ("ngModelChange",function(g){return e.CHM(i),e.oxw(3).ticketCupom=g}),e.qZA(),e.TgZ(6,"button",52),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).sendCupomTicket()}),e._uU(7,"Validar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,Ta,3,1,"div",46),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(3);e.xp6(5),e.Q6J("ngModel",i.ticketCupom),e.xp6(1),e.Q6J("disabled",1==i.loading),e.xp6(2),e.Q6J("ngIf",""!==i.ticketCupomError)}}function Sa(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",48),e.TgZ(1,"div",55),e.TgZ(2,"div",50),e.TgZ(3,"input",56),e.NdJ("ngModelChange",function(g){return e.CHM(i),e.oxw(3).ticketCupom=g}),e.qZA(),e.TgZ(4,"button",52),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).sendCupomTicket()}),e._uU(5,"Validar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(3);e.xp6(3),e.Q6J("ngModel",i.ticketCupom),e.xp6(1),e.Q6J("disabled",1==i.loading)}}function Pa(r,d){if(1&r&&(e.TgZ(0,"div",53),e.TgZ(1,"p",54),e._uU(2),e.qZA(),e.qZA()),2&r){const i=e.oxw(3);e.xp6(2),e.Oqu(i.ticketCupomError)}}function Aa(r,d){if(1&r&&(e.TgZ(0,"div",53),e.TgZ(1,"p",54),e._uU(2),e.qZA(),e.qZA()),2&r){const i=e.oxw(3);e.xp6(2),e.Oqu(i.ticketCupomError)}}function ka(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,wa,9,3,"div",0),e.YNc(2,Sa,6,2,"ng-template",null,45,e.W1O),e.YNc(4,Pa,3,1,"div",46),e.YNc(5,Aa,3,1,"div",46),e.qZA()),2&r){const i=e.MAs(3),a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null!=a.event&&"e6a772ac-5a35-4724-988d-ad2a648b7ec1"==a.event.id||"408b38ea-c13b-4339-a39e-0d9016e36912"==(null==a.event?null:a.event.id))("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",""!==a.ticketCupomError),e.xp6(1),e.Q6J("ngIf",""!==a.ticketCupomError)}}function Ia(r,d){if(1&r&&(e.TgZ(0,"div",60),e.TgZ(1,"h3",61),e._uU(2,"Pode comprar:"),e.qZA(),e.TgZ(3,"span",62),e._uU(4,"S\xf3cio "),e.TgZ(5,"span",63),e._uU(6),e.qZA(),e.qZA(),e._uU(7,"\xa0 "),e.TgZ(8,"span",62),e._uU(9,"Convidado "),e.TgZ(10,"span",63),e._uU(11),e.qZA(),e.qZA(),e._uU(12,"\xa0 "),e.TgZ(13,"span",62),e._uU(14,"Extra "),e.TgZ(15,"span",63),e._uU(16),e.qZA(),e.qZA(),e.qZA()),2&r){const i=e.oxw(4);e.xp6(6),e.Oqu(i.quantityPctValuePartner),e.xp6(5),e.Oqu(i.quantityPctValueInvited),e.xp6(5),e.Oqu(i.quantityPctValueExtra)}}function c(r,d){if(1&r&&(e.TgZ(0,"div"),e.TgZ(1,"div",58),e.YNc(2,Ia,17,3,"div",59),e.qZA(),e.qZA()),2&r){const i=e.oxw(3);e.xp6(2),e.Q6J("ngIf",i.fengIntegration)}}function t(r,d){1&r&&(e.TgZ(0,"p",2),e._uU(1,"N\xe3o h\xe1 ingressos dispon\xedveis para voc\xea."),e.qZA())}function n(r,d){if(1&r&&(e.YNc(0,c,3,1,"div",0),e.YNc(1,t,2,0,"ng-template",null,57,e.W1O)),2&r){const i=e.MAs(2),a=e.oxw(2);e.Q6J("ngIf",0==a.eventClosed)("ngIfElse",i)}}function o(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"div",64),e.TgZ(2,"mapv2",65),e.NdJ("change",function(g){return e.CHM(i),e.oxw(2).mapV2Change(g)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(2);e.xp6(2),e.Q6J("eventId",i.event.id)("sectorId",i.selectedSector)}}function s(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",72),e.NdJ("click",function(){e.CHM(i);const g=e.oxw().$implicit;return e.oxw(3).selectSector(g.id)}),e.TgZ(1,"div",73),e.TgZ(2,"h6",74),e._uU(3),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=e.oxw().$implicit,a=e.oxw(3);e.ekj("active",a.selectedSector==i.id),e.xp6(3),e.Oqu(i.name)}}function l(r,d){1&r&&e.YNc(0,s,4,3,"ng-template",71)}const h=function(){return{width:"100%",height:"55px",margin:"0"}};function u(r,d){1&r&&e._UZ(0,"ngx-skeleton-loader",34),2&r&&e.Q6J("theme",e.DdM(1,h))}function p(r,d){1&r&&e.YNc(0,u,1,2,"ng-template",75)}const _=function(){return[]};function v(r,d){1&r&&(e.ynx(0),e.YNc(1,p,1,0,void 0,68),e.BQk()),2&r&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,_).constructor(5)))}function T(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"section"),e.TgZ(2,"app-seatsio",76),e.NdJ("selectedSeats",function(g){return e.CHM(i),e.oxw(4).getSelectedSeats(g)})("sendLoadingSeatsIo",function(g){return e.CHM(i),e.oxw(4).getLoadingSeatsIo(g)})("deselectedSeats",function(g){return e.CHM(i),e.oxw(4).removeSelectedSeats(g)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(4);e.xp6(2),e.Q6J("event",i.event)}}function b(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"section"),e.TgZ(2,"app-map-place",77),e.NdJ("sendSelectedSeat",function(g){return e.CHM(i),e.oxw(4).getSelectedMapPlace(g)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(4);e.xp6(2),e.Q6J("event",i.event)("ticketCupom",i.ticketCupom)("sectorId",i.sectors[i.indexSector].id)}}function P(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,T,3,1,"div",22),e.YNc(2,b,3,3,"div",22),e.qZA()),2&r){const i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",i.event&&1==i.sectors[i.indexSector].useSeats&&i.sectors[i.indexSector].id==i.selectedSector),e.xp6(1),e.Q6J("ngIf",i.event&&1==i.sectors[i.indexSector].useMapPlace&&i.sectors[i.indexSector].id==i.selectedSector)}}function y(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1,"Inteira "),e.qZA())}function Z(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1,"Meia"),e.qZA())}function E(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1,"Cortesia"),e.qZA())}function F(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Unissex"),e.qZA())}function D(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Masculino"),e.qZA())}function N(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Feminino"),e.qZA())}function z(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Cortesia"),e.qZA())}function V(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"p"),e.TgZ(1,"i",92),e.NdJ("click",function(){e.CHM(i),e.oxw(5);const g=e.MAs(42);return e.oxw().openHalfEntryModalInformation(g)}),e.qZA(),e.qZA()}}function B(r,d){if(1&r&&(e.TgZ(0,"p",93),e._uU(1),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Oqu(i.batch)}}function X(r,d){if(1&r&&(e.TgZ(0,"p",44),e._uU(1),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.hij("Classifica\xe7\xe3o indicativa: +",i.parentRating,"")}}function J(r,d){if(1&r){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",79),e.TgZ(2,"div",80),e.TgZ(3,"p",81),e._uU(4),e.qZA(),e._uU(5),e.TgZ(6,"div",82),e.YNc(7,y,2,0,"p",22),e.YNc(8,Z,2,0,"p",22),e.YNc(9,E,2,0,"p",22),e.TgZ(10,"p",83),e._uU(11," - "),e.qZA(),e.YNc(12,F,2,0,"p",22),e.YNc(13,D,2,0,"p",22),e.YNc(14,N,2,0,"p",22),e.YNc(15,z,2,0,"p",22),e.YNc(16,V,2,0,"p",22),e.qZA(),e.YNc(17,B,2,1,"p",84),e._UZ(18,"div",85),e.YNc(19,X,2,1,"p",86),e.qZA(),e.TgZ(20,"div",80),e.TgZ(21,"p",87),e.TgZ(22,"app-qty",88),e.NdJ("change",function(g){return e.CHM(i),e.oxw(5).changeQty(g)}),e.ALo(23,"isOnlyOneTicketByCustomer"),e.qZA(),e.qZA(),e.TgZ(24,"p",89),e._uU(25),e.ALo(26,"number"),e.qZA(),e.TgZ(27,"p",90),e._uU(28),e.ALo(29,"number"),e.qZA(),e.TgZ(30,"p",91),e._uU(31),e.ALo(32,"number"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&r){const i=d.$implicit,a=e.oxw(5);e.xp6(4),e.Oqu(i.name),e.xp6(1),e.hij(" ",i.type," "),e.xp6(2),e.Q6J("ngIf","Full"==i.type),e.xp6(1),e.Q6J("ngIf","Half"==i.type),e.xp6(1),e.Q6J("ngIf","Courtesy"==i.type),e.xp6(3),e.Q6J("ngIf","Undefined"==i.gender),e.xp6(1),e.Q6J("ngIf","Male"==i.gender),e.xp6(1),e.Q6J("ngIf","Female"==i.gender),e.xp6(1),e.Q6J("ngIf","Courtesy"==i.gender),e.xp6(1),e.Q6J("ngIf","Half"==i.type),e.xp6(1),e.Q6J("ngIf",i.batch),e.xp6(1),e.Q6J("innerHTML",i.description,e.oJD),e.xp6(1),e.Q6J("ngIf",i.parentRating),e.xp6(3),e.Q6J("value",a.countTickets(i.id))("target",i)("allowAdd",!(e.xi3(23,20,a.ticketIdForOnlyOneCustomer,i.id)||null!=a.event&&a.event.allowMapV2))("allowRemove",!(null!=a.event&&a.event.allowMapV2)),e.xp6(3),e.hij("R$ ",e.xi3(26,23,a.amount(i),"1.2-2"),""),e.xp6(3),e.hij("R$ ",e.xi3(29,26,i.price,"1.2-2")," (Valor)"),e.xp6(3),e.hij("R$ ",e.xi3(32,29,i.fee,"1.2-2")," (Taxa)")}}function $(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,J,33,32,"ng-container",68),e.ALo(2,"sortBy"),e.ALo(3,"filter"),e.qZA()),2&r){const i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,1,e.Dn7(3,5,i.tickets,"sectorId",i.selectedSector),"position","asc"))}}function K(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1,"Inteira "),e.qZA())}function W(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1,"Meia"),e.qZA())}function ne(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1,"Cortesia"),e.qZA())}function te(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Unissex"),e.qZA())}function ue(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Masculino"),e.qZA())}function Qe(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Feminino"),e.qZA())}function he(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Cortesia"),e.qZA())}function Ae(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"p"),e.TgZ(1,"i",92),e.NdJ("click",function(){e.CHM(i),e.oxw(6);const g=e.MAs(42);return e.oxw().openHalfEntryModalInformation(g)}),e.qZA(),e.qZA()}}function Ve(r,d){if(1&r&&(e.TgZ(0,"p",93),e._uU(1),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Oqu(i.batch)}}function gt(r,d){if(1&r&&(e.TgZ(0,"p",44),e._uU(1),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.hij("Classifica\xe7\xe3o indicativa: +",i.parentRating,"")}}function ae(r,d){if(1&r){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",79),e.TgZ(2,"div",80),e.TgZ(3,"p",81),e._uU(4),e.qZA(),e.TgZ(5,"div",82),e.YNc(6,K,2,0,"p",22),e.YNc(7,W,2,0,"p",22),e.YNc(8,ne,2,0,"p",22),e.TgZ(9,"p",83),e._uU(10," - "),e.qZA(),e.YNc(11,te,2,0,"p",22),e.YNc(12,ue,2,0,"p",22),e.YNc(13,Qe,2,0,"p",22),e.YNc(14,he,2,0,"p",22),e.YNc(15,Ae,2,0,"p",22),e.qZA(),e.YNc(16,Ve,2,1,"p",84),e._UZ(17,"div",85),e.YNc(18,gt,2,1,"p",86),e.qZA(),e.TgZ(19,"div",80),e.TgZ(20,"p",87),e.TgZ(21,"app-qty",88),e.NdJ("change",function(g){return e.CHM(i),e.oxw(6).changeQty(g)}),e.ALo(22,"isOnlyOneTicketByCustomer"),e.qZA(),e.qZA(),e.TgZ(23,"p",89),e._uU(24),e.ALo(25,"number"),e.qZA(),e.TgZ(26,"p",90),e._uU(27),e.ALo(28,"number"),e.qZA(),e.TgZ(29,"p",91),e._uU(30),e.ALo(31,"number"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&r){const i=d.$implicit,a=e.oxw(6);e.xp6(4),e.Oqu(i.name),e.xp6(2),e.Q6J("ngIf","Full"==i.type),e.xp6(1),e.Q6J("ngIf","Half"==i.type),e.xp6(1),e.Q6J("ngIf","Courtesy"==i.type),e.xp6(3),e.Q6J("ngIf","Undefined"==i.gender),e.xp6(1),e.Q6J("ngIf","Male"==i.gender),e.xp6(1),e.Q6J("ngIf","Female"==i.gender),e.xp6(1),e.Q6J("ngIf","Courtesy"==i.gender),e.xp6(1),e.Q6J("ngIf","Half"==i.type),e.xp6(1),e.Q6J("ngIf",i.batch),e.xp6(1),e.Q6J("innerHTML",i.description,e.oJD),e.xp6(1),e.Q6J("ngIf",i.parentRating),e.xp6(3),e.Q6J("value",a.countTickets(i.id))("target",i)("allowAdd",!(e.xi3(22,19,a.ticketIdForOnlyOneCustomer,i.id)||null!=a.event&&a.event.allowMapV2))("allowRemove",!(null!=a.event&&a.event.allowMapV2)),e.xp6(3),e.hij("R$ ",e.xi3(25,22,a.amount(i),"1.2-2"),""),e.xp6(3),e.hij("R$ ",e.xi3(28,25,i.price,"1.2-2")," (Valor)"),e.xp6(3),e.hij("R$ ",e.xi3(31,28,i.fee,"1.2-2")," (Taxa)")}}function fe(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,ae,32,31,"ng-container",68),e.ALo(2,"sortBy"),e.ALo(3,"filter"),e.qZA()),2&r){const i=e.oxw(5);e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,1,e.Dn7(3,5,i.tickets,"sectorId",i.selectedSector),"position","asc"))}}function We(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1,"Inteira "),e.qZA())}function Xt(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1,"Meia"),e.qZA())}function $t(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1,"Cortesia"),e.qZA())}function Ea(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Unissex"),e.qZA())}function Ma(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Masculino"),e.qZA())}function Za(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Feminino"),e.qZA())}function Oa(r,d){1&r&&(e.TgZ(0,"p"),e._uU(1," Cortesia"),e.qZA())}function Na(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"p"),e.TgZ(1,"i",92),e.NdJ("click",function(){e.CHM(i),e.oxw(6);const g=e.MAs(42);return e.oxw().openHalfEntryModalInformation(g)}),e.qZA(),e.qZA()}}function qa(r,d){if(1&r&&(e.TgZ(0,"p",93),e._uU(1),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.Oqu(i.batch)}}function Da(r,d){if(1&r&&(e.TgZ(0,"p",44),e._uU(1),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.hij("Classifica\xe7\xe3o indicativa: +",i.parentRating,"")}}function Ra(r,d){if(1&r){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",79),e.TgZ(2,"div",80),e.TgZ(3,"p",81),e._uU(4),e.qZA(),e.TgZ(5,"div",82),e.YNc(6,We,2,0,"p",22),e.YNc(7,Xt,2,0,"p",22),e.YNc(8,$t,2,0,"p",22),e.TgZ(9,"p",83),e._uU(10," - "),e.qZA(),e.YNc(11,Ea,2,0,"p",22),e.YNc(12,Ma,2,0,"p",22),e.YNc(13,Za,2,0,"p",22),e.YNc(14,Oa,2,0,"p",22),e.YNc(15,Na,2,0,"p",22),e.qZA(),e.YNc(16,qa,2,1,"p",84),e._UZ(17,"div",85),e.YNc(18,Da,2,1,"p",86),e.qZA(),e.TgZ(19,"div",80),e.TgZ(20,"p",87),e.TgZ(21,"app-qty",88),e.NdJ("change",function(g){return e.CHM(i),e.oxw(6).changeQty(g)}),e.ALo(22,"isOnlyOneTicketByCustomer"),e.qZA(),e.qZA(),e.TgZ(23,"p",89),e._uU(24),e.ALo(25,"number"),e.qZA(),e.TgZ(26,"p",90),e._uU(27),e.ALo(28,"number"),e.qZA(),e.TgZ(29,"p",91),e._uU(30),e.ALo(31,"number"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&r){const i=d.$implicit,a=e.oxw(6);e.xp6(4),e.Oqu(i.name),e.xp6(2),e.Q6J("ngIf","Full"==i.type),e.xp6(1),e.Q6J("ngIf","Half"==i.type),e.xp6(1),e.Q6J("ngIf","Courtesy"==i.type),e.xp6(3),e.Q6J("ngIf","Undefined"==i.gender),e.xp6(1),e.Q6J("ngIf","Male"==i.gender),e.xp6(1),e.Q6J("ngIf","Female"==i.gender),e.xp6(1),e.Q6J("ngIf","Courtesy"==i.gender),e.xp6(1),e.Q6J("ngIf","Half"==i.type),e.xp6(1),e.Q6J("ngIf",i.batch),e.xp6(1),e.Q6J("innerHTML",i.description,e.oJD),e.xp6(1),e.Q6J("ngIf",i.parentRating),e.xp6(3),e.Q6J("value",a.countTickets(i.id))("target",i)("allowAdd",!(e.xi3(22,19,a.ticketIdForOnlyOneCustomer,i.id)||null!=a.event&&a.event.allowMapV2))("allowRemove",!(null!=a.event&&a.event.allowMapV2)),e.xp6(3),e.hij("R$ ",e.xi3(25,22,a.amount(i),"1.2-2"),""),e.xp6(3),e.hij("R$ ",e.xi3(28,25,i.price,"1.2-2")," (Valor)"),e.xp6(3),e.hij("R$ ",e.xi3(31,28,i.fee,"1.2-2")," (Taxa)")}}function Fa(r,d){if(1&r&&(e.TgZ(0,"p",93),e._uU(1),e.qZA()),2&r){const i=e.oxw(2).$implicit;e.xp6(1),e.Oqu(i.batch)}}function Ua(r,d){if(1&r&&(e.TgZ(0,"p",44),e._uU(1),e.qZA()),2&r){const i=e.oxw(2).$implicit;e.xp6(1),e.hij("Classifica\xe7\xe3o indicativa: +",i.parentRating,"")}}function La(r,d){if(1&r){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",80),e.TgZ(2,"p",81),e._uU(3),e.qZA(),e.YNc(4,Fa,2,1,"p",84),e.YNc(5,Ua,2,1,"p",86),e.qZA(),e.TgZ(6,"div",80),e.TgZ(7,"p",87),e.TgZ(8,"app-qty",88),e.NdJ("change",function(g){return e.CHM(i),e.oxw(7).changeQty(g)}),e.ALo(9,"isOnlyOneTicketByCustomer"),e.qZA(),e.qZA(),e.TgZ(10,"p",89),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"p",90),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"p",91),e._uU(17),e.ALo(18,"number"),e.qZA(),e.qZA(),e.BQk()}if(2&r){const i=e.oxw().$implicit,a=e.oxw(6);e.xp6(3),e.Oqu(i.name),e.xp6(1),e.Q6J("ngIf",i.batch),e.xp6(1),e.Q6J("ngIf",i.parentRating),e.xp6(3),e.Q6J("value",a.countTickets(i.id))("target",i)("allowAdd",!(e.xi3(9,10,a.ticketIdForOnlyOneCustomer,i.id)||null!=a.event&&a.event.allowMapV2))("allowRemove",!(null!=a.event&&a.event.allowMapV2)),e.xp6(3),e.hij("R$ ",e.xi3(12,13,a.amount(i),"1.2-2"),""),e.xp6(3),e.hij("R$ ",e.xi3(15,16,i.price,"1.2-2")," (Valor)"),e.xp6(3),e.hij("R$ ",e.xi3(18,19,i.fee,"1.2-2")," (Taxa)")}}function Ga(r,d){if(1&r&&(e.ynx(0),e.TgZ(1,"div",79),e.YNc(2,La,19,22,"ng-container",22),e.qZA(),e.BQk()),2&r){const i=e.oxw(6);e.xp6(2),e.Q6J("ngIf",1==i.showFullTickets)}}function za(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"button",96),e.NdJ("click",function(){return e.CHM(i),e.oxw(7).showFullTickets=!0}),e._uU(1,"Mostrar Inteiras"),e.qZA()}}function Ba(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"button",96),e.NdJ("click",function(){return e.CHM(i),e.oxw(7).showFullTickets=!1}),e._uU(1,"Ocultar Inteiras"),e.qZA()}}function Ha(r,d){if(1&r&&(e.ynx(0),e.TgZ(1,"div",53),e.YNc(2,za,2,0,"button",95),e.YNc(3,Ba,2,0,"button",95),e.qZA(),e.BQk()),2&r){const i=e.oxw(6);e.xp6(2),e.Q6J("ngIf",!i.showFullTickets),e.xp6(1),e.Q6J("ngIf",i.showFullTickets)}}function Ya(r,d){if(1&r&&(e.YNc(0,Ra,32,31,"ng-container",68),e.ALo(1,"sortBy"),e.ALo(2,"filter"),e.YNc(3,Ga,3,1,"ng-container",68),e.ALo(4,"sortBy"),e.ALo(5,"filter"),e.YNc(6,Ha,4,2,"ng-container",22)),2&r){const i=e.oxw(5);let a;e.Q6J("ngForOf",e.Dn7(1,3,e.Dn7(2,7,null!==(a=i.halfTickets)&&void 0!==a?a:i.tickets,"sectorId",i.selectedSector),"position","asc")),e.xp6(3),e.Q6J("ngForOf",e.Dn7(4,11,e.Dn7(5,15,i.fullTickets,"sectorId",i.selectedSector),"position","asc")),e.xp6(3),e.Q6J("ngIf",i.fullTickets.length>0)}}function Ja(r,d){if(1&r&&(e.YNc(0,fe,4,9,"div",0),e.YNc(1,Ya,7,19,"ng-template",null,94,e.W1O)),2&r){const i=e.MAs(2),a=e.oxw(4);e.Q6J("ngIf",0==a.hideFullTicket)("ngIfElse",i)}}function Qa(r,d){if(1&r&&(e.YNc(0,$,4,9,"div",0),e.YNc(1,Ja,3,2,"ng-template",null,78,e.W1O)),2&r){const i=e.MAs(2),a=e.oxw(3);e.Q6J("ngIf",1==a.isCupom)("ngIfElse",i)}}const Va=function(){return{width:"200px",margin:"0"}},Yn=function(){return{width:"100px",margin:"0"}},Wa=function(){return{width:"150px",margin:"0"}};function Xa(r,d){1&r&&(e.TgZ(0,"tr",98),e.TgZ(1,"td",99),e._UZ(2,"ngx-skeleton-loader",34),e._UZ(3,"br"),e._UZ(4,"ngx-skeleton-loader",34),e._UZ(5,"br"),e._UZ(6,"ngx-skeleton-loader",34),e.qZA(),e.TgZ(7,"td",100),e._UZ(8,"ngx-skeleton-loader",34),e._UZ(9,"br"),e._UZ(10,"ngx-skeleton-loader",34),e._UZ(11,"br"),e._UZ(12,"ngx-skeleton-loader",34),e._UZ(13,"br"),e._UZ(14,"ngx-skeleton-loader",34),e.qZA(),e.qZA()),2&r&&(e.xp6(2),e.Q6J("theme",e.DdM(7,Va)),e.xp6(2),e.Q6J("theme",e.DdM(8,Yn)),e.xp6(2),e.Q6J("theme",e.DdM(9,Wa)),e.xp6(2),e.Q6J("theme",e.DdM(10,Yn)),e.xp6(2),e.Q6J("theme",e.DdM(11,Yn)),e.xp6(2),e.Q6J("theme",e.DdM(12,Yn)),e.xp6(2),e.Q6J("theme",e.DdM(13,Yn)))}function $a(r,d){1&r&&(e.ynx(0),e.YNc(1,Xa,15,14,"tr",97),e.BQk()),2&r&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,_).constructor(3)))}function ja(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",66),e.TgZ(2,"swiper",67),e.NdJ("swiper",function(g){return e.CHM(i),e.oxw(2).sectorsSwiper=g}),e.YNc(3,l,1,0,void 0,68),e.ALo(4,"sortBy"),e.YNc(5,v,2,2,"ng-container",22),e.qZA(),e.qZA(),e.TgZ(6,"div",69),e.YNc(7,P,3,2,"div",0),e.YNc(8,Qa,3,2,"ng-template",null,70,e.W1O),e.YNc(10,$a,2,2,"ng-container",22),e.qZA(),e.qZA()}if(2&r){const i=e.MAs(9),a=e.oxw(2);e.xp6(2),e.Q6J("config",a.sectorsSwiperConfig),e.xp6(1),e.Q6J("ngForOf",e.Dn7(4,6,a.sectors,"position","asc")),e.xp6(2),e.Q6J("ngIf",!a.event),e.xp6(2),e.Q6J("ngIf",a.event&&null!=a.sectors[a.indexSector].useSeats&&null!=a.sectors[a.indexSector].useMapPlace&&1==a.hasSeatsChart&&1==a.sectors[a.indexSector].useSeats||1==a.sectors[a.indexSector].useMapPlace)("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",!a.event)}}function Ka(r,d){1&r&&(e.TgZ(0,"div",53),e._UZ(1,"app-spinner",101),e.qZA())}function eo(r,d){if(1&r&&(e.TgZ(0,"span",112),e._uU(1,"Comprar "),e._UZ(2,"i",113),e._uU(3),e.ALo(4,"number"),e.qZA()),2&r){const i=e.oxw(5);e.xp6(3),e.hij(" R$ ",e.xi3(4,1,i.amount(),"1.2-2"),"")}}function to(r,d){1&r&&e._uU(0,"Comprar")}function io(r,d){if(1&r&&(e.TgZ(0,"span"),e.YNc(1,eo,5,4,"span",110),e.YNc(2,to,1,0,"ng-template",null,111,e.W1O),e.qZA()),2&r){const i=e.MAs(3),a=e.oxw(4);e.xp6(1),e.Q6J("ngIf",a.amount()>0)("ngIfElse",i)}}function no(r,d){1&r&&e._UZ(0,"app-spinner",114)}const ro=function(r){return[r]};function ao(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",104),e.TgZ(1,"div",105),e.TgZ(2,"input",106),e.NdJ("change",function(g){return e.CHM(i),e.oxw(3).termsOfUseChanged(g)}),e.qZA(),e.TgZ(3,"label",107),e._uU(4," TERMOS DE USO - Voc\xea precisa aceitar os seguintes termos de uso para efetuar sua compra "),e.TgZ(5,"a",108),e._uU(6,"CLIQUE AQUI"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",82),e.TgZ(8,"button",109),e.NdJ("click",function(){e.CHM(i),e.oxw(2);const g=e.MAs(44),f=e.oxw();return"8dc27a43-f22b-4137-a4cf-f1ec083ca6ea"==f.event.id?f.openFormPorsche(g):f.buy()}),e.YNc(9,io,4,2,"span",0),e.YNc(10,no,1,0,"ng-template",null,26,e.W1O),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=e.MAs(11),a=e.oxw(3);e.xp6(2),e.Q6J("checked",a.termsOfUseAccepted),e.xp6(3),e.Q6J("routerLink",e.VKq(4,ro,"8dc27a43-f22b-4137-a4cf-f1ec083ca6ea"==a.event.id?"/terms-of-use-porsche":"/terms-of-use")),e.xp6(4),e.Q6J("ngIf",0==a.loadingSeatsIo)("ngIfElse",i)}}function oo(r,d){if(1&r&&(e.TgZ(0,"span",112),e._uU(1,"Vender "),e._UZ(2,"i",113),e._uU(3),e.ALo(4,"number"),e.qZA()),2&r){const i=e.oxw(5);e.xp6(3),e.hij(" R$ ",e.xi3(4,1,i.amount(),"1.2-2"),"")}}function so(r,d){1&r&&e._uU(0,"Vender")}function lo(r,d){if(1&r&&(e.TgZ(0,"span"),e.YNc(1,oo,5,4,"span",110),e.YNc(2,so,1,0,"ng-template",null,111,e.W1O),e.qZA()),2&r){const i=e.MAs(3),a=e.oxw(4);e.xp6(1),e.Q6J("ngIf",a.amount()>0)("ngIfElse",i)}}function co(r,d){1&r&&e._UZ(0,"app-spinner",114)}function ho(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",115),e.TgZ(1,"button",109),e.NdJ("click",function(){e.CHM(i),e.oxw(2);const g=e.MAs(46);return e.oxw().sell(g)}),e.YNc(2,lo,4,2,"span",0),e.YNc(3,co,1,0,"ng-template",null,26,e.W1O),e.qZA(),e.qZA()}if(2&r){const i=e.MAs(4),a=e.oxw(3);e.xp6(2),e.Q6J("ngIf",0==a.loadingSeatsIo)("ngIfElse",i)}}function uo(r,d){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,ao,12,6,"div",102),e.YNc(2,ho,5,2,"ng-template",null,103,e.W1O),e.qZA()),2&r){const i=e.MAs(3),a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0==a.comissionerMode)("ngIfElse",i)}}function go(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",116),e.TgZ(1,"h4",117),e._uU(2,"Meia entrada"),e.qZA(),e.TgZ(3,"button",118),e.NdJ("click",function(){e.CHM(i);const g=e.oxw(2);return null==g.halfEntryModalInformationRef?null:g.halfEntryModalInformationRef.hide()}),e.TgZ(4,"span",119),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",120),e.TgZ(7,"h2"),e._uU(8,"POL\xcdTICA DE MEIA-ENTRADA"),e.qZA(),e.TgZ(9,"p"),e._uU(10," De acordo com o decreto n\xba 8.537 de 5 de outubro de 2015 que regulamenta a nova lei da meia-entrada (Lei n\xb0 12.933/2013) e o Estatuto da Juventude (Lei n\xb0 12.852/2013), a venda de meia-entrada est\xe1 sujeita a disponibilidade da cota de 40% sobre o total de ingressos dispon\xedvel para o evento. "),e.qZA(),e._UZ(11,"br"),e._UZ(12,"br"),e.TgZ(13,"p"),e.TgZ(14,"b"),e.TgZ(15,"u"),e._uU(16,"Sobre o benef\xedcio da Meia-Entrada"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"ul"),e.TgZ(18,"li"),e._uU(19," O direito \xe0 Meia-Entrada \xe9 garantido por leis federais e regionais. As leis federais t\xeam abrang\xeancia em todo territ\xf3rio nacional e as leis regionais t\xeam efic\xe1cia restrita ao territ\xf3rio onde foram publicadas."),e.qZA(),e.TgZ(20,"li"),e._uU(21,"As leis federais atualmente em vigor garantem o benef\xedcio da Meia entrada para idosos, estudantes, pessoas com defici\xeancia e jovens de baixa renda, com idade entre 15 e 29 anos. As pessoas com direito ao benef\xedcio com base em leis regionais variam de acordo com o Estado ou Munic\xedpio que publicou a lei."),e.qZA(),e.TgZ(22,"li"),e._uU(23," \xc9 obrigat\xf3ria a apresenta\xe7\xe3o no estabelecimento, quando do acesso ao evento, da documenta\xe7\xe3o que comprove o direito ao benef\xedcio de acordo com a legisla\xe7\xe3o em vigor. A Ingresso SA n\xe3o se responsabiliza pela n\xe3o entrada no evento caso n\xe3o ocorra a comprova\xe7\xe3o ou o n\xe3o reconhecimento do benef\xedcio por parte do estabelecimento."),e.qZA(),e.qZA(),e.TgZ(24,"h3"),e._uU(25,"Estatuto do Idoso"),e.qZA(),e.TgZ(26,"ul"),e.TgZ(27,"li"),e._uU(28," De acordo com a Lei Federal no. 10741/2003, mais conhecida como Estatuto do Idoso, as pessoas com idade igual ou superior a 60 anos tem direito \xe0 Meia-Entrada para eventos art\xedsticos e de lazer."),e.qZA(),e.qZA(),e.TgZ(29,"h3"),e._uU(30,"Lei da meia entrada"),e.qZA(),e.TgZ(31,"ul"),e.TgZ(32,"li"),e._uU(33," A Lei Federal n\xba 12933/2013, tamb\xe9m conhecida como Lei da Meia-Entrada, garante o benef\xedcio do pagamento de Meia-Entrada para estudantes, pessoas com defici\xeancia e jovens, de baixa renda, com idade entre 15 e 29 anos."),e.qZA(),e.TgZ(34,"li"),e._uU(35," Somente far\xe3o jus ao benef\xedcio alunos da educa\xe7\xe3o b\xe1sica e educa\xe7\xe3o superior, conforme previsto no T\xedtulo V da Lei no 9.394, de 20.12.1996. A lei n\xe3o estende o benef\xedcio a cursos livres, tais como cursos de ingl\xeas e inform\xe1tica."),e.qZA(),e.TgZ(36,"li"),e._uU(37," Pessoas com defici\xeancia e quando necess\xe1rio, seus acompanhantes, t\xeam direito ao benef\xedcio."),e.qZA(),e.TgZ(38,"li"),e._uU(39,"Jovens de 15 a 29 anos, cuja renda familiar mensal seja de at\xe9 02 sal\xe1rios m\xednimos, desde que inscritos no Cadastro \xdanico para Programas Sociais do Governo Federal, podem adquirir os ingressos com 50% de desconto."),e.qZA(),e.TgZ(40,"li"),e._uU(41,"A concess\xe3o do direito ao benef\xedcio da Meia-Entrada \xe9 assegurada em 40% (quarenta por cento) do total dos ingressos dispon\xedveis para cada evento."),e.qZA(),e.qZA(),e.TgZ(42,"h3"),e._uU(43,"Leis Regionais que garantem a Meia-Entrada"),e.qZA(),e.TgZ(44,"ul"),e.TgZ(45,"li"),e._uU(46,"Alguns Estados e Munic\xedpios publicaram leis com efic\xe1cia regional como, por exemplo, a Lei Estadual (SP) 10.858/01, alterada pela Lei 14.729/12; Lei Municipal (Porto Alegre/RS) 7366/1993, regulamentada pelo Decreto 11.110, a Lei Municipal 9070/2005, de Belo Horizonte, a Lei Estadual (RJ) 3364/2000 e a Lei Municipal (Rio de Janeiro) 3424/2002."),e.qZA(),e.TgZ(47,"li"),e._uU(48,"Verifique a legisla\xe7\xe3o vigente no seu Estado ou Munic\xedpio."),e.qZA(),e.qZA(),e.TgZ(49,"h3"),e._uU(50,"SOBRE OS DOCUMENTOS V\xc1LIDOS"),e.qZA(),e._UZ(51,"br"),e.TgZ(52,"p"),e.TgZ(53,"b"),e._uU(54,"ESTUDANTES"),e.qZA(),e.qZA(),e._UZ(55,"p"),e.TgZ(56,"p"),e._uU(57,"Carteira de Identifica\xe7\xe3o Estudantil (CIE), emitida pela Associa\xe7\xe3o Nacional de P\xf3s-Graduandos (ANPG), Uni\xe3o Nacional dos Estudantes (UNE), Uni\xe3o Brasileira dos Estudantes Secundaristas (Ubes), entidades estudantis estaduais e municipais, Diret\xf3rios Centrais dos Estudantes, Centros e Diret\xf3rios Acad\xeamicos de n\xedvel m\xe9dio e superior, conforme modelo \xfanico nacionalmente padronizado que voc\xea pode conferir neste link. (Art. 3\xba, \xa71\xba do Decreto 8.537/15) "),e._UZ(58,"br"),e._UZ(59,"br"),e._uU(60," Os elementos indispens\xe1veis da CIE s\xe3o (Art. 3\xba, \xa72\xba e 2\xba, VI do Decreto 8.537/15): "),e.qZA(),e.TgZ(61,"p"),e._uU(62,"I - nome completo e data de nascimento do estudante;"),e.qZA(),e._UZ(63,"br"),e.TgZ(64,"p"),e._uU(65,"II - foto recente do estudante;"),e.qZA(),e._UZ(66,"br"),e.TgZ(67,"p"),e._uU(68,"III - nome da institui\xe7\xe3o de ensino na qual o estudante esteja matriculado;"),e.qZA(),e.TgZ(69,"p"),e._uU(70,"IV - grau de escolaridade; e"),e.qZA(),e._UZ(71,"br"),e.TgZ(72,"p"),e._uU(73,"V - data de validade at\xe9 o dia 31 de mar\xe7o do ano subsequente ao de sua expedi\xe7\xe3o."),e.qZA(),e._UZ(74,"br"),e.TgZ(75,"p"),e._uU(76,"Lei Federal 12.933/13, Decreto Federal 8.537/15 e Medida Cautelar Provis\xf3ria concedida pelo STF em 29/12/2015."),e.qZA(),e._UZ(77,"br"),e._UZ(78,"br"),e.TgZ(79,"p"),e.TgZ(80,"b"),e._uU(81,"IDOSOS (pessoas com mais de 60 anos)"),e.qZA(),e.qZA(),e._UZ(82,"br"),e.TgZ(83,"p"),e._uU(84,"Documento de identidade oficial com foto."),e.qZA(),e._UZ(85,"br"),e.TgZ(86,"p"),e._uU(87,"Lei Federal 10.741/03 (Art. 23). "),e.qZA(),e._UZ(88,"br"),e._UZ(89,"br"),e.TgZ(90,"p"),e.TgZ(91,"b"),e._uU(92,"PESSOAS COM DEFICI\xcaNCIA"),e.qZA(),e._uU(93," (e acompanhante, quando necess\xe1rio)"),e.qZA(),e._UZ(94,"br"),e.TgZ(95,"p"),e._uU(96,"Cart\xe3o de Benef\xedcio de Presta\xe7\xe3o Continuada da Assist\xeancia Social da Pessoa com Defici\xeancia ou de documento emitido pelo Instituto Nacional do Seguro Social - INSS que ateste a aposentadoria de acordo com os crit\xe9rios estabelecidos na Lei Complementar n\xba 142, de 8 de maio de 2013. No momento de utiliza\xe7\xe3o dos ingressos, esses documentos dever\xe3o estar acompanhados de documento de identidade oficial com foto. (Art. 6\xba do Decreto 8.537/15)"),e.qZA(),e._UZ(97,"br"),e._UZ(98,"br"),e._uU(99," Lei Federal 12.933/13 e Decreto Federal 8.537/15 "),e._UZ(100,"br"),e._UZ(101,"br"),e.TgZ(102,"p"),e.TgZ(103,"b"),e._uU(104,"MENORES DE 21 ANOS"),e.qZA(),e._uU(105," (verifique a lei do seu estado/munic\xedpio antes de realizar sua compra)"),e.qZA(),e._UZ(106,"br"),e.TgZ(107,"p"),e._uU(108,"Carteira de identidade ou documento com foto v\xe1lido."),e.qZA(),e._UZ(109,"br"),e._UZ(110,"br"),e.TgZ(111,"p"),e.TgZ(112,"b"),e._uU(113,"PROFFISIONAIS DA EDUCA\xc7\xc3O"),e.qZA(),e.qZA(),e._UZ(114,"br"),e.TgZ(115,"p"),e._uU(116,"Lei Estadual RJ n\xb0 3.364/00 e Lei Municipal BH n\xb0 9.070/2005"),e.qZA(),e.TgZ(117,"p"),e._uU(118,"RJ - PROFESSORES E PROFISSIONAIS da rede p\xfablica municipal de ensino do Rio de Janeiro."),e.qZA(),e.TgZ(119,"p"),e._uU(120,"Carteira funcional emitida pela Secretaria Municipal de Educa\xe7\xe3o do Rio de Janeiro."),e.qZA(),e.TgZ(121,"p"),e._uU(122,"Leis Municipais n\xb0 3.424/02, com altera\xe7\xf5es introduzidas pela Lei Municipal n\xba 5.844/15."),e.qZA(),e._UZ(123,"br"),e._UZ(124,"br"),e.TgZ(125,"p"),e._uU(126,"SP - PROFESSORES, DIRETORES, COORDENADORES PEDAG\xd3GICOS, SUPERVISORES E TITULARES de cargos do quadro de apoio das escolas das redes estadual e municipais de S\xe3o Paulo "),e.qZA(),e._UZ(127,"br"),e._UZ(128,"br"),e.TgZ(129,"p"),e._uU(130,"Carteira funcional emitida pela Secretaria da Educa\xe7\xe3o de S\xe3o Paulo ou holerite acompanhado de documento oficial com foto."),e.qZA(),e._UZ(131,"br"),e._UZ(132,"br"),e.TgZ(133,"p"),e._uU(134,"Lei Estadual n\xb0 14.729/12, com altera\xe7\xf5es introduzidas pela Lei Estadual n\xb015.298/14."),e.qZA(),e._UZ(135,"br"),e._UZ(136,"br"),e.TgZ(137,"p"),e.TgZ(138,"b"),e._uU(139,"DOADORES DE SANGUE"),e.qZA(),e._uU(140," (registrados nos bancos de sangue dos hospitais estaduais)"),e.qZA(),e._UZ(141,"br"),e.TgZ(142,"p"),e._uU(143,"Existem leis municipais e estaduais que regulamentam o benef\xedcio de meia-entrada para doadores de sangue. Consulte a legisla\xe7\xe3o do munic\xedpio onde o cinema se localiza e, confirmado o direito de uso, voc\xea poder\xe1 comprar meia-entrada pelo nosso site, bastando inserir o n\xfamero do RG no momento da compra e apresentar a carteira de doador de sangue na entrada da sala."),e.qZA(),e._UZ(144,"br"),e._UZ(145,"br"),e.TgZ(146,"p"),e.TgZ(147,"b"),e._uU(148,"JOVENS DE BAIXA RENDA"),e.qZA(),e.qZA(),e._UZ(149,"br"),e.TgZ(150,"p"),e._uU(151,"Carteira de Identidade Jovem emitida pela Secretaria Nacional de Juventude, acompanhada de documento de identidade oficial com foto. (Art. 5\xba do Decreto 8.537/15)"),e.qZA(),e._UZ(152,"br"),e.TgZ(153,"p"),e._uU(154,"Lei Federal 12.933/13 e Decreto Federal 8.537/15"),e.qZA(),e._UZ(155,"br"),e._UZ(156,"br"),e.qZA()}}function po(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",116),e.TgZ(1,"h4",117),e._uU(2,"Informa\xe7\xf5es do Propriet\xe1rio e do ve\xedculo"),e.qZA(),e.TgZ(3,"button",118),e.NdJ("click",function(){e.CHM(i);const g=e.oxw(2);return null==g.openFormPorscheModalRef?null:g.openFormPorscheModalRef.hide()}),e.TgZ(4,"span",119),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",120),e._uU(7," Formul\xe1rio de cadastro do propriet\xe1rio (informa\xe7\xf5es necess\xe1rias) "),e.TgZ(8,"app-form-porsche-event",121),e.NdJ("sendPorscheOwner",function(g){return e.CHM(i),e.oxw(2).getPorscheOwner(g)}),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(2);e.xp6(8),e.Q6J("quantityTickets",i.ownerPorscheTicketQuantity)}}function _o(r,d){1&r&&(e.TgZ(0,"h4",117),e._uU(1,"Titular dos ingressos"),e.qZA())}function mo(r,d){1&r&&(e.TgZ(0,"h4",117),e._uU(1,"Forma de Pagamento"),e.qZA())}function fo(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",125),e.TgZ(1,"div",64),e.TgZ(2,"div"),e.TgZ(3,"form",126),e.NdJ("ngSubmit",function(){return e.CHM(i),e.oxw(3).getHolder()}),e.TgZ(4,"div",125),e.TgZ(5,"div",127),e.TgZ(6,"div",128),e.TgZ(7,"input",129),e.NdJ("keyup",function(g){return e.CHM(i),e.oxw(3).checkCustomerRegister(g)}),e.qZA(),e.TgZ(8,"label",130),e._uU(9,"CPF"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",127),e.TgZ(11,"div",128),e._UZ(12,"input",131),e.TgZ(13,"label",130),e._uU(14,"Email"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",127),e.TgZ(16,"div",128),e._UZ(17,"input",132),e.TgZ(18,"label",130),e._uU(19,"Nome completo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",127),e.TgZ(21,"div",128),e._UZ(22,"input",133),e.TgZ(23,"label",130),e._uU(24,"Telefone"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",134),e.TgZ(26,"button",135),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).getHolder()}),e._uU(27,"Continuar"),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(3);e.xp6(3),e.Q6J("formGroup",i.formHolder),e.xp6(19),e.Q6J("dropSpecialCharacters",!1)}}function vo(r,d){if(1&r&&(e.TgZ(0,"p",44),e._uU(1),e.qZA()),2&r){const i=e.oxw().$implicit;e.xp6(1),e.hij("Lugar: ",i.placeName,"")}}function xo(r,d){if(1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"td",152),e.TgZ(2,"p",153),e._uU(3),e.qZA(),e.YNc(4,vo,2,1,"p",86),e.TgZ(5,"p",44),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"td",154),e._uU(8),e.qZA(),e.TgZ(9,"td",155),e._uU(10),e.ALo(11,"number"),e.qZA(),e.qZA()),2&r){const i=d.$implicit,a=e.oxw(4);e.xp6(3),e.Oqu(i.name),e.xp6(1),e.Q6J("ngIf",i.placeName),e.xp6(2),e.Oqu(i.batch),e.xp6(2),e.Oqu(a.countTickets(i.id,i.placeName)),e.xp6(2),e.hij("R$ ",e.xi3(11,5,a.amount(i),"1.2-2"),"")}}function yo(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"tr",147),e.NdJ("click",function(){e.CHM(i);const g=e.oxw().$implicit;e.oxw(3);const f=e.MAs(48),k=e.oxw();return k.selectedPaymentMethod=g.id,k.openPaymentConfirmationModal(f)}),e.TgZ(1,"td",148),e._uU(2,"Dinheiro"),e.qZA(),e.TgZ(3,"td",149),e._UZ(4,"i",150),e.qZA(),e.qZA()}}function bo(r,d){if(1&r&&(e.ynx(0),e.YNc(1,yo,5,0,"tr",156),e.BQk()),2&r){const i=d.$implicit;e.xp6(1),e.Q6J("ngIf","Dinheiro"==i.name)}}function Co(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"button",135),e.NdJ("click",function(){e.CHM(i);const g=e.oxw(4);return null==g.swiper?null:g.swiper.slideNext()}),e._uU(1,"Continuar"),e.qZA()}}function To(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",125),e.TgZ(1,"div",136),e.TgZ(2,"p",137),e._uU(3,"Detalhes da compra"),e.qZA(),e.TgZ(4,"div",138),e.TgZ(5,"div",139),e.TgZ(6,"table",140),e.TgZ(7,"tbody"),e.TgZ(8,"tr"),e.TgZ(9,"th",141),e._uU(10,"Ingresso"),e.qZA(),e.TgZ(11,"th",142),e._uU(12,"Qtd"),e.qZA(),e.TgZ(13,"th",143),e._uU(14,"Valor"),e.qZA(),e.qZA(),e.YNc(15,xo,12,8,"tr",68),e.TgZ(16,"tr"),e.TgZ(17,"td",144),e.TgZ(18,"p",145),e._uU(19),e.ALo(20,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",125),e.TgZ(22,"div",64),e.TgZ(23,"div"),e.TgZ(24,"table",146),e.TgZ(25,"tbody"),e.YNc(26,bo,2,1,"ng-container",68),e.TgZ(27,"tr",147),e.NdJ("click",function(){e.CHM(i);const g=e.oxw(3);return g.selectedPaymentMethod="",g.createSellOrder()}),e.TgZ(28,"td",148),e._uU(29,"Pix ou Cart\xe3o"),e.qZA(),e.TgZ(30,"td",149),e._UZ(31,"i",150),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",134),e.YNc(33,Co,2,0,"button",151),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(3);e.xp6(15),e.Q6J("ngForOf",i.allTickets),e.xp6(4),e.hij("Total:\xa0R$ ",e.xi3(20,4,i.amount(),"1.2-2"),""),e.xp6(7),e.Q6J("ngForOf",i.event.paymentMethods),e.xp6(7),e.Q6J("ngIf",i.paymentMethod)}}function wo(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"p",158),e._uU(2,"Copie e envie o link de pagamento para o cliente"),e.qZA(),e._UZ(3,"input",159),e.TgZ(4,"div",160),e.TgZ(5,"button",161),e.NdJ("click",function(){return e.CHM(i),e.oxw(4).copySellLink()}),e._uU(6,"copiar link"),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(4);e.xp6(3),e.Q6J("value","Finalize o seu pagamento em https://www.ingressosa.com/event/"+i.event.id+"?rfr="+i.orderId)}}function So(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"p",158),e._uU(1,"Copie e envie o link do voucher para o cliente"),e.qZA(),e._UZ(2,"input",159),e.TgZ(3,"div",160),e.TgZ(4,"button",161),e.NdJ("click",function(){return e.CHM(i),e.oxw(4).copySellLink()}),e._uU(5,"copiar link"),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(4);e.xp6(2),e.Q6J("value","https://voucher.ingressosa.com/voucher?id1="+i.orderId)}}function Po(r,d){if(1&r&&(e.YNc(0,wo,7,1,"div",0),e.YNc(1,So,6,1,"ng-template",null,157,e.W1O)),2&r){const i=e.MAs(2),a=e.oxw(3);e.Q6J("ngIf",0==a.paymentCompleted)("ngIfElse",i)}}function Ao(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",122),e.YNc(1,_o,2,0,"h4",123),e.YNc(2,mo,2,0,"h4",123),e.TgZ(3,"button",118),e.NdJ("click",function(){e.CHM(i);const g=e.oxw(2);return null==g.titularModalRef?null:g.titularModalRef.hide()}),e.TgZ(4,"span",119),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",120),e.TgZ(7,"swiper",124),e.NdJ("swiper",function(g){return e.CHM(i),e.oxw(2).onSwiper(g)}),e.YNc(8,fo,28,2,"ng-template",75),e.YNc(9,To,34,7,"ng-template",75),e.YNc(10,Po,3,2,"ng-template",75),e.qZA(),e.qZA()}if(2&r){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0==(null==i.swiper?null:i.swiper.activeIndex)),e.xp6(1),e.Q6J("ngIf",1==(null==i.swiper?null:i.swiper.activeIndex)),e.xp6(5),e.Q6J("autoHeight",!0)("allowTouchMove",!1)}}function ko(r,d){if(1&r){const i=e.EpF();e.TgZ(0,"div",122),e.TgZ(1,"h3"),e._uU(2,"Confirmar que o pagamento foi realizado?"),e.qZA(),e.qZA(),e.TgZ(3,"div",120),e.TgZ(4,"p"),e._uU(5,"Ao clicar em sim, um voucher ser\xe1 gerado e o pagamento ser\xe1 conclu\xeddo"),e.qZA(),e.qZA(),e.TgZ(6,"div",162),e.TgZ(7,"button",163),e.NdJ("click",function(){e.CHM(i);const g=e.oxw(2);return g.createSellOrder(),null==g.openPaymentConfirmationModalRef?null:g.openPaymentConfirmationModalRef.hide()}),e._uU(8,"SIM"),e.qZA(),e.TgZ(9,"button",164),e.NdJ("click",function(){e.CHM(i);const g=e.oxw(2);return null==g.openPaymentConfirmationModalRef?null:g.openPaymentConfirmationModalRef.hide()}),e._uU(10,"N\xc3O"),e.qZA(),e.qZA()}}function Io(r,d){if(1&r&&(e.YNc(0,Qr,3,2,"div",3),e.YNc(1,Vr,2,0,"div",3),e.TgZ(2,"div",4),e.TgZ(3,"div",5),e.TgZ(4,"div",6),e.YNc(5,Wr,2,1,"h2",7),e.YNc(6,vn,1,2,"ngx-skeleton-loader",8),e.qZA(),e.qZA(),e.TgZ(7,"div",9),e.TgZ(8,"div",10),e.TgZ(9,"div",5),e.YNc(10,se,7,3,"div",11),e.YNc(11,ta,2,1,"div",0),e.YNc(12,ra,5,2,"ng-template",null,12,e.W1O),e.TgZ(14,"div",13),e.TgZ(15,"div",14),e.TgZ(16,"div",15),e.YNc(17,aa,2,0,"h5",16),e.YNc(18,Hn,1,2,"ngx-skeleton-loader",8),e.qZA(),e.TgZ(19,"div",17),e.YNc(20,oa,1,1,"iframe",18),e.YNc(21,sa,1,2,"ngx-skeleton-loader",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",19),e.TgZ(23,"div",5),e.TgZ(24,"div",13),e.TgZ(25,"div",14),e.TgZ(26,"div",20),e.TgZ(27,"div",21),e.YNc(28,ma,13,11,"ng-container",22),e.YNc(29,xa,4,4,"ng-container",22),e.qZA(),e.TgZ(30,"div",23),e.YNc(31,ya,5,3,"ng-container",22),e.YNc(32,Ca,4,4,"ng-container",22),e.qZA(),e.YNc(33,ka,6,4,"div",0),e.YNc(34,n,3,2,"ng-template",null,24,e.W1O),e.YNc(36,o,3,2,"div",25),e.YNc(37,ja,11,10,"div",0),e.YNc(38,Ka,2,0,"ng-template",null,26,e.W1O),e.qZA(),e.YNc(40,uo,4,2,"div",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(41,go,157,0,"ng-template",null,27,e.W1O),e.YNc(43,po,9,1,"ng-template",null,28,e.W1O),e.YNc(45,Ao,11,4,"ng-template",null,29,e.W1O),e.YNc(47,ko,11,0,"ng-template",null,30,e.W1O)),2&r){const i=e.MAs(13),a=e.MAs(35),g=e.MAs(39),f=e.oxw();e.Q6J("ngIf",0==f.fengIntegration&&null!=f.event.banner&&""!==f.event.banner),e.xp6(1),e.Q6J("ngIf","ecd5d096-2c15-4d93-a670-515b525180d0"==f.event.id),e.xp6(4),e.Q6J("ngIf",f.event),e.xp6(1),e.Q6J("ngIf",!f.event),e.xp6(4),e.Q6J("ngIf",f.galleryImages),e.xp6(1),e.Q6J("ngIf","aabf03d4-1064-42fb-ab42-89dcc1b79adb"!==(null==f.event?null:f.event.id))("ngIfElse",i),e.xp6(6),e.Q6J("ngIf",f.event),e.xp6(1),e.Q6J("ngIf",!f.event),e.xp6(2),e.Q6J("ngIf",f.event),e.xp6(1),e.Q6J("ngIf",!f.event),e.xp6(7),e.Q6J("ngIf",f.event),e.xp6(1),e.Q6J("ngIf",!f.event),e.xp6(2),e.Q6J("ngIf",f.event),e.xp6(1),e.Q6J("ngIf",!f.event),e.xp6(1),e.Q6J("ngIf",0==f.fengIntegration)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",f.event&&f.event.allowMapV2),e.xp6(1),e.Q6J("ngIf",0==f.loading)("ngIfElse",g),e.xp6(3),e.Q6J("ngIf",f.event)}}const Eo=[{path:"",component:(()=>{class r{constructor(i,a,g,f,k,O,U,G,Q,de,oe,Fe){this.modalService=i,this.eventService=a,this.orderService=g,this.alertService=f,this.authService=k,this.activatedRoute=O,this.router=U,this.myProfileService=G,this.formBuilder=Q,this.formHelper=de,this.JsonLDService=oe,this.mapV2Service=Fe,this.indexSector=0,this.sectorsSwiperConfig=_i.i.sectors,this.galleryOptions=it.gallery,this.buyInOtherSector=!1,this.customerName="",this.ticketCupom="",this.ticketCupomError="",this.unsubscribe$=new Zt.x,this.hasSeatsChart=!1,this.selectedSeats=[],this.loadingSeatsIo=!1,this.totalPriceSeats=0,this.comissaryId=null,this.loading=!1,this.showFullTickets=!1,this.hideFullTicket=!1,this.isCupom=!1,this.comissionerMode=!1,this.ticketsWithSeats=[],this.allTickets=[],this.orderId="",this.selectedTickets=[],this.paymentCompleted=!1,this.numberOrder="",this.ticketOrderSubmit=[],this.eventClosed=!1,this.selectedPaymentMethodId="",this.selectedPaymentMethod="",this.ownerPorscheTicket=!1,this.ownerPorscheTicketQuantity=0,this.siteFeng="feng.meubilhete.com"==document.location.host,this.fengIntegration=!1,this.fengPlans=[],this.fengDiscountKey="",this.fengDiscountValue=0,this.quantityPctValuePartner=0,this.quantityPctValueInvited=0,this.quantityPctValueExtra=0,this.fengEndedSells=!1,this.quantityPctValuePartnerFixed=0,this.quantityPctValueInvitedFixed=0,this.quantityPctValueExtraFixed=0,this.ticketIdForOnlyOneCustomer=["188f2b98-1c05-44be-985d-4694f9d2730e","5e28efdf-cb41-4f58-8ff8-ab67ecfbc158","82c075cc-8fec-47d1-9eb3-4ae0f4747285","8fd5498d-713b-4e44-9cdd-0d3162194d82","c82df187-7620-4a12-a272-80f7fc818ec8","eb9e3da0-4be1-485b-958a-9b1e0640798b"]}ngOnInit(){this.checkFeng(),this.loadEvent(),this.loadScript(),this.loadScript2(),null!=this.authService.getCustomer()&&null!=this.authService.getCustomer().modeComissioner&&1==this.authService.getCustomer().modeComissioner&&(this.comissionerMode=!0),this.formHolder=this.formBuilder.group({doc:["",H.kI.required],email:["",[H.kI.required,H.kI.email]],phone:[""],name:["",H.kI.required]},{validators:[this.formHelper.testCpf,this.formHelper.testFullName]}),this.checkNewIntegration()}ngOnDestroy(){var i;if(this.unsubscribe$.next(null),this.unsubscribe$.complete(),null!=window){if("1d1519c9-0997-4de7-a5d8-b6674a90c512"==(null===(i=this.event)||void 0===i?void 0:i.id))for(let a=0;a<document.getElementsByTagName("script").length;a++)null!=document.getElementsByTagName("script")[a].src.split("id=")[1]&&"AW-11124555266"==document.getElementsByTagName("script")[a].src.split("id=")[1].split("&")[0]&&(document.getElementsByTagName("script")[a].src="");for(let a=0;a<document.getElementsByTagName("script").length;a++)null!=document.getElementsByTagName("script")[a].id&&"CleverCoreLoader68593"==document.getElementsByTagName("script")[a].id&&(document.getElementsByTagName("script")[a].src="",document.getElementsByTagName("script")[a].id="")}}checkComissioner(){var i;let a=this.activatedRoute.snapshot.queryParams.rfr;null!=a&&""!==a&&(this.comissaryId=a,this.authService.isLoggednIn()?this.router.navigateByUrl("payment-method/"+this.activatedRoute.snapshot.paramMap.get("id")+"?rfr="+a):this.router.navigateByUrl("auth/login?redirect=checkout&eventId="+(null===(i=this.event)||void 0===i?void 0:i.id)+"&rfr="+a))}checkNewIntegration(){let i=this.activatedRoute.snapshot.queryParams.rfr,a=this.activatedRoute.snapshot.queryParams.url;null!=i&&""!==i&&null!=a&&""!==a&&this.eventService.loadEventOrder(i).subscribe(g=>{this.alertService.toast({icon:"success",title:"Usu\xe1rio logado",text:"Usu\xe1rio logado"});let f=g[0].customer;f.phones=g[0].customer.phones,this.authService.saveCustomer(f),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigateByUrl("payment-method/"+this.activatedRoute.snapshot.paramMap.get("id")+"?rfr="+i+"&url=stisa")})})}selectSector(i){var a;const g=null===(a=this.sectors)||void 0===a?void 0:a.findIndex(f=>f.id==i);-1!=g&&(this.selectedSector=i,this.indexSector=g,this.selectedSeats=[],this.totalPriceSeats=0)}mapV2Change(i){var a,g;if(this.selectedSector=i.sectorId,this.indexSector=this.sectors.findIndex(k=>k.id==i.sectorId),null===(a=this.sectorsSwiper)||void 0===a||a.slideTo(this.indexSector),null===(g=this.sectorsSwiper)||void 0===g||g.el.scrollIntoView({block:"start",inline:"end",behavior:"smooth"}),window.scrollTo({top:this.sectorsSwiper.el.offsetTop+80,behavior:"smooth"}),i.place&&i.ticket){const k=this.tickets.find(O=>O.id==i.ticket.id);if(k)if(k.mapv2Id=i.place.mapId,k.mapv2Row=i.place.row,k.mapv2Number=i.place.number,i.place.isReserved){const O={target:k,qty:1,action:"add"};for(let U=0;U<i.place.quantity;U++)this.qtyChanged(O),O.qty++}else{const O={target:k,qty:i.place.quantity,action:"remove"};for(let U=0;U<i.place.quantity;U++)this.qtyChanged(O),O.qty--}}}openPaymentConfirmationModal(i){this.openPaymentConfirmationModalRef=this.modalService.show(i)}getHolder(){var i;"INVALID"!=this.formHolder.status?null===(i=this.swiper)||void 0===i||i.slideNext():this.alertService.toast({icon:"error",title:"Erro",text:"Preencha todos os campos antes de continuar"})}checkCustomerRegister(i){console.log(i.srcElement.value),14==i.srcElement.value.length&&this.myProfileService.checkCustomerRegisterWithCpf(i.srcElement.value).subscribe(a=>{a.length>=1&&(this.formHolder.get("name").setValue(a[0].name),this.formHolder.get("email").setValue(a[0].email),this.formHolder.get("phone").setValue(a[0].phones[0]))})}checkFeng(){let i=this.activatedRoute.snapshot.queryParams.session;null!=i&&""!==i&&this.myProfileService.checkToken(i,this.activatedRoute.snapshot.paramMap.get("id")).pipe((0,Jt.K)(a=>(this.alertService.toast({icon:"error",title:"Erro",text:a.error.error.errors[0].msg}),(0,mi.of)(a)))).subscribe(a=>{this.alertService.toast({icon:"success",title:"Usu\xe1rio feng logado",text:"Us\xe1rio logado"});let g=a.user;g.token=a.token,g.phones=a.user.phones,g.fengIntegration=!0,this.authService.saveCustomer(g),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["event/"+this.activatedRoute.snapshot.paramMap.get("id")])})})}get termsOfUseAccepted(){return this.orderService.termsOfUseAccepted()}get halfTickets(){var i;const a=null===(i=this.tickets)||void 0===i?void 0:i.filter(g=>"Half"==g.type);return null!=a?a:[]}get fullTickets(){var i;const a=null===(i=this.tickets)||void 0===i?void 0:i.filter(g=>"Full"==g.type);return null!=a?a:[]}amount(i){return this.orderService.amount(i)}countTickets(i,a){return this.orderService.countTickets(i)}changeQty(i){var a;(null===(a=this.event)||void 0===a?void 0:a.allowMapV2)&&this.mapV2Service.hasPlaces(this.selectedSector)?(this.mapV2Service.setView(m.b.PLACES),this.mapV2Service.show()):this.qtyChanged(i)}qtyChanged(i){if("add"==i.action){if(this.ticketIdForOnlyOneCustomer.includes(i.target.id))return;if(1==this.isCupom&&null!=i.target.ticketTagsQuantity&&0!==i.target.ticketTagsQuantity&&i.qty+1>i.target.ticketTagsQuantity)return void this.alertService.toast({icon:"error",title:"Erro",text:"A quantidade de ingressos \xe9 mais do que a quantidade dispon\xedvel. Voc\xea tem "+i.target.ticketTagsQuantity+" ingresso(s) para o cupom "+this.ticketCupom});if(1==this.fengIntegration){if(i.target.fengPlansPartner&&i.target.fengPlansPartner.length>0){if(0==this.quantityPctValuePartner)return this.alertService.toast({icon:"error",title:"Erro",text:"N\xe3o h\xe1 mais este desconto dispon\xedvel"}),void(this.quantityPctValuePartner=0)}else if(i.target.fengPlansExtra&&i.target.fengPlansExtra.length>0){if(0==this.quantityPctValueExtra)return void this.alertService.toast({icon:"error",title:"Erro",text:"N\xe3o h\xe1 mais este desconto dispon\xedvel"})}else if(i.target.fengPlansInvited&&i.target.fengPlansInvited.length>0&&(console.log(this.quantityPctValueInvited),0==this.quantityPctValueInvited))return void this.alertService.toast({icon:"error",title:"Erro",text:"N\xe3o h\xe1 mais este desconto dispon\xedvel"});for(let g=0;g<this.orderService.getAllTickets().length;g++)if(this.orderService.getAllTickets()[g].sectorId!==i.target.sectorId)return void this.alertService.toast({icon:"error",title:"Erro",text:"N\xe3o pode comprar ingressos em setores diferentes."})}}let a={batch:i.target.batch,description:i.target.description,fee:i.target.fee,fees:i.target.fees,ownerPorscheTicket:"f66f2e5c-58a0-4531-b3ef-035e3b5bb7af"==i.target.id,id:i.target.id,ticketTags:this.ticketCupom,ticketDateId:i.target.ticketDateId,name:i.target.name,position:i.target.position,price:i.target.price,fengPlansExtra:i.target.fengPlansExtra,fengPlansInvited:i.target.fengPlansInvited,fengPlansPartner:i.target.fengPlansPartner,qty:0==i.qty?i.qty+1:i.qty,lotId:i.target.lotId,sectorId:i.target.sectorId,unitPrice:i.target.priceks,blacklist:i.target.blacklist,mapv2Id:i.target.mapv2Id,mapv2Row:i.target.mapv2Row,mapv2Number:i.target.mapv2Number};1==this.fengIntegration&&("add"==i.action&&1==this.canNewFengDiscount(i.target)&&this.changeCountFengDiscount(i.target,i.qty,i.action),"remove"==i.action&&this.changeCountFengDiscount(i.target,i.qty,i.action)),"add"==i.action?this.orderService.addTicket(a):this.orderService.removeTicket(i.target.id)}termsOfUseChanged(i){this.orderService.setTermsOfUse(i.target.checked)}buy(){var i;let a=[];this.orderService.getAllTickets().forEach(g=>{(null==g.isMapPlace||null==g.isMapPlace||0==g.isMapPlace)&&(a[a.length]=g)}),this.orderService.termsOfUseAccepted()?0==this.orderService.countTickets()?this.alertService.toast({icon:"error",title:"Selecione os ingressos",text:"Selecione no m\xednimo 1 ingresso para continuar."}):this.orderService.existsBlacklist()?this.alertService.toast({icon:"error",title:"Blacklist",text:`CPF bloqueado para adquirir o ingresso. ${this.orderService.ticketNameBlacklist()}`}):(null===(i=this.event)||void 0===i?void 0:i.limitCPF)&&a.length>this.event.limitCPF?this.alertService.toast({icon:"error",title:"Limite de ingressos excedido",text:`S\xf3 \xe9 permitido ${this.event.limitCPF} ingressos por CPF.`}):this.authService.isLoggednIn()?this.router.navigateByUrl(null!==this.comissaryId?"/payment-method?rfr="+this.comissaryId:"/payment-method/"):this.router.navigateByUrl("/auth/login?redirect=checkout"):this.alertService.toast({icon:"error",title:"Aceite os termos de uso",text:"Voc\xea precisa aceitar os termos de uso para prosseguir."})}openHalfEntryModalInformation(i){this.halfEntryModalInformationRef=this.modalService.show(i,{class:"modal-dialog-scrollable modal-lg"})}openFormPorsche(i){var a;let g=this.orderService.getAllTickets().filter(f=>{if("f66f2e5c-58a0-4531-b3ef-035e3b5bb7af"==f.id)return f});g.length>=1?(this.ownerPorscheTicket=!0,this.ownerPorscheTicketQuantity=g.length):this.ownerPorscheTicket=!1,1==this.ownerPorscheTicket?this.orderService.termsOfUseAccepted()?0==this.orderService.countTickets()?this.alertService.toast({icon:"error",title:"Selecione os ingressos",text:"Selecione no m\xednimo 1 ingresso para continuar."}):this.orderService.existsBlacklist()?this.alertService.toast({icon:"error",title:"Blacklist",text:`CPF bloqueado para adquirir o ingresso. ${this.orderService.ticketNameBlacklist()}`}):(null===(a=this.event)||void 0===a?void 0:a.limitCPF)&&this.orderService.countTickets()>this.event.limitCPF?this.alertService.toast({icon:"error",title:"Limite de ingressos excedido",text:"S\xf3 \xe9 permitido "+this.event.limitCPF+" ingressos por CPF."}):this.openFormPorscheModalRef=this.modalService.show(i,{class:"modal-dialog-scrollable"}):this.alertService.toast({icon:"error",title:"Aceite os termos de uso",text:"Voc\xea precisa aceitar os termos de uso para prosseguir."}):this.buy()}getPorscheOwner(i){var a;1==i&&(this.buy(),null===(a=this.openFormPorscheModalRef)||void 0===a||a.hide())}loadOrder(){this.orderService.currentOrder.pipe((0,Ke.R)(this.unsubscribe$)).subscribe(i=>{this.order=i,this.eventName=i.event.name,this.selectedTickets=this.order.tickets.filter((a,g,f)=>g===f.findIndex(k=>k.id===a.id)&&null==a.placeName),this.ticketsWithSeats=this.order.tickets.filter((a,g,f)=>g===f.findIndex(k=>k.placeName===a.placeName)&&void 0!==a.placeName),this.order.tickets.forEach((a,g)=>{null!=a.orderMapReserveCode&&(this.orderMapReserveCode=a.orderMapReserveCode)}),this.allTickets.length=0,this.allTickets=this.allTickets.concat(this.selectedTickets,this.ticketsWithSeats).filter(a=>void 0!==a)})}sell(i){0==this.orderService.countTickets()?this.alertService.toast({icon:"error",title:"Selecione os ingressos",text:"Selecione no m\xednimo 1 ingresso para continuar."}):(this.loadOrder(),this.titularModalRef=this.modalService.show(i))}createSellOrder(){this.allTickets.forEach(a=>{for(let g=0;g<this.countTickets(a.id,a.placeName);g++)this.ticketOrderSubmit[this.ticketOrderSubmit.length]={ticketName:a.name,lotName:a.batch,ticketDateId:a.ticketDateId,lotId:a.lotId,quantity:a.qty,placeName:a.placeName,placeId:a.placeId,placeHoldToken:a.placeHoldToken,unitPrice:parseFloat((a.price+a.fee).toFixed(2)),unitPriceWithoutFee:a.price,customer:{name:this.formHolder.get("name").value,doc:this.formHolder.get("doc").value,email:this.formHolder.get("email").value,phones:[this.formHolder.get("phone").value.trim()],loading:!1},customerRequired:null,comissionerId:this.authService.getCustomer().comissionerId}});let i={order:{amount:parseFloat(this.amount().toFixed(2)),ticketTags:this.orderService.getOrderEvent().ticketTags,orderMapReserveCode:this.orderMapReserveCode,paymentInChange:!0},tickets:this.ticketOrderSubmit,paymentMethods:""==this.selectedPaymentMethod?[]:[{amount:parseFloat(this.amount().toFixed(2)),installments:1,paymentMethodId:this.selectedPaymentMethod}],customer:{id:this.authService.getCustomer().id,name:this.authService.getCustomer().name,doc:this.authService.getCustomer().doc,email:this.authService.getCustomer().email,phones:[this.authService.getCustomer().phone[0]]}};this.loading=!0,this.orderService.sendPayment(i).pipe((0,Jt.K)(a=>(this.loading=!1,this.orderService.removeAllTickets(),this.allTickets.length=0,this.alertService.toast({icon:"error",title:"Erro",text:a.error.errors[0].msg}),this.ticketOrderSubmit.length=0,(0,mi.of)(a)))).subscribe(a=>{var g,f;0==a.payments.length&&(this.ticketOrderSubmit.length=0,this.paymentCompleted=!1,null===(g=this.swiper)||void 0===g||g.slideNext(),this.orderId=a.order.id,this.numberOrder=a.order.autoincrement,this.loading=!1),0!==a.payments.length&&1==a.payments[0].success&&(null===(f=this.swiper)||void 0===f||f.slideNext(),this.orderId=a.order.id,this.numberOrder=a.order.autoincrement,this.paymentCompleted=!0,this.ticketOrderSubmit.length=0,this.loading=!1),this.loading=!1})}copySellLink(){document.getElementById("selllink").select(),document.execCommand("copy")}onSwiper(i){this.swiper=i}holdersSubmitted(i){var a;i.preventDefault(),null===(a=this.swiper)||void 0===a||a.slideNext()}cardSubmitted(i){var a;i.preventDefault(),null===(a=this.swiper)||void 0===a||a.slideTo(0)}getSelectedSeats(i){this.selectedSeats.length+1<this.event.limitCPF&&(i.ticket={description:null,fee:i.ticket.fee,fees:i.ticket.fees,id:i.ticket.id,ticketDateId:i.ticket.ticketDateId,lotId:i.ticket.lotId,name:i.ticket.name,position:1,price:i.ticket.price,qty:1,isSeatsIo:!0,objectType:i.selectedSeat.objectType,placeHoldToken:i.selectedSeat.chart.holdToken,sectorId:i.ticket.sectorId,placeName:i.selectedSeat.id},this.selectedSeats[this.selectedSeats.length]={ticketId:i.ticket.id,ticketDateId:i.ticket.ticketDateId,lotId:i.ticket.lotId,batchName:i.ticket.batch,ticketName:i.ticket.name,quantity:1,ticketTags:this.ticketCupom,price:i.ticket.price,fees:i.ticket.fees,customer:null,placeId:null,isSeatsIo:!0,objectType:i.selectedSeat.objectType,placeName:i.selectedSeat.id,placeHoldToken:i.selectedSeat.chart.holdToken,fee:i.ticket.fee},this.calculateTotalPricesSeats("+"+(i.ticket.price+i.ticket.fee)),this.orderService.addTicket(i.ticket,!0))}removeTicketsFromOrderService(){this.selectedSeats.forEach(i=>{this.orderService.removeTicket(i.ticketId)})}removeSelectedSeats(i){this.selectedSeats.forEach((a,g)=>{a.placeName==i.id&&(this.selectedSeats.splice(g,1),this.orderService.removeTicketByPlaceName(i.id),this.calculateTotalPricesSeats("-"+(a.price+a.fee)))})}getLoadingSeatsIo(i){this.loadingSeatsIo=i}calculateTotalPricesSeats(i){this.totalPriceSeats=this.totalPriceSeats+parseInt(i)}loadEvent(){const i=this.activatedRoute.snapshot.paramMap.get("id"),a=this.activatedRoute.snapshot.paramMap.get("slug"),g={};a?g.slug=a:g.eventId=i,null!=this.authService.getCustomer()&&null!=this.authService.getCustomer().modeComissioner&&1==this.authService.getCustomer().modeComissioner&&(g.comissionerId=this.authService.getCustomer().comissionerId),this.eventService.find(g).pipe((0,Ke.R)(this.unsubscribe$),(0,Jt.K)(f=>(console.log(f),this.loading=!1,console.log(f.error.errors[0].msg),"Vendas encerradas."==f.error.errors[0].msg?this.fengEndedSells=!0:this.router.navigateByUrl("/?tag="+g.slug),(0,mi.of)(f)))).subscribe(f=>{var k,O,U,G,Q,de,oe,Fe,Ue;null==f.error&&(this.event=f,this.checkComissioner(),1==(null===(k=this.event)||void 0===k?void 0:k.hideFullTickets)&&(this.hideFullTicket=!0),null!=(null===(O=this.event)||void 0===O?void 0:O.seatsioEventKey)&&(this.hasSeatsChart=!0),null!=(null===(U=this.event)||void 0===U?void 0:U.fbPixel)&&""!==(null===(G=this.event)||void 0===G?void 0:G.fbPixel)&&this.loadScript3(null===(Q=this.event)||void 0===Q?void 0:Q.fbPixel),(null===(de=this.event)||void 0===de?void 0:de.integrations)&&-1!=(null===(oe=this.event)||void 0===oe?void 0:oe.integrations.indexOf("Feng"))&&this.authService.isLoggednIn()&&this.authService.getCustomer().fengPlanId?(this.fengIntegration=!0,this.event.tickets.length<1&&(this.eventClosed=!0,this.customerName=this.authService.getCustomer().name),this.authService.isLoggednIn()&&(this.quantityPctValuePartner=this.authService.getCustomer().quantityPctValuePartner,this.quantityPctValueInvited=this.authService.getCustomer().quantityPctValueInvited,this.quantityPctValueExtra=this.authService.getCustomer().quantityPctValueExtra,this.quantityPctValuePartnerFixed=this.quantityPctValuePartner,this.quantityPctValueInvitedFixed=this.quantityPctValueInvited,this.quantityPctValueExtraFixed=this.quantityPctValueExtra)):this.fengIntegration=!1,this.sectors=f.sectors,this.tickets=f.tickets,this.event.fengIntegration=this.fengIntegration,this.orderService.setEvent(this.event),f.sectors&&(this.selectedSector=f.sectors[0].id),this.activatedRoute.snapshot.queryParamMap.get("checkout")&&this.buy(),(null===(Fe=this.event)||void 0===Fe?void 0:Fe.useGoogleEvents)&&this.loadStructureData(f),(null===(Ue=this.event)||void 0===Ue?void 0:Ue.allowMapV2)&&this.mapV2Service.refreshCart().then(Le=>{const jt=null==Le?void 0:Le.places.map(ei=>{var ti;return null===(ti=ei.selectedTicket)||void 0===ti?void 0:ti.id}),Kt=this.orderService.getAllTickets().filter(ei=>null==jt?void 0:jt.includes(ei.id));this.orderService.setTickets(Kt)}));let Xe=this.activatedRoute.snapshot.queryParams.cupom;null!=Xe&&""!==Xe&&(this.ticketCupom=this.activatedRoute.snapshot.queryParams.cupom,this.sendCupomTicket()),this.orderService.getAllTickets().forEach(Le=>{this.changeCountFengDiscount(Le,1,"add")})})}sendCupomTicket(){if(""==this.ticketCupom)return void(this.ticketCupomError="Informe um c\xf3digo");this.ticketCupomError="",this.loading=!0;let i={ticketTags:""};i.ticketTags=this.ticketCupom,i.eventId=this.event.id,this.eventService.getCupomTicket(i).pipe((0,Ke.R)(this.unsubscribe$),(0,Jt.K)(a=>(this.alertService.toast({icon:"error",title:"Falha ao aplicar cupons",text:"Nenhum ingresso encontrado para o c\xf3digo digitado"}),this.loading=!1,(0,mi.of)(a)))).subscribe(a=>{null!=a.id&&(this.orderService.removeAllTickets(),a.ticketTags=this.ticketCupom,this.event=a,this.orderService.setEvent(a),this.loading=!1,this.isCupom=!0,this.sectors=a.sectors,this.tickets=a.tickets,this.selectedSector=a.sectors[0].id,this.alertService.toast({icon:"success",title:"Cupom ativado!",text:"Ingressos do cupom "+this.ticketCupom+" carregados."}))})}loadScript(){var i;if(null!=window&&"1d1519c9-0997-4de7-a5d8-b6674a90c512"==(null===(i=this.event)||void 0===i?void 0:i.id)){let f=function(k,O){g.push(arguments)};document.createElement("script").setAttribute("src","https://www.googletagmanager.com/gtag/js?id=AW-11124555266");let g=window.dataLayer||[];f("js",new Date),f("config","AW-11124555266")}}loadScript2(){!function(i,a){var g,f=i.createElement("script"),k=a.frameElement;f.id="CleverCoreLoader68593",f.src="https://scripts.cleverwebserver.com/b5bd2c974bc69ecf63abf9915fabe6dc.js",f.async=!0,f.type="text/javascript",f.setAttribute("data-target",a.name||k&&k.getAttribute("id")),f.setAttribute("data-callback","put-your-callback-function-here"),f.setAttribute("data-callback-url-click","put-your-click-macro-here"),f.setAttribute("data-callback-url-view","put-your-view-macro-here");try{g=parent.document.getElementsByTagName("script")[0]||i.getElementsByTagName("script")[0]}catch(O){g=!1}g||(g=i.getElementsByTagName("head")[0]||i.getElementsByTagName("body")[0]),g.parentNode.insertBefore(f,g)}(document,window)}loadStructureData(i){const a={name:i.name,description:i.description,startDate:i.dates[0].dateStartEvent,location:{name:i.address,streetAddress:i.address,addressLocality:i.city,addressRegion:i.state,addressCountry:"BR"},images:[i.imageWeb],companyName:gn.N.name,companyUrl:document.location.origin,eventUrl:document.location.origin+document.location.pathname};this.JsonLDService.insertSchema(this.JsonLDService.eventSchema(a))}loadScript3(i){var a,g,f,O,U,G;a=window,g=document,f="script",O=null,U=null,G=null,a.fbq||(O=a.fbq=function(){O.callMethod?O.callMethod.apply(O,arguments):O.queue.push(arguments)},a._fbq||(a._fbq=O),O.push=O,O.loaded=!0,O.version="2.0",O.queue=[],(U=g.createElement(f)).async=!0,U.src="https://connect.facebook.net/en_US/fbevents.js",(G=g.getElementsByTagName(f)[0]).parentNode.insertBefore(U,G)),window.fbq.disablePushState=!0,window.fbq("init",i),window.fbq("track","PageView"),window.fbq("track","ViewContent")}getSelectedMapPlace(i){console.log(i)}canNewFengDiscount(i){if(!(i.fengPlansExtra&&i.fengPlansExtra.length>0||i.fengPlansInvited&&i.fengPlansInvited.length>0||i.fengPlansPartner&&i.fengPlansPartner.length>0))return!0;if(this.orderService.getAllTickets().forEach(a=>{this.buyInOtherSector=a.sectorId!==this.selectedSector}),console.log(this.buyInOtherSector),1==this.buyInOtherSector&&this.alertService.toast({icon:"error",title:"Erro",text:"N\xe3o pode comprar ingressos em setores diferentes."}),i.fengPlansPartner&&i.fengPlansPartner.length>0){if(this.quantityPctValuePartner<=0)return!1}else if(i.fengPlansExtra&&i.fengPlansExtra.length>0){if(this.quantityPctValueExtra<=0)return!1}else if(i.fengPlansInvited&&i.fengPlansInvited.length>0&&this.quantityPctValueInvited<=0)return!1;return!0}changeCountFengDiscount(i,a,g){i.fengPlansExtra&&i.fengPlansExtra.length&&("remove"==g?this.quantityPctValueExtra+=1:this.quantityPctValueExtra-=1),i.fengPlansInvited&&i.fengPlansInvited.length>0&&("remove"==g?this.quantityPctValueInvited+=1:this.quantityPctValueInvited-=1),i.fengPlansPartner&&i.fengPlansPartner.length>0&&("remove"==g?this.quantityPctValuePartner+=1:this.quantityPctValuePartner-=1)}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(L.tT),e.Y36(x.P),e.Y36(w.p),e.Y36(I.c),e.Y36(S.e),e.Y36(Je.gz),e.Y36(Je.F0),e.Y36(Y.c),e.Y36(H.qu),e.Y36(ie.w),e.Y36(Ce),e.Y36(pe.a))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-event"]],viewQuery:function(i,a){if(1&i&&e.Gf(dr,5),2&i){let g;e.iGM(g=e.CRH())&&(a.sellLink=g.first)}},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["showEvent",""],[1,"d-flex","mt-5","justify-content-center","fs-5"],["class","banner",4,"ngIf"],[1,"container-fluid","mt-4"],[1,"row"],[1,"col-md-12","text-center"],["class","title fw-bold text-grad",4,"ngIf"],[3,"theme",4,"ngIf"],[1,"row","flex-column-reverse","flex-lg-row"],[1,"col-sm-12","col-lg-5","col-xl-6"],["class","col-md-12 mt-4",4,"ngIf"],["showWsExperienceDescription",""],[1,"col-md-12","mt-4"],[1,"card","border-0"],[1,"card-header","border-0","pt-3"],["class","card-title text-grad text-uppercase fw-bold",4,"ngIf"],[1,"card-body","pt-0","pb-2"],["allowfullscreen","","frameborder","0","height","300","style","border: 0; border-radius: 5px;","width","100%",3,"src",4,"ngIf"],[1,"col-sm-12","col-lg-7","col-xl-6"],[1,"card-body"],[1,"date","text-grad"],[4,"ngIf"],[1,"local","mt-3"],["showFengBadges",""],["class","row",4,"ngIf"],["showLoading",""],["halfEntryModalInformation",""],["formPorscheModal",""],["titularModal",""],["paymentConfirmationModal",""],[1,"banner"],[3,"src",4,"ngIf"],[3,"src"],[3,"theme"],["src","../../../../assets/images/vasco-arte.png"],[1,"title","fw-bold","text-grad"],[1,"card-title","text-grad","text-uppercase","fw-bold"],[1,"card-body","pt-0"],["class","card-text description",3,"innerHtml",4,"ngIf"],[1,"card-text","description",3,"innerHtml"],["allowfullscreen","","frameborder","0","height","300","width","100%",2,"border","0","border-radius","5px",3,"src"],[1,"fw-bold","m-0"],[1,"text-capitalize","fw-bold","m-0"],[1,"m-0"],["showNormalCupom",""],["class","d-flex justify-content-center",4,"ngIf"],[1,"mt-4","background-c6"],[1,"d-flex","align-items-center","justify-content-center","mb-5","mt-4"],[1,"ms-auto","me-0",2,"margin-top","156px"],[1,"input-group","input-group-lg","codigo"],["type","text","maxlength","6","placeholder","BIN (6 primeiros nrs cart\xe3o)","name","ticketCupom","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-grad","fw-bold","text-uppercase","fs-6",3,"disabled","click"],[1,"d-flex","justify-content-center"],[2,"color","red"],[1,"col-xs-12","col-sm-6","col-md-8","col-xl-8","col-xxl-6","ms-auto","me-0"],["type","text","placeholder","C\xf3digo do cupom","name","ticketCupom","required","",1,"form-control",3,"ngModel","ngModelChange"],["showEventClosedMessage",""],[1,"row","text-center","mb-5","mt-5"],["class","col-md-12 feng-integration",4,"ngIf"],[1,"col-md-12","feng-integration"],[1,"blueTitle"],[1,"btn","btn-grad"],[1,"badge","badge-secondary","fs-6"],[1,"col-sm-12"],[3,"eventId","sectorId","change"],[1,"sectors","mt-3"],[1,"d-flex","justify-content-between",3,"config","swiper"],[4,"ngFor","ngForOf"],[1,"mt-3"],["showTicketsByQuantity",""],["swiperSlide","","class","mb-3 d-flex justify-content-between"],["role","button",1,"card","border-0",3,"click"],[1,"card-body","d-flex","justify-content-center","align-items-center","p-2"],[1,"text-uppercase","text-center","m-0",2,"font-size","13px"],["swiperSlide",""],[3,"event","selectedSeats","sendLoadingSeatsIo","deselectedSeats"],[3,"event","ticketCupom","sectorId","sendSelectedSeat"],["showHalfFullAndGratuityTickets",""],[1,"animate__animated","animate__fadeIn","d-flex","justify-content-between"],[1,"col-lg-6"],[1,"m-0","fw-bold"],[1,"d-flex"],[1,"me-1","ms-1"],["class","m-0 text-grad",4,"ngIf"],[3,"innerHTML"],["class","m-0",4,"ngIf"],[1,"mb-3","mt-2","mb-3","mt-2","d-flex","justify-content-end"],[3,"value","target","allowAdd","allowRemove","change"],[1,"total","m-0","me-auto","fs-4","fw-bold","d-flex","justify-content-end"],[1,"price","m-0","d-flex","justify-content-end"],[1,"fee","m-0","d-flex","justify-content-end"],[1,"fa","fa-info-circle","ms-2",2,"cursor","pointer","color","rgb(94, 132, 255)",3,"click"],[1,"m-0","text-grad"],["showTicketsByType",""],["class","btn btn-light animate__animated animate__fadeIn",3,"click",4,"ngIf"],[1,"btn","btn-light","animate__animated","animate__fadeIn",3,"click"],["class","animate__animated animate__fadeIn",4,"ngFor","ngForOf"],[1,"animate__animated","animate__fadeIn"],[1,"align-middle"],[1,"text-end","align-middle"],["spinnerType","grow","spinnerWidth","77"],["class","card-footer p-3",4,"ngIf","ngIfElse"],["showSellButton",""],[1,"card-footer","p-3"],[1,"d-flex","flex-wrap","align-items-center","mb-3"],["type","checkbox","id","defaultCheck1",1,"form-check-input","m-0",3,"checked","change"],["for","defaultCheck1",1,"form-check-label","ms-3"],["target","_blank",3,"routerLink"],[1,"btn","btn-grad","btn-lg","fw-bold","text-uppercase","mx-auto","d-flex",3,"click"],["class","d-flex align-items-center",4,"ngIf","ngIfElse"],["showBuyButton",""],[1,"d-flex","align-items-center"],[1,"fa","fa-circle","mx-2"],["spinnerType","grow","spinnerWidth","30"],[1,"d-flex","mb-3"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"quantityTickets","sendPorscheOwner"],[1,"modal-header","border-0","mx-2"],["class","modal-title pull-left",4,"ngIf"],[3,"autoHeight","allowTouchMove","swiper"],[1,"row","p-2"],[3,"formGroup","ngSubmit"],[1,"col-sm-6"],[1,"form-floating","mb-3"],["type","text","required","true","mask","000.000.000-00","required","","formControlName","doc","id","floatingInput","placeholder","000.000.000-00",1,"form-control",3,"keyup"],["for","floatingInput"],["type","email","required","","formControlName","email","id","floatingInput","placeholder","name@example.com",1,"form-control"],["type","text","required","","formControlName","name","id","floatingInput","placeholder","Nome",1,"form-control"],["type","text","required","","mask","(00) 00000-0000 || (00) 0000-0000","formControlName","phone","id","floatingInput","placeholder","(00) 00000-0000",1,"form-control",3,"dropSpecialCharacters"],[1,"col-sm-12","text-center"],[1,"btn","btn-grad","btn-lg",3,"click"],[1,"col-md-12","mt-md-0","ms-auto","mt-5"],[1,"mb-1"],[1,"card"],[1,"table-responsive"],[1,"table"],["scope","col",1,"ps-3"],["scope","col",1,"text-center"],["scope","col",1,"text-center","pe-3"],["colspan","3",1,"text-end","border-0","pt-3"],[1,"text-grad","fw-bold","fs-3","m-0"],[1,"table","table-hover"],["role","button",3,"click"],[1,"align-middle","border-0","py-3","fs-5"],[1,"align-middle","border-0","py-3","text-end"],[1,"las","la-angle-right"],["class","btn btn-grad btn-lg",3,"click",4,"ngIf"],[1,"align-middle","ps-3"],[1,"text-grad","fw-bold","m-0"],[1,"text-center","align-middle"],[1,"text-center","align-middle","pe-3"],["role","button",3,"click",4,"ngIf"],["showPaymentCompleted",""],[1,"mb-3","mt-3"],["type","text","id","selllink",1,"form-control",3,"value"],[1,"mt-2","d-flex","justify-content-center"],[1,"btn","btn-grad","btn-md","mt-3",3,"click"],[1,"modal-footer","border-0"],[1,"btn","btn-primary","text-white",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(i,a){if(1&i&&(e.YNc(0,Pe,3,0,"div",0),e.YNc(1,Io,49,21,"ng-template",null,1,e.W1O)),2&i){const g=e.MAs(2);e.Q6J("ngIf",1==a.fengEndedSells)("ngIfElse",g)}},directives:[ee.O5,zt.xr,H.Fj,H.nD,H.Q7,H.JJ,H.On,Ei,$e.nF,ee.sg,$e.YC,ut,Wt,nr,_n.O,Je.yS,Hr,H._Y,H.JL,H.sg,en.hx,H.u],pipes:[_e.W,Yr,hr,ee.JJ],styles:[".banner[_ngcontent-%COMP%]{height:100px}.banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card[_ngcontent-%COMP%]{border-radius:18px;box-shadow:0 6px 15px -5px #00000040}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:none}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1rem}.card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{border-radius:18px}.title[_ngcontent-%COMP%]{font-size:24px}.date[_ngcontent-%COMP%]{text-align:end}.date[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;line-height:37px}.local[_ngcontent-%COMP%]{text-align:end}.local[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:20px;line-height:25px}.input-group.codigo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-top-left-radius:12px;border-bottom-left-radius:12px}.input-group.codigo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-top-right-radius:12px;border-bottom-right-radius:12px}.form-check-input[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:5px;border-radius:2px}.form-check-label[_ngcontent-%COMP%]{font-size:.9rem;width:calc(100% - 42px)}.sectors[_ngcontent-%COMP%]   swiper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;height:55px;border-radius:12px;transition:.3s}.sectors[_ngcontent-%COMP%]   swiper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin:0 3px}.sectors[_ngcontent-%COMP%]   swiper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{pointer-events:none}.sectors[_ngcontent-%COMP%]   swiper[_ngcontent-%COMP%]   .card.active[_ngcontent-%COMP%]{background:var(--background-linear-gradient)}.sectors[_ngcontent-%COMP%]   swiper[_ngcontent-%COMP%]   .card.active[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background:transparent}.sectors[_ngcontent-%COMP%]   swiper[_ngcontent-%COMP%]   .card.active[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff;font-weight:700}.sectors[_ngcontent-%COMP%]   swiper[_ngcontent-%COMP%]   .card.active[_ngcontent-%COMP%]:hover{transform:none}.sectors[_ngcontent-%COMP%]   swiper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{transform:scale(95%)}table.tickets[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px}table.tickets[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{font-size:20px;font-weight:700;line-height:28px}table.tickets[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%], table.tickets[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .fee[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.15rem;font-weight:400}table.tickets[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border:none}button[_ngcontent-%COMP%]   .fa-circle[_ngcontent-%COMP%]{font-size:6px}@media (min-width: 360px){.banner[_ngcontent-%COMP%]{height:120px}}@media (min-width: 400px){.banner[_ngcontent-%COMP%]{height:150px}}@media (min-width: 576px){.banner[_ngcontent-%COMP%]{height:200px}.title[_ngcontent-%COMP%]{font-size:38px}}@media (min-width: 768px){.banner[_ngcontent-%COMP%]{height:250px}}@media (min-width: 992px){.banner[_ngcontent-%COMP%]{height:300px}}@media (min-width: 1024px){.banner[_ngcontent-%COMP%]{height:350px}}@media (min-width: 1200px){.banner[_ngcontent-%COMP%]{height:400px}}.background-c6[_ngcontent-%COMP%]{background:url(c6.3877040017d0a7f5.jpg);height:189px;justify-content:center;flex-wrap:wrap;align-items:center;display:flex;flex-direction:column}"]}),r})()}];let Mo=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[Je.Bz.forChild(Eo)],Je.Bz]}),r})(),Zo=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[ee.ez]]}),r})(),Oo=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[ee.ez,H.u5,$e.kz,en.yI.forRoot()]]}),r})();var No=j(3291);let qo=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[ee.ez,H.u5,H.UX,en.yI.forRoot(),Je.Bz]]}),r})();var Do=j(9962);const Ro={validation:!1};let Fo=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[ee.ez,H.u5,dn,ki,Mo,$e.kz,si,qo,en.yI.forRoot(Ro),H.UX,pi.F,zt.hx,Ii,Zo,Oo,L.zk.forRoot(),No.V,Do.P]]}),r})()},9e3:(Cn,Ci,j)=>{var ee;!function(L,M,e,ye){"use strict";var et,on=["","webkit","Moz","MS","ms","o"],Tn=M.createElement("div"),Ut=Math.round,bt=Math.abs,ii=Date.now;function Oi(m,x,w){return setTimeout(qi(m,w),x)}function Lt(m,x,w){return!!Array.isArray(m)&&(rt(m,w[x],w),!0)}function rt(m,x,w){var I;if(m)if(m.forEach)m.forEach(x,w);else if(m.length!==ye)for(I=0;I<m.length;)x.call(w,m[I],I,m),I++;else for(I in m)m.hasOwnProperty(I)&&x.call(w,m[I],I,m)}function Ni(m,x,w){var I="DEPRECATED METHOD: "+x+"\n"+w+" AT \n";return function(){var S=new Error("get-stack-trace"),Y=S&&S.stack?S.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ie=L.console&&(L.console.warn||L.console.log);return ie&&ie.call(L.console,I,Y),m.apply(this,arguments)}}et="function"!=typeof Object.assign?function(x){if(x===ye||null===x)throw new TypeError("Cannot convert undefined or null to object");for(var w=Object(x),I=1;I<arguments.length;I++){var S=arguments[I];if(S!==ye&&null!==S)for(var Y in S)S.hasOwnProperty(Y)&&(w[Y]=S[Y])}return w}:Object.assign;var Ti=Ni(function(x,w,I){for(var S=Object.keys(w),Y=0;Y<S.length;)(!I||I&&x[S[Y]]===ye)&&(x[S[Y]]=w[S[Y]]),Y++;return x},"extend","Use `assign`."),Sn=Ni(function(x,w){return Ti(x,w,!0)},"merge","Use `assign`.");function Ee(m,x,w){var S,I=x.prototype;(S=m.prototype=Object.create(I)).constructor=m,S._super=I,w&&et(S,w)}function qi(m,x){return function(){return m.apply(x,arguments)}}function A(m,x){return"function"==typeof m?m.apply(x&&x[0]||ye,x):m}function at(m,x){return m===ye?x:m}function ni(m,x,w){rt(st(x),function(I){m.addEventListener(I,w,!1)})}function q(m,x,w){rt(st(x),function(I){m.removeEventListener(I,w,!1)})}function ot(m,x){return m.indexOf(x)>-1}function st(m){return m.trim().split(/\s+/g)}function Ct(m,x,w){if(m.indexOf&&!w)return m.indexOf(x);for(var I=0;I<m.length;){if(w&&m[I][w]==x||!w&&m[I]===x)return I;I++}return-1}function wi(m){return Array.prototype.slice.call(m,0)}function He(m,x,w){for(var I=[],S=[],Y=0;Y<m.length;){var ie=x?m[Y][x]:m[Y];Ct(S,ie)<0&&I.push(m[Y]),S[Y]=ie,Y++}return w&&(I=x?I.sort(function(pe,Re){return pe[x]>Re[x]}):I.sort()),I}function Di(m,x){for(var w,I,S=x[0].toUpperCase()+x.slice(1),Y=0;Y<on.length;){if((I=(w=on[Y])?w+S:x)in m)return I;Y++}return ye}var ri=1;function C(m){var x=m.ownerDocument||m;return x.defaultView||x.parentWindow||L}var Tt="touch",Ui="mouse",li=["x","y"],St=["clientX","clientY"];function me(m,x){var w=this;this.manager=m,this.callback=x,this.element=m.element,this.target=m.options.inputTarget,this.domHandler=function(I){A(m.options.enable,[m])&&w.handler(I)},this.init()}function Bt(m,x,w){var I=w.pointers.length,S=w.changedPointers.length,Y=1&x&&I-S==0,ie=12&x&&I-S==0;w.isFirst=!!Y,w.isFinal=!!ie,Y&&(m.session={}),w.eventType=x,function Qn(m,x){var w=m.session,I=x.pointers,S=I.length;w.firstInput||(w.firstInput=ct(x)),S>1&&!w.firstMultiple?w.firstMultiple=ct(x):1===S&&(w.firstMultiple=!1);var Y=w.firstInput,ie=w.firstMultiple,Ce=ie?ie.center:Y.center,pe=x.center=zi(I);x.timeStamp=ii(),x.deltaTime=x.timeStamp-Y.timeStamp,x.angle=At(Ce,pe),x.distance=Pt(Ce,pe),function Vn(m,x){var w=x.center,I=m.offsetDelta||{},S=m.prevDelta||{},Y=m.prevInput||{};(1===x.eventType||4===Y.eventType)&&(S=m.prevDelta={x:Y.deltaX||0,y:Y.deltaY||0},I=m.offsetDelta={x:w.x,y:w.y}),x.deltaX=S.x+(w.x-I.x),x.deltaY=S.y+(w.y-I.y)}(w,x),x.offsetDirection=Bi(x.deltaX,x.deltaY);var Re=ci(x.deltaTime,x.deltaX,x.deltaY);x.overallVelocityX=Re.x,x.overallVelocityY=Re.y,x.overallVelocity=bt(Re.x)>bt(Re.y)?Re.x:Re.y,x.scale=ie?function _t(m,x){return Pt(x[0],x[1],St)/Pt(m[0],m[1],St)}(ie.pointers,I):1,x.rotation=ie?function cn(m,x){return At(x[1],x[0],St)+At(m[1],m[0],St)}(ie.pointers,I):0,x.maxPointers=w.prevInput?x.pointers.length>w.prevInput.maxPointers?x.pointers.length:w.prevInput.maxPointers:x.pointers.length,function An(m,x){var S,Y,ie,Ce,w=m.lastInterval||x,I=x.timeStamp-w.timeStamp;if(8!=x.eventType&&(I>25||w.velocity===ye)){var pe=x.deltaX-w.deltaX,Re=x.deltaY-w.deltaY,Te=ci(I,pe,Re);Y=Te.x,ie=Te.y,S=bt(Te.x)>bt(Te.y)?Te.x:Te.y,Ce=Bi(pe,Re),m.lastInterval=x}else S=w.velocity,Y=w.velocityX,ie=w.velocityY,Ce=w.direction;x.velocity=S,x.velocityX=Y,x.velocityY=ie,x.direction=Ce}(w,x);var Te=m.element;(function sn(m,x){for(;m;){if(m==x)return!0;m=m.parentNode}return!1})(x.srcEvent.target,Te)&&(Te=x.srcEvent.target),x.target=Te}(m,w),m.emit("hammer.input",w),m.recognize(w),m.session.prevInput=w}function ct(m){for(var x=[],w=0;w<m.pointers.length;)x[w]={clientX:Ut(m.pointers[w].clientX),clientY:Ut(m.pointers[w].clientY)},w++;return{timeStamp:ii(),pointers:x,center:zi(x),deltaX:m.deltaX,deltaY:m.deltaY}}function zi(m){var x=m.length;if(1===x)return{x:Ut(m[0].clientX),y:Ut(m[0].clientY)};for(var w=0,I=0,S=0;S<x;)w+=m[S].clientX,I+=m[S].clientY,S++;return{x:Ut(w/x),y:Ut(I/x)}}function ci(m,x,w){return{x:x/m||0,y:w/m||0}}function Bi(m,x){return m===x?1:bt(m)>=bt(x)?m<0?2:4:x<0?8:16}function Pt(m,x,w){w||(w=li);var I=x[w[0]]-m[w[0]],S=x[w[1]]-m[w[1]];return Math.sqrt(I*I+S*S)}function At(m,x,w){return w||(w=li),180*Math.atan2(x[w[1]]-m[w[1]],x[w[0]]-m[w[0]])/Math.PI}me.prototype={handler:function(){},init:function(){this.evEl&&ni(this.element,this.evEl,this.domHandler),this.evTarget&&ni(this.target,this.evTarget,this.domHandler),this.evWin&&ni(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&q(this.element,this.evEl,this.domHandler),this.evTarget&&q(this.target,this.evTarget,this.domHandler),this.evWin&&q(C(this.element),this.evWin,this.domHandler)}};var kn={mousedown:1,mousemove:2,mouseup:4},kt="mousedown",In="mousemove mouseup";function Si(){this.evEl=kt,this.evWin=In,this.pressed=!1,me.apply(this,arguments)}Ee(Si,me,{handler:function(x){var w=kn[x.type];1&w&&0===x.button&&(this.pressed=!0),2&w&&1!==x.which&&(w=4),this.pressed&&(4&w&&(this.pressed=!1),this.callback(this.manager,w,{pointers:[x],changedPointers:[x],pointerType:Ui,srcEvent:x}))}});var R={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},le={2:Tt,3:"pen",4:Ui,5:"kinect"},Oe="pointerdown",Ht="pointermove pointerup pointercancel";function Pi(){this.evEl=Oe,this.evWin=Ht,me.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}L.MSPointerEvent&&!L.PointerEvent&&(Oe="MSPointerDown",Ht="MSPointerMove MSPointerUp MSPointerCancel"),Ee(Pi,me,{handler:function(x){var w=this.store,I=!1,S=x.type.toLowerCase().replace("ms",""),Y=R[S],ie=le[x.pointerType]||x.pointerType,Ce=ie==Tt,pe=Ct(w,x.pointerId,"pointerId");1&Y&&(0===x.button||Ce)?pe<0&&(w.push(x),pe=w.length-1):12&Y&&(I=!0),!(pe<0)&&(w[pe]=x,this.callback(this.manager,Y,{pointers:w,changedPointers:[x],pointerType:ie,srcEvent:x}),I&&w.splice(pe,1))}});var Hi={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Yi="touchstart",hn="touchstart touchmove touchend touchcancel";function Ji(){this.evTarget=Yi,this.evWin=hn,this.started=!1,me.apply(this,arguments)}function hi(m,x){var w=wi(m.touches),I=wi(m.changedTouches);return 12&x&&(w=He(w.concat(I),"identifier",!0)),[w,I]}Ee(Ji,me,{handler:function(x){var w=Hi[x.type];if(1===w&&(this.started=!0),this.started){var I=hi.call(this,x,w);12&w&&I[0].length-I[1].length==0&&(this.started=!1),this.callback(this.manager,w,{pointers:I[0],changedPointers:I[1],pointerType:Tt,srcEvent:x})}}});var En={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Wn="touchstart touchmove touchend touchcancel";function Ge(){this.evTarget=Wn,this.targetIds={},me.apply(this,arguments)}function Ai(m,x){var w=wi(m.touches),I=this.targetIds;if(3&x&&1===w.length)return I[w[0].identifier]=!0,[w,w];var S,Y,ie=wi(m.changedTouches),Ce=[];if(Y=w.filter(function(Re){return!0}),1===x)for(S=0;S<Y.length;)I[Y[S].identifier]=!0,S++;for(S=0;S<ie.length;)I[ie[S].identifier]&&Ce.push(ie[S]),12&x&&delete I[ie[S].identifier],S++;return Ce.length?[He(Y.concat(Ce),"identifier",!0),Ce]:void 0}function Qi(){me.apply(this,arguments);var m=qi(this.handler,this);this.touch=new Ge(this.manager,m),this.mouse=new Si(this.manager,m),this.primaryTouch=null,this.lastTouches=[]}function On(m,x){1&m?(this.primaryTouch=x.changedPointers[0].identifier,Vi.call(this,x)):12&m&&Vi.call(this,x)}function Vi(m){var x=m.changedPointers[0];if(x.identifier===this.primaryTouch){var w={x:x.clientX,y:x.clientY};this.lastTouches.push(w);var I=this.lastTouches;setTimeout(function(){var Y=I.indexOf(w);Y>-1&&I.splice(Y,1)},2500)}}function dn(m){for(var x=m.srcEvent.clientX,w=m.srcEvent.clientY,I=0;I<this.lastTouches.length;I++){var S=this.lastTouches[I],Y=Math.abs(x-S.x),ie=Math.abs(w-S.y);if(Y<=DEDUP_DISTANCE&&ie<=DEDUP_DISTANCE)return!0}return!1}Ee(Ge,me,{handler:function(x){var w=En[x.type],I=Ai.call(this,x,w);!I||this.callback(this.manager,w,{pointers:I[0],changedPointers:I[1],pointerType:Tt,srcEvent:x})}}),Ee(Qi,me,{handler:function(x,w,I){var Y=I.pointerType==Ui;if(!(Y&&I.sourceCapabilities&&I.sourceCapabilities.firesTouchEvents)){if(I.pointerType==Tt)On.call(this,w,I);else if(Y&&dn.call(this,I))return;this.callback(x,w,I)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var H=Di(Tn.style,"touchAction"),tt=H!==ye,Ne="compute",Wi="manipulation",je="none",mt="pan-x",ft="pan-y",It=function un(){if(!tt)return!1;var m={},x=L.CSS&&L.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(w){m[w]=!x||L.CSS.supports("touch-action",w)}),m}();function di(m,x){this.manager=m,this.set(x)}function Ze(m){this.options=et({},this.defaults,m||{}),this.id=function ai(){return ri++}(),this.manager=null,this.options.enable=at(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Mt(m){return 16&m?"cancel":8&m?"end":4&m?"move":2&m?"start":""}function Xi(m){return 16==m?"down":8==m?"up":2==m?"left":4==m?"right":""}function dt(m,x){var w=x.manager;return w?w.get(m):m}function De(){Ze.apply(this,arguments)}function gi(){De.apply(this,arguments),this.pX=null,this.pY=null}function Yt(){De.apply(this,arguments)}function pi(){Ze.apply(this,arguments),this._timer=null,this._input=null}function ki(){De.apply(this,arguments)}function Ii(){De.apply(this,arguments)}function Je(){Ze.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function it(m,x){return(x=x||{}).recognizers=at(x.recognizers,it.defaults.preset),new Jt(m,x)}function Jt(m,x){this.options=et({},it.defaults,x||{}),this.options.inputTarget=this.options.inputTarget||m,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=m,this.input=function Pn(m){return new(m.options.inputClass||Ge)(m,Bt)}(this),this.touchAction=new di(this,this.options.touchAction),mi(this,!0),rt(this.options.recognizers,function(w){var I=this.add(new w[0](w[1]));w[2]&&I.recognizeWith(w[2]),w[3]&&I.requireFailure(w[3])},this)}function mi(m,x){var I,w=m.element;w.style&&(rt(m.options.cssProps,function(S,Y){I=Di(w.style,Y),x?(m.oldCssProps[I]=w.style[I],w.style[I]=S):w.style[I]=m.oldCssProps[I]||""}),x||(m.oldCssProps={}))}di.prototype={set:function(m){m==Ne&&(m=this.compute()),tt&&this.manager.element.style&&It[m]&&(this.manager.element.style[H]=m),this.actions=m.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var m=[];return rt(this.manager.recognizers,function(x){A(x.options.enable,[x])&&(m=m.concat(x.getTouchAction()))}),function ze(m){if(ot(m,je))return je;var x=ot(m,mt),w=ot(m,ft);return x&&w?je:x||w?x?mt:ft:ot(m,Wi)?Wi:"auto"}(m.join(" "))},preventDefaults:function(m){var x=m.srcEvent,w=m.offsetDirection;if(!this.manager.session.prevented){var I=this.actions,S=ot(I,je)&&!It[je],Y=ot(I,ft)&&!It[ft],ie=ot(I,mt)&&!It[mt];if(S&&1===m.pointers.length&&m.distance<2&&m.deltaTime<250)return;return ie&&Y||!(S||Y&&6&w||ie&&24&w)?void 0:this.preventSrc(x)}x.preventDefault()},preventSrc:function(m){this.manager.session.prevented=!0,m.preventDefault()}},Ze.prototype={defaults:{},set:function(m){return et(this.options,m),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(m){if(Lt(m,"recognizeWith",this))return this;var x=this.simultaneous;return x[(m=dt(m,this)).id]||(x[m.id]=m,m.recognizeWith(this)),this},dropRecognizeWith:function(m){return Lt(m,"dropRecognizeWith",this)||(m=dt(m,this),delete this.simultaneous[m.id]),this},requireFailure:function(m){if(Lt(m,"requireFailure",this))return this;var x=this.requireFail;return-1===Ct(x,m=dt(m,this))&&(x.push(m),m.requireFailure(this)),this},dropRequireFailure:function(m){if(Lt(m,"dropRequireFailure",this))return this;m=dt(m,this);var x=Ct(this.requireFail,m);return x>-1&&this.requireFail.splice(x,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(m){return!!this.simultaneous[m.id]},emit:function(m){var x=this,w=this.state;function I(S){x.manager.emit(S,m)}w<8&&I(x.options.event+Mt(w)),I(x.options.event),m.additionalEvent&&I(m.additionalEvent),w>=8&&I(x.options.event+Mt(w))},tryEmit:function(m){if(this.canEmit())return this.emit(m);this.state=32},canEmit:function(){for(var m=0;m<this.requireFail.length;){if(!(33&this.requireFail[m].state))return!1;m++}return!0},recognize:function(m){var x=et({},m);if(!A(this.options.enable,[this,x]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(x),30&this.state&&this.tryEmit(x)},process:function(m){},getTouchAction:function(){},reset:function(){}},Ee(De,Ze,{defaults:{pointers:1},attrTest:function(m){var x=this.options.pointers;return 0===x||m.pointers.length===x},process:function(m){var x=this.state,w=m.eventType,I=6&x,S=this.attrTest(m);return I&&(8&w||!S)?16|x:I||S?4&w?8|x:2&x?4|x:2:32}}),Ee(gi,De,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var m=this.options.direction,x=[];return 6&m&&x.push(ft),24&m&&x.push(mt),x},directionTest:function(m){var x=this.options,w=!0,I=m.distance,S=m.direction,Y=m.deltaX,ie=m.deltaY;return S&x.direction||(6&x.direction?(S=0===Y?1:Y<0?2:4,w=Y!=this.pX,I=Math.abs(m.deltaX)):(S=0===ie?1:ie<0?8:16,w=ie!=this.pY,I=Math.abs(m.deltaY))),m.direction=S,w&&I>x.threshold&&S&x.direction},attrTest:function(m){return De.prototype.attrTest.call(this,m)&&(2&this.state||!(2&this.state)&&this.directionTest(m))},emit:function(m){this.pX=m.deltaX,this.pY=m.deltaY;var x=Xi(m.direction);x&&(m.additionalEvent=this.options.event+x),this._super.emit.call(this,m)}}),Ee(Yt,De,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[je]},attrTest:function(m){return this._super.attrTest.call(this,m)&&(Math.abs(m.scale-1)>this.options.threshold||2&this.state)},emit:function(m){1!==m.scale&&(m.additionalEvent=this.options.event+(m.scale<1?"in":"out")),this._super.emit.call(this,m)}}),Ee(pi,Ze,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(m){var x=this.options,w=m.pointers.length===x.pointers,I=m.distance<x.threshold,S=m.deltaTime>x.time;if(this._input=m,!I||!w||12&m.eventType&&!S)this.reset();else if(1&m.eventType)this.reset(),this._timer=Oi(function(){this.state=8,this.tryEmit()},x.time,this);else if(4&m.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(m){8===this.state&&(m&&4&m.eventType?this.manager.emit(this.options.event+"up",m):(this._input.timeStamp=ii(),this.manager.emit(this.options.event,this._input)))}}),Ee(ki,De,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[je]},attrTest:function(m){return this._super.attrTest.call(this,m)&&(Math.abs(m.rotation)>this.options.threshold||2&this.state)}}),Ee(Ii,De,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return gi.prototype.getTouchAction.call(this)},attrTest:function(m){var w,x=this.options.direction;return 30&x?w=m.overallVelocity:6&x?w=m.overallVelocityX:24&x&&(w=m.overallVelocityY),this._super.attrTest.call(this,m)&&x&m.offsetDirection&&m.distance>this.options.threshold&&m.maxPointers==this.options.pointers&&bt(w)>this.options.velocity&&4&m.eventType},emit:function(m){var x=Xi(m.offsetDirection);x&&this.manager.emit(this.options.event+x,m),this.manager.emit(this.options.event,m)}}),Ee(Je,Ze,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Wi]},process:function(m){var x=this.options,w=m.pointers.length===x.pointers,I=m.distance<x.threshold,S=m.deltaTime<x.time;if(this.reset(),1&m.eventType&&0===this.count)return this.failTimeout();if(I&&S&&w){if(4!=m.eventType)return this.failTimeout();var Y=!this.pTime||m.timeStamp-this.pTime<x.interval,ie=!this.pCenter||Pt(this.pCenter,m.center)<x.posThreshold;if(this.pTime=m.timeStamp,this.pCenter=m.center,ie&&Y?this.count+=1:this.count=1,this._input=m,0==this.count%x.taps)return this.hasRequireFailures()?(this._timer=Oi(function(){this.state=8,this.tryEmit()},x.interval,this),2):8}return 32},failTimeout:function(){return this._timer=Oi(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),it.VERSION="2.0.7",it.defaults={domEvents:!1,touchAction:Ne,enable:!0,inputTarget:null,inputClass:null,preset:[[ki,{enable:!1}],[Yt,{enable:!1},["rotate"]],[Ii,{direction:6}],[gi,{direction:6},["swipe"]],[Je],[Je,{event:"doubletap",taps:2},["tap"]],[pi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Jt.prototype={set:function(m){return et(this.options,m),m.touchAction&&this.touchAction.update(),m.inputTarget&&(this.input.destroy(),this.input.target=m.inputTarget,this.input.init()),this},stop:function(m){this.session.stopped=m?2:1},recognize:function(m){var x=this.session;if(!x.stopped){this.touchAction.preventDefaults(m);var w,I=this.recognizers,S=x.curRecognizer;(!S||S&&8&S.state)&&(S=x.curRecognizer=null);for(var Y=0;Y<I.length;)w=I[Y],2===x.stopped||S&&w!=S&&!w.canRecognizeWith(S)?w.reset():w.recognize(m),!S&&14&w.state&&(S=x.curRecognizer=w),Y++}},get:function(m){if(m instanceof Ze)return m;for(var x=this.recognizers,w=0;w<x.length;w++)if(x[w].options.event==m)return x[w];return null},add:function(m){if(Lt(m,"add",this))return this;var x=this.get(m.options.event);return x&&this.remove(x),this.recognizers.push(m),m.manager=this,this.touchAction.update(),m},remove:function(m){if(Lt(m,"remove",this))return this;if(m=this.get(m)){var x=this.recognizers,w=Ct(x,m);-1!==w&&(x.splice(w,1),this.touchAction.update())}return this},on:function(m,x){if(m!==ye&&x!==ye){var w=this.handlers;return rt(st(m),function(I){w[I]=w[I]||[],w[I].push(x)}),this}},off:function(m,x){if(m!==ye){var w=this.handlers;return rt(st(m),function(I){x?w[I]&&w[I].splice(Ct(w[I],x),1):delete w[I]}),this}},emit:function(m,x){this.options.domEvents&&function Ke(m,x){var w=M.createEvent("Event");w.initEvent(m,!0,!0),w.gesture=x,x.target.dispatchEvent(w)}(m,x);var w=this.handlers[m]&&this.handlers[m].slice();if(w&&w.length){x.type=m,x.preventDefault=function(){x.srcEvent.preventDefault()};for(var I=0;I<w.length;)w[I](x),I++}},destroy:function(){this.element&&mi(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},et(it,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Jt,Input:me,TouchAction:di,TouchInput:Ge,MouseInput:Si,PointerEventInput:Pi,TouchMouseInput:Qi,SingleTouchInput:Ji,Recognizer:Ze,AttrRecognizer:De,Tap:Je,Pan:gi,Swipe:Ii,Pinch:Yt,Rotate:ki,Press:pi,on:ni,off:q,each:rt,merge:Sn,extend:Ti,assign:et,inherit:Ee,bindFn:qi,prefixed:Di}),(void 0!==L?L:"undefined"!=typeof self?self:{}).Hammer=it,(ee=function(){return it}.call(Ci,j,Ci,Cn))!==ye&&(Cn.exports=ee)}(window,document)},2281:function(Cn){Cn.exports=function(){"use strict";var Ci=Math.PI/180;const ee="undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},L={_global:ee,version:"8.3.14",isBrowser:function j(){return"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window))}(),isUnminified:/param/.test(function(c){}.toString()),dblClickWindow:400,getAngle:c=>L.angleDeg?c*Ci:c,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>L.DD.isDragging,isDragReady:()=>!!L.DD.node,releaseCanvasOnDestroy:!0,document:ee.document,_injectGlobal(c){ee.Konva=c}},M=c=>{L[c.prototype.getClassName()]=c};L._injectGlobal(L);class e{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new e(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){var n=this.m;return{x:n[0]*t.x+n[2]*t.y+n[4],y:n[1]*t.x+n[3]*t.y+n[5]}}translate(t,n){return this.m[4]+=this.m[0]*t+this.m[2]*n,this.m[5]+=this.m[1]*t+this.m[3]*n,this}scale(t,n){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=n,this.m[3]*=n,this}rotate(t){var n=Math.cos(t),o=Math.sin(t),l=this.m[1]*n+this.m[3]*o,h=this.m[0]*-o+this.m[2]*n,u=this.m[1]*-o+this.m[3]*n;return this.m[0]=this.m[0]*n+this.m[2]*o,this.m[1]=l,this.m[2]=h,this.m[3]=u,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,n){var s=this.m[1]+this.m[3]*n,l=this.m[2]+this.m[0]*t,h=this.m[3]+this.m[1]*t;return this.m[0]=this.m[0]+this.m[2]*n,this.m[1]=s,this.m[2]=l,this.m[3]=h,this}multiply(t){var o=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],l=this.m[1]*t.m[2]+this.m[3]*t.m[3],h=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],u=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=this.m[0]*t.m[0]+this.m[2]*t.m[1],this.m[1]=o,this.m[2]=s,this.m[3]=l,this.m[4]=h,this.m[5]=u,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),o=-this.m[1]*t,s=-this.m[2]*t,l=this.m[0]*t,h=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),u=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*t,this.m[1]=o,this.m[2]=s,this.m[3]=l,this.m[4]=h,this.m[5]=u,this}getMatrix(){return this.m}decompose(){var t=this.m[0],n=this.m[1],o=this.m[2],s=this.m[3],u=t*s-n*o;let p={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=n){var _=Math.sqrt(t*t+n*n);p.rotation=n>0?Math.acos(t/_):-Math.acos(t/_),p.scaleX=_,p.scaleY=u/_,p.skewX=(t*o+n*s)/u,p.skewY=0}else if(0!=o||0!=s){var v=Math.sqrt(o*o+s*s);p.rotation=Math.PI/2-(s>0?Math.acos(-o/v):-Math.acos(o/v)),p.scaleX=u/v,p.scaleY=v,p.skewX=0,p.skewY=(t*o+n*s)/u}return p.rotation=A._getRotation(p.rotation),p}}var Ut=Math.PI/180,bt=180/Math.PI,Ni="Konva error: ",Ti={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Sn=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Ee=[];const qi="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(c){setTimeout(c,60)},A={_isElement:c=>!(!c||1!=c.nodeType),_isFunction:c=>!!(c&&c.constructor&&c.call&&c.apply),_isPlainObject:c=>!!c&&c.constructor===Object,_isArray:c=>"[object Array]"===Object.prototype.toString.call(c),_isNumber:c=>"[object Number]"===Object.prototype.toString.call(c)&&!isNaN(c)&&isFinite(c),_isString:c=>"[object String]"===Object.prototype.toString.call(c),_isBoolean:c=>"[object Boolean]"===Object.prototype.toString.call(c),isObject:c=>c instanceof Object,isValidSelector(c){if("string"!=typeof c)return!1;var t=c[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:c=>0===c||c>0?1:-1,requestAnimFrame(c){Ee.push(c),1===Ee.length&&qi(function(){const t=Ee;Ee=[],t.forEach(function(n){n()})})},createCanvasElement(){var c=document.createElement("canvas");try{c.style=c.style||{}}catch(t){}return c},createImageElement:()=>document.createElement("img"),_isInDocument(c){for(;c=c.parentNode;)if(c==document)return!0;return!1},_urlToImage(c,t){var n=A.createImageElement();n.onload=function(){t(n)},n.src=c},_rgbToHex:(c,t,n)=>((1<<24)+(c<<16)+(t<<8)+n).toString(16).slice(1),_hexToRgb(c){c=c.replace("#","");var t=parseInt(c,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){for(var c=(16777215*Math.random()<<0).toString(16);c.length<6;)c="0"+c;return"#"+c},getRGB(c){var t;return c in Ti?{r:(t=Ti[c])[0],g:t[1],b:t[2]}:"#"===c[0]?this._hexToRgb(c.substring(1)):"rgb("===c.substr(0,4)?(t=Sn.exec(c.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:c=>A._namedColorToRBA(c=c||"black")||A._hex3ColorToRGBA(c)||A._hex6ColorToRGBA(c)||A._rgbColorToRGBA(c)||A._rgbaColorToRGBA(c)||A._hslColorToRGBA(c),_namedColorToRBA(c){var t=Ti[c.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(c){if(0===c.indexOf("rgb(")){var t=(c=c.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(c){if(0===c.indexOf("rgba(")){var t=(c=c.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((n,o)=>"%"===n.slice(-1)?3===o?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex6ColorToRGBA(c){if("#"===c[0]&&7===c.length)return{r:parseInt(c.slice(1,3),16),g:parseInt(c.slice(3,5),16),b:parseInt(c.slice(5,7),16),a:1}},_hex3ColorToRGBA(c){if("#"===c[0]&&4===c.length)return{r:parseInt(c[1]+c[1],16),g:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:1}},_hslColorToRGBA(c){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(c)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(c),o=Number(n[0])/360,s=Number(n[1])/100,l=Number(n[2])/100;let h,u,p;if(0===s)return p=255*l,{r:Math.round(p),g:Math.round(p),b:Math.round(p),a:1};h=l<.5?l*(1+s):l+s-l*s;const _=2*l-h,v=[0,0,0];for(let T=0;T<3;T++)u=o+1/3*-(T-1),u<0&&u++,u>1&&u--,p=6*u<1?_+6*(h-_)*u:2*u<1?h:3*u<2?_+(h-_)*(2/3-u)*6:_,v[T]=255*p;return{r:Math.round(v[0]),g:Math.round(v[1]),b:Math.round(v[2]),a:1}}},haveIntersection:(c,t)=>!(t.x>c.x+c.width||t.x+t.width<c.x||t.y>c.y+c.height||t.y+t.height<c.y),cloneObject(c){var t={};for(var n in c)t[n]=this._isPlainObject(c[n])?this.cloneObject(c[n]):this._isArray(c[n])?this.cloneArray(c[n]):c[n];return t},cloneArray:c=>c.slice(0),degToRad:c=>c*Ut,radToDeg:c=>c*bt,_degToRad:c=>(A.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),A.degToRad(c)),_radToDeg:c=>(A.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),A.radToDeg(c)),_getRotation:c=>L.angleDeg?A.radToDeg(c):c,_capitalize:c=>c.charAt(0).toUpperCase()+c.slice(1),throw(c){throw new Error(Ni+c)},error(c){console.error(Ni+c)},warn(c){!L.showWarnings||console.warn("Konva warning: "+c)},each(c,t){for(var n in c)t(n,c[n])},_inRange:(c,t,n)=>t<=c&&c<n,_getProjectionToSegment(c,t,n,o,s,l){var h,u,p,_=(c-n)*(c-n)+(t-o)*(t-o);if(0==_)h=c,u=t,p=(s-n)*(s-n)+(l-o)*(l-o);else{var v=((s-c)*(n-c)+(l-t)*(o-t))/_;v<0?(h=c,u=t,p=(c-s)*(c-s)+(t-l)*(t-l)):v>1?(h=n,u=o,p=(n-s)*(n-s)+(o-l)*(o-l)):p=((h=c+v*(n-c))-s)*(h-s)+((u=t+v*(o-t))-l)*(u-l)}return[h,u,p]},_getProjectionToLine(c,t,n){var o=A.cloneObject(c),s=Number.MAX_VALUE;return t.forEach(function(l,h){if(n||h!==t.length-1){var u=t[(h+1)%t.length],p=A._getProjectionToSegment(l.x,l.y,u.x,u.y,c.x,c.y),v=p[1],T=p[2];T<s&&(o.x=p[0],o.y=v,s=T)}}),o},_prepareArrayForTween(c,t,n){var o,s=[],l=[];if(c.length>t.length){var h=t;t=c,c=h}for(o=0;o<c.length;o+=2)s.push({x:c[o],y:c[o+1]});for(o=0;o<t.length;o+=2)l.push({x:t[o],y:t[o+1]});var u=[];return l.forEach(function(p){var _=A._getProjectionToLine(p,s,n);u.push(_.x),u.push(_.y)}),u},_prepareToStringify(c){var t;for(var n in c.visitedByCircularReferenceRemoval=!0,c)if(c.hasOwnProperty(n)&&c[n]&&"object"==typeof c[n])if(t=Object.getOwnPropertyDescriptor(c,n),c[n].visitedByCircularReferenceRemoval||A._isElement(c[n])){if(!t.configurable)return null;delete c[n]}else if(null===A._prepareToStringify(c[n])){if(!t.configurable)return null;delete c[n]}return delete c.visitedByCircularReferenceRemoval,c},_assign(c,t){for(var n in t)c[n]=t[n];return c},_getFirstPointerId:c=>c.touches?c.changedTouches[0].identifier:c.pointerId||999,releaseCanvas(...c){!L.releaseCanvasOnDestroy||c.forEach(t=>{t.width=0,t.height=0})}};function at(c){return A._isString(c)?'"'+c+'"':"[object Number]"===Object.prototype.toString.call(c)||A._isBoolean(c)?c:Object.prototype.toString.call(c)}function ni(c){return c>255?255:c<0?0:Math.round(c)}function q(){if(L.isUnminified)return function(c,t){return A._isNumber(c)||A.warn(at(c)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),c}}function sn(c){if(L.isUnminified)return function(t,n){let o=A._isNumber(t),s=A._isArray(t)&&t.length==c;return!o&&!s&&A.warn(at(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+c+")"),t}}function ot(){if(L.isUnminified)return function(c,t){return A._isNumber(c)||"auto"===c||A.warn(at(c)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),c}}function st(){if(L.isUnminified)return function(c,t){return A._isString(c)||A.warn(at(c)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),c}}function Ct(){if(L.isUnminified)return function(c,t){const n=A._isString(c),o="[object CanvasGradient]"===Object.prototype.toString.call(c)||c&&c.addColorStop;return n||o||A.warn(at(c)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),c}}function He(){if(L.isUnminified)return function(c,t){return!0===c||!1===c||A.warn(at(c)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),c}}var ri="get",ai="set";const C={addGetterSetter(c,t,n,o,s){C.addGetter(c,t,n),C.addSetter(c,t,o,s),C.addOverloadedGetterSetter(c,t)},addGetter(c,t,n){var o=ri+A._capitalize(t);c.prototype[o]=c.prototype[o]||function(){var s=this.attrs[t];return void 0===s?n:s}},addSetter(c,t,n,o){var s=ai+A._capitalize(t);c.prototype[s]||C.overWriteSetter(c,t,n,o)},overWriteSetter(c,t,n,o){var s=ai+A._capitalize(t);c.prototype[s]=function(l){return n&&null!=l&&(l=n.call(this,l,t)),this._setAttr(t,l),o&&o.call(this),this}},addComponentsGetterSetter(c,t,n,o,s){var _,v,l=n.length,h=A._capitalize,u=ri+h(t),p=ai+h(t);c.prototype[u]=function(){var b={};for(_=0;_<l;_++)b[v=n[_]]=this.getAttr(t+h(v));return b};var T=function Di(c){if(L.isUnminified)return function(t,n){return null==t||A.isObject(t)||A.warn(at(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+c),t}}(n);c.prototype[p]=function(b){var y,P=this.attrs[t];for(y in o&&(b=o.call(this,b)),T&&T.call(this,b,t),b)!b.hasOwnProperty(y)||this._setAttr(t+h(y),b[y]);return b||n.forEach(Z=>{this._setAttr(t+h(Z),void 0)}),this._fireChangeEvent(t,P,b),s&&s.call(this),this},C.addOverloadedGetterSetter(c,t)},addOverloadedGetterSetter(c,t){var n=A._capitalize(t),o=ai+n,s=ri+n;c.prototype[t]=function(){return arguments.length?(this[o](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(c,t,n,o){A.error("Adding deprecated "+t);var s=ri+A._capitalize(t),l=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";c.prototype[s]=function(){A.error(l);var h=this.attrs[t];return void 0===h?n:h},C.addSetter(c,t,o,function(){A.error(l)}),C.addOverloadedGetterSetter(c,t)},backCompat(c,t){A.each(t,function(n,o){var s=c.prototype[o],l=ri+A._capitalize(n),h=ai+A._capitalize(n);function u(){s.apply(this,arguments),A.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+o+'" instead.')}c.prototype[n]=u,c.prototype[l]=u,c.prototype[h]=u})},afterSetFilter(){this._filterUpToDate=!1}};function pt(c){var s,l,t=[],n=c.length,o=A;for(s=0;s<n;s++)o._isNumber(l=c[s])?l=Math.round(1e3*l)/1e3:o._isString(l)||(l+=""),t.push(l);return t}var be=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class xe{constructor(t){this.canvas=t,L.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,n){var h,u,p,_,o=this.traceArr,s=o.length,l="";for(h=0;h<s;h++)(p=(u=o[h]).method)?(_=u.args,l+=p,t?l+="()":A._isArray(_[0])?l+="(["+_.join(",")+"])":(n&&(_=_.map(v=>"number"==typeof v?Math.floor(v):v)),l+="("+_.join(",")+")")):(l+=u.property,t||(l+="="+u.val)),l+=";";return l}clearTrace(){this.traceArr=[]}_trace(t){var n=this.traceArr;n.push(t),n.length>=100&&n.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var n=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(t){var n=t.getLineCap();n&&this.setAttr("lineCap",n)}_applyOpacity(t){var n=t.getAbsoluteOpacity();1!==n&&this.setAttr("globalAlpha",n)}_applyLineJoin(t){var n=t.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(t,n){this._context[t]=n}arc(t,n,o,s,l,h){this._context.arc(t,n,o,s,l,h)}arcTo(t,n,o,s,l){this._context.arcTo(t,n,o,s,l)}beginPath(){this._context.beginPath()}bezierCurveTo(t,n,o,s,l,h){this._context.bezierCurveTo(t,n,o,s,l,h)}clearRect(t,n,o,s){this._context.clearRect(t,n,o,s)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(t,n){var o=arguments;return 2===o.length?this._context.createImageData(t,n):1===o.length?this._context.createImageData(t):void 0}createLinearGradient(t,n,o,s){return this._context.createLinearGradient(t,n,o,s)}createPattern(t,n){return this._context.createPattern(t,n)}createRadialGradient(t,n,o,s,l,h){return this._context.createRadialGradient(t,n,o,s,l,h)}drawImage(t,n,o,s,l,h,u,p,_){var v=arguments,T=this._context;3===v.length?T.drawImage(t,n,o):5===v.length?T.drawImage(t,n,o,s,l):9===v.length&&T.drawImage(t,n,o,s,l,h,u,p,_)}ellipse(t,n,o,s,l,h,u,p){this._context.ellipse(t,n,o,s,l,h,u,p)}isPointInPath(t,n){return this._context.isPointInPath(t,n)}fill(t){t?this._context.fill(t):this._context.fill()}fillRect(t,n,o,s){this._context.fillRect(t,n,o,s)}strokeRect(t,n,o,s){this._context.strokeRect(t,n,o,s)}fillText(t,n,o,s){s?this._context.fillText(t,n,o,s):this._context.fillText(t,n,o)}measureText(t){return this._context.measureText(t)}getImageData(t,n,o,s){return this._context.getImageData(t,n,o,s)}lineTo(t,n){this._context.lineTo(t,n)}moveTo(t,n){this._context.moveTo(t,n)}rect(t,n,o,s){this._context.rect(t,n,o,s)}putImageData(t,n,o){this._context.putImageData(t,n,o)}quadraticCurveTo(t,n,o,s){this._context.quadraticCurveTo(t,n,o,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,n){this._context.scale(t,n)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,n,o,s,l,h){this._context.setTransform(t,n,o,s,l,h)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,n,o,s){this._context.strokeText(t,n,o,s)}transform(t,n,o,s,l,h){this._context.transform(t,n,o,s,l,h)}translate(t,n){this._context.translate(t,n)}_enableTrace(){var s,l,t=this,n=be.length,o=this.setAttr,h=function(u){var _,p=t[u];t[u]=function(){return l=pt(Array.prototype.slice.call(arguments,0)),_=p.apply(t,arguments),t._trace({method:u,args:l}),_}};for(s=0;s<n;s++)h(be[s]);t.setAttr=function(){o.apply(t,arguments);var u=arguments[0],p=arguments[1];("shadowOffsetX"===u||"shadowOffsetY"===u||"shadowBlur"===u)&&(p/=this.canvas.getPixelRatio()),t._trace({property:u,val:p})}}_applyGlobalCompositeOperation(t){const n=t.attrs.globalCompositeOperation;!n||"source-over"===n||this.setAttr("globalCompositeOperation",n)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(c){Object.defineProperty(xe.prototype,c,{get(){return this._context[c]},set(t){this._context[c]=t}})});class oi extends xe{constructor(t){super(t),this._context=t._canvas.getContext("2d")}_fillColor(t){var n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fillRadialGradient(t){var n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fill(t){var n=t.fill(),o=t.getFillPriority();if(n&&"color"===o)this._fillColor(t);else{var s=t.getFillPatternImage();if(s&&"pattern"===o)this._fillPattern(t);else{var l=t.getFillLinearGradientColorStops();if(l&&"linear-gradient"===o)this._fillLinearGradient(t);else{var h=t.getFillRadialGradientColorStops();h&&"radial-gradient"===o?this._fillRadialGradient(t):n?this._fillColor(t):s?this._fillPattern(t):l?this._fillLinearGradient(t):h&&this._fillRadialGradient(t)}}}}_strokeLinearGradient(t){var n=t.getStrokeLinearGradientStartPoint(),o=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(n.x,n.y,o.x,o.y);if(s){for(var h=0;h<s.length;h+=2)l.addColorStop(s[h],s[h+1]);this.setAttr("strokeStyle",l)}}_stroke(t){var n=t.dash(),o=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!o){this.save();var s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),o||this.restore()}}_applyShadow(t){var n,o,s,l=null!==(n=t.getShadowRGBA())&&void 0!==n?n:"black",h=null!==(o=t.getShadowBlur())&&void 0!==o?o:5,u=null!==(s=t.getShadowOffset())&&void 0!==s?s:{x:0,y:0},p=t.getAbsoluteScale(),_=this.canvas.getPixelRatio(),v=p.x*_,T=p.y*_;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",h*Math.min(Math.abs(v),Math.abs(T))),this.setAttr("shadowOffsetX",u.x*v),this.setAttr("shadowOffsetY",u.y*T)}}class si extends xe{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){var n=t.getStrokeScaleEnabled();if(!n){this.save();var o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t);var s=t.hitStrokeWidth(),l="auto"===s?t.strokeWidth():s;this.setAttr("lineWidth",l),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}}}var wt;class $e{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var o=(t||{}).pixelRatio||L.pixelRatio||function zt(){if(wt)return wt;var c=A.createCanvasElement(),t=c.getContext("2d");return wt=(L._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),A.releaseCanvas(c),wt}();this.pixelRatio=o,this._canvas=A.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var n=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,n){this.setWidth(t||0),this.setHeight(n||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch(o){try{return this._canvas.toDataURL()}catch(s){return A.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}C.addGetterSetter($e,"pixelRatio",void 0,q());class Se extends $e{constructor(t={width:0,height:0}){super(t),this.context=new oi(this),this.setSize(t.width,t.height)}}class lt extends $e{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new si(this),this.setSize(t.width,t.height)}}const re={get isDragging(){var c=!1;return re._dragElements.forEach(t=>{"dragging"===t.dragStatus&&(c=!0)}),c},justDragged:!1,get node(){var c;return re._dragElements.forEach(t=>{c=t.node}),c},_dragElements:new Map,_drag(c){const t=[];re._dragElements.forEach((n,o)=>{const{node:s}=n,l=s.getStage();l.setPointersPositions(c),void 0===n.pointerId&&(n.pointerId=A._getFirstPointerId(c));const h=l._changedPointerPositions.find(_=>_.id===n.pointerId);if(h){if("dragging"!==n.dragStatus){var u=s.dragDistance();if(Math.max(Math.abs(h.x-n.startPointerPos.x),Math.abs(h.y-n.startPointerPos.y))<u||(s.startDrag({evt:c}),!s.isDragging()))return}s._setDragPosition(c,n),t.push(s)}}),t.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:c},!0)})},_endDragBefore(c){const t=[];re._dragElements.forEach(n=>{const{node:o}=n,s=o.getStage();if(c&&s.setPointersPositions(c),!s._changedPointerPositions.find(u=>u.id===n.pointerId))return;("dragging"===n.dragStatus||"stopped"===n.dragStatus)&&(re.justDragged=!0,L._mouseListenClick=!1,L._touchListenClick=!1,L._pointerListenClick=!1,n.dragStatus="stopped");const h=n.node.getLayer()||n.node instanceof L.Stage&&n.node;h&&-1===t.indexOf(h)&&t.push(h)}),t.forEach(n=>{n.draw()})},_endDragAfter(c){re._dragElements.forEach((t,n)=>{"stopped"===t.dragStatus&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:c},!0),"dragging"!==t.dragStatus&&re._dragElements.delete(n)})}};L.isBrowser&&(window.addEventListener("mouseup",re._endDragBefore,!0),window.addEventListener("touchend",re._endDragBefore,!0),window.addEventListener("mousemove",re._drag),window.addEventListener("touchmove",re._drag),window.addEventListener("mouseup",re._endDragAfter,!1),window.addEventListener("touchend",re._endDragAfter,!1));var li="absoluteOpacity",St="allEventListeners",me="absoluteTransform",Pn="absoluteScale",Bt="canvas",ct="listening",zi="mouseenter",ci="mouseleave",_t="transform",kt="visible",In=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" ");let Si=1;class R{constructor(t){this._id=Si++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){t!==_t&&t!==me||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}_getCache(t,n){var o=this._cache.get(t);return(void 0===o||(t===_t||t===me)&&!0===o.dirty)&&(o=n.call(this),this._cache.set(t,o)),o}_calculate(t,n,o){if(!this._attachedDepsListeners.get(t)){const s=n.map(l=>l+"Change.konva").join(" ");this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,o)}_getCanvasCache(){return this._cache.get(Bt)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===me&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Bt)){const{scene:t,filter:n,hit:o}=this._cache.get(Bt);A.releaseCanvas(t,n,o),this._cache.delete(Bt)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var n=t||{},o={};(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)&&(o=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var s=Math.ceil(n.width||o.width),l=Math.ceil(n.height||o.height),h=n.pixelRatio,u=void 0===n.x?Math.floor(o.x):n.x,p=void 0===n.y?Math.floor(o.y):n.y,_=n.offset||0,v=n.drawBorder||!1,T=n.hitCanvasPixelRatio||1;if(s&&l){u-=_,p-=_;var b=new Se({pixelRatio:h,width:s+=2*_+1,height:l+=2*_+1}),P=new Se({pixelRatio:h,width:0,height:0}),y=new lt({pixelRatio:T,width:s,height:l}),Z=b.getContext(),E=y.getContext();return y.isCache=!0,b.isCache=!0,this._cache.delete(Bt),this._filterUpToDate=!1,!1===n.imageSmoothingEnabled&&(b.getContext()._context.imageSmoothingEnabled=!1,P.getContext()._context.imageSmoothingEnabled=!1),Z.save(),E.save(),Z.translate(-u,-p),E.translate(-u,-p),this._isUnderCache=!0,this._clearSelfAndDescendantCache(li),this._clearSelfAndDescendantCache(Pn),this.drawScene(b,this),this.drawHit(y,this),this._isUnderCache=!1,Z.restore(),E.restore(),v&&(Z.save(),Z.beginPath(),Z.rect(0,0,s,l),Z.closePath(),Z.setAttr("strokeStyle","red"),Z.setAttr("lineWidth",5),Z.stroke(),Z.restore()),this._cache.set(Bt,{scene:b,filter:P,hit:y,x:u,y:p}),this._requestDraw(),this}A.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(Bt)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,n){var s,l,h,u,o=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],p=this.getAbsoluteTransform(n);return o.forEach(function(_){var v=p.point(_);void 0===s&&(s=h=v.x,l=u=v.y),s=Math.min(s,v.x),l=Math.min(l,v.y),h=Math.max(h,v.x),u=Math.max(u,v.y)}),{x:s,y:l,width:h-s,height:u-l}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();t.translate(n.x,n.y);var o=this._getCachedSceneCanvas(),s=o.pixelRatio;t.drawImage(o._canvas,0,0,o.width/s,o.height/s),t.restore()}_drawCachedHitCanvas(t){var n=this._getCanvasCache(),o=n.hit;t.save(),t.translate(n.x,n.y),t.drawImage(o._canvas,0,0,o.width/o.pixelRatio,o.height/o.pixelRatio),t.restore()}_getCachedSceneCanvas(){var h,u,p,_,t=this.filters(),n=this._getCanvasCache(),o=n.scene,s=n.filter,l=s.getContext();if(t){if(!this._filterUpToDate){var v=o.pixelRatio;s.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(h=t.length,l.clear(),l.drawImage(o._canvas,0,0,o.getWidth()/v,o.getHeight()/v),u=l.getImageData(0,0,s.getWidth(),s.getHeight()),p=0;p<h;p++)"function"==typeof(_=t[p])?(_.call(this,u),l.putImageData(u,0,0)):A.error("Filter should be type of function, but got "+typeof _+" instead. Please check correct filters")}catch(T){A.error("Unable to apply filter. "+T.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return o}on(t,n){if(this._cache&&this._cache.delete(St),3===arguments.length)return this._delegate.apply(this,arguments);var l,u,p,_,o=t.split(" "),s=o.length;for(l=0;l<s;l++)_=(u=o[l].split("."))[1]||"",this.eventListeners[p=u[0]]||(this.eventListeners[p]=[]),this.eventListeners[p].push({name:_,handler:n});return this}off(t,n){var l,h,p,_,v,o=(t||"").split(" "),s=o.length;if(this._cache&&this._cache.delete(St),!t)for(h in this.eventListeners)this._off(h);for(l=0;l<s;l++)if(v=(p=o[l].split("."))[1],_=p[0])this.eventListeners[_]&&this._off(_,v,n);else for(h in this.eventListeners)this._off(h,v,n);return this}dispatchEvent(t){return this.fire(t.type,{target:this,type:t.type,evt:t}),this}addEventListener(t,n){return this.on(t,function(o){n.call(this,o.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,n,o){var s=this;this.on(t,function(l){for(var h=l.target.findAncestors(n,!0,s),u=0;u<h.length;u++)(l=A.cloneObject(l)).currentTarget=h[u],o.call(h[u],l)})}remove(){return this.isDragging()&&this.stopDrag(),re._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(me),this._clearSelfAndDescendantCache(li),this._clearSelfAndDescendantCache(Pn),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache(kt),this._clearSelfAndDescendantCache(ct)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){var n="get"+A._capitalize(t);return A._isFunction(this[n])?this[n]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),n=[];t;)n.push(t),t=t.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var n,o;if(!t)return this;for(n in t)"children"!==n&&(o="set"+A._capitalize(n),A._isFunction(this[o])?this[o](t[n]):this._setAttr(n,t[n]))}),this}isListening(){return this._getCache(ct,this._isListening)}_isListening(t){if(!this.listening())return!1;const o=this.getParent();return!o||o===t||this===t||o._isListening(t)}isVisible(){return this._getCache(kt,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const o=this.getParent();return!o||o===t||this===t||o._isVisible(t)}shouldDrawHit(t,n=!1){if(t)return this._isVisible(t)&&this._isListening(t);var o=this.getLayer(),s=!1;re._dragElements.forEach(h=>{"dragging"===h.dragStatus&&("Stage"===h.node.nodeType||h.node.getLayer()===o)&&(s=!0)});var l=!n&&!L.hitOnDragEnabled&&s;return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var s,l,h,u,t=this.getDepth(),n=this,o=0;return"Stage"!==n.nodeType&&function p(_){for(s=[],l=_.length,h=0;h<l;h++)o++,"Shape"!==(u=_[h]).nodeType&&(s=s.concat(u.getChildren().slice())),u._id===n._id&&(h=l);s.length>0&&s[0].getDepth()<=t&&p(s)}(n.getStage().getChildren()),o}getDepth(){for(var t=0,n=this.parent;n;)t++,n=n.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(_t),this._clearSelfAndDescendantCache(me)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(t)}getAbsolutePosition(t){let n=!1,o=this.parent;for(;o;){if(o.isCached()){n=!0;break}o=o.parent}n&&!t&&(t=!0);var s=this.getAbsoluteTransform(t).getMatrix(),l=new e,h=this.offset();return l.m=s.slice(),l.translate(h.x,h.y),l.getTranslation()}setAbsolutePosition(t){var n=this._clearTransform();this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,this._clearCache(_t);var o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(t.x,t.y),t={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(n),this.setPosition({x:t.x,y:t.y}),this._clearCache(_t),this._clearSelfAndDescendantCache(me),this}_setTransform(t){var n;for(n in t)this.attrs[n]=t[n]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var n=t.x,o=t.y,s=this.x(),l=this.y();return void 0!==n&&(s+=n),void 0!==o&&(l+=o),this.setPosition({x:s,y:l}),this}_eachAncestorReverse(t,n){var l,h,o=[],s=this.getParent();if(!n||n._id!==this._id){for(o.unshift(this);s&&(!n||s._id!==n._id);)o.unshift(s),s=s.parent;for(l=o.length,h=0;h<l;h++)t(o[h])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return A.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return A.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return A.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return A.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(t){return this.parent?((t<0||t>=this.parent.children.length)&&A.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+"."),this.parent.children.splice(this.index,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this):(A.warn("Node has no parent. zIndex parameter is ignored."),this)}getAbsoluteOpacity(){return this._getCache(li,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(t*=n.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var o,s,l,h,t={},n=this.getAttrs();for(o in t.attrs={},n)(!A.isObject(s=n[o])||A._isPlainObject(s)||A._isArray(s))&&(l="function"==typeof this[o]&&this[o],delete n[o],h=l?l.call(this):null,n[o]=s,h!==s&&(t.attrs[o]=s));return t.className=this.getClassName(),A._prepareToStringify(t)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,n,o){var s=[];n&&this._isMatch(t)&&s.push(this);for(var l=this.parent;l;){if(l===o)return s;l._isMatch(t)&&s.push(l),l=l.parent}return s}isAncestorOf(t){return!1}findAncestor(t,n,o){return this.findAncestors(t,n,o)[0]}_isMatch(t){if(!t)return!1;if("function"==typeof t)return t(this);var s,l,n=t.replace(/ /g,"").split(","),o=n.length;for(s=0;s<o;s++)if(A.isValidSelector(l=n[s])||(A.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),A.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),A.warn("Konva is awesome, right?")),"#"===l.charAt(0)){if(this.id()===l.slice(1))return!0}else if("."===l.charAt(0)){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache("stage",this._getStage)}_getStage(){var t=this.getParent();if(t)return t.getStage()}fire(t,n={},o){return n.target=n.target||this,o?this._fireAndBubble(t,n):this._fire(t,n),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(me,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var n;if(t)return n=new e,this._eachAncestorReverse(function(s){var l=s.transformsEnabled();"all"===l?n.multiply(s.getTransform()):"position"===l&&n.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},t),n;n=this._cache.get(me)||new e,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var o=this.transformsEnabled();return"all"===o?n.multiply(this.getTransform()):"position"===o&&n.translate((this.attrs.x||0)-(this.attrs.offsetX||0),(this.attrs.y||0)-(this.attrs.offsetY||0)),n.dirty=!1,n}getAbsoluteScale(t){for(var n=this;n;)n._isUnderCache&&(t=n),n=n.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(_t,this._getTransform)}_getTransform(){var t,n,o=this._cache.get(_t)||new e;o.reset();var s=this.x(),l=this.y(),h=L.getAngle(this.rotation()),u=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,p=null!==(n=this.attrs.scaleY)&&void 0!==n?n:1,_=this.attrs.skewX||0,v=this.attrs.skewY||0,T=this.attrs.offsetX||0,b=this.attrs.offsetY||0;return(0!==s||0!==l)&&o.translate(s,l),0!==h&&o.rotate(h),(0!==_||0!==v)&&o.skew(_,v),(1!==u||1!==p)&&o.scale(u,p),(0!==T||0!==b)&&o.translate(-1*T,-1*b),o.dirty=!1,o}clone(t){var o,s,l,h,u,n=A.cloneObject(this.attrs);for(o in t)n[o]=t[o];var p=new this.constructor(n);for(o in this.eventListeners)for(l=(s=this.eventListeners[o]).length,h=0;h<l;h++)(u=s[h]).name.indexOf("konva")<0&&(p.eventListeners[o]||(p.eventListeners[o]=[]),p.eventListeners[o].push(u));return p}_toKonvaCanvas(t){t=t||{};var n=this.getClientRect(),o=this.getStage(),s=void 0!==t.x?t.x:Math.floor(n.x),l=void 0!==t.y?t.y:Math.floor(n.y),h=t.pixelRatio||1,u=new Se({width:t.width||Math.ceil(n.width)||(o?o.width():0),height:t.height||Math.ceil(n.height)||(o?o.height():0),pixelRatio:h}),p=u.getContext();return!1===t.imageSmoothingEnabled&&(p._context.imageSmoothingEnabled=!1),p.save(),(s||l)&&p.translate(-1*s,-1*l),this.drawScene(u),p.restore(),u}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){var n=(t=t||{}).mimeType||null,o=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(n,o);return t.callback&&t.callback(s),s}toImage(t){return new Promise((n,o)=>{try{const s=null==t?void 0:t.callback;s&&delete t.callback,A._urlToImage(this.toDataURL(t),function(l){n(l),null==s||s(l)})}catch(s){o(s)}})}toBlob(t){return new Promise((n,o)=>{try{const s=null==t?void 0:t.callback;s&&delete t.callback,this.toCanvas(t).toBlob(l=>{n(l),null==s||s(l)})}catch(s){o(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():L.dragDistance}_off(t,n,o){var l,h,s=this.eventListeners[t];for(l=0;l<s.length;l++)if(!("konva"===(h=s[l].name)&&"konva"!==n||n&&h!==n||o&&o!==s[l].handler)){if(s.splice(l,1),0===s.length){delete this.eventListeners[t];break}l--}}_fireChangeEvent(t,n,o){this._fire(t+"Change",{oldVal:n,newVal:o})}addName(t){if(!this.hasName(t)){var n=this.name();this.name(n?n+" "+t:t)}return this}hasName(t){if(!t)return!1;const n=this.name();return!!n&&-1!==(n||"").split(/\s/g).indexOf(t)}removeName(t){var n=(this.name()||"").split(/\s/g),o=n.indexOf(t);return-1!==o&&(n.splice(o,1),this.name(n.join(" "))),this}setAttr(t,n){var o=this["set"+A._capitalize(t)];return A._isFunction(o)?o.call(this,n):this._setAttr(t,n),this}_requestDraw(){if(L.autoDrawEnabled){const t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}_setAttr(t,n){var o=this.attrs[t];o===n&&!A.isObject(n)||(null==n?delete this.attrs[t]:this.attrs[t]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(t,o,n),this._requestDraw())}_setComponentAttr(t,n,o){var s;void 0!==o&&((s=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][n]=o,this._fireChangeEvent(t,s,o))}_fireAndBubble(t,n,o){if(n&&"Shape"===this.nodeType&&(n.target=this),t!==zi&&t!==ci||!(o&&(this===o||this.isAncestorOf&&this.isAncestorOf(o))||"Stage"===this.nodeType&&!o)){this._fire(t,n);var l=(t===zi||t===ci)&&o&&o.isAncestorOf&&o.isAncestorOf(this)&&!o.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!l&&(o&&o.parent?this._fireAndBubble.call(this.parent,t,n,o):this._fireAndBubble.call(this.parent,t,n))}}_getProtoListeners(t){let n=this._cache.get(St);if(!n){n={};let s=Object.getPrototypeOf(this);for(;s;)if(s.eventListeners){for(var o in s.eventListeners)n[o]=s.eventListeners[o].concat(n[o]||[]);s=Object.getPrototypeOf(s)}else s=Object.getPrototypeOf(s);this._cache.set(St,n)}return n[t]}_fire(t,n){(n=n||{}).currentTarget=this,n.type=t;const o=this._getProtoListeners(t);if(o)for(var s=0;s<o.length;s++)o[s].handler.call(this,n);const l=this.eventListeners[t];if(l)for(s=0;s<l.length;s++)l[s].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var n=t?t.pointerId:void 0,o=this.getStage(),s=this.getAbsolutePosition(),l=o._getPointerById(n)||o._changedPointerPositions[0]||s;re._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-s.x,y:l.y-s.y},dragStatus:"ready",pointerId:n})}startDrag(t,n=!0){re._dragElements.has(this._id)||this._createDragElement(t),re._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},n)}_setDragPosition(t,n){const o=this.getStage()._getPointerById(n.pointerId);if(o){var s={x:o.x-n.offset.x,y:o.y-n.offset.y},l=this.dragBoundFunc();if(void 0!==l){const h=l.call(this,s,t);h?s=h:A.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}}stopDrag(t){const n=re._dragElements.get(this._id);n&&(n.dragStatus="stopped"),re._endDragBefore(t),re._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=re._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if((void 0===t.evt.button||L.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var s=!1;re._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(s=!0)}),s||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=re._dragElements.get(this._id),s=n&&"ready"===n.dragStatus;n&&"dragging"===n.dragStatus?this.stopDrag():s&&re._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const n=this.getStage();if(!n)return!1;const o={x:-t.x,y:-t.y,width:n.width()+2*t.x,height:n.height()+2*t.y};return A.haveIntersection(o,this.getClientRect())}static create(t,n){return A._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)}static _createNode(t,n){var l,h,u,o=R.prototype.getClassName.call(t),s=t.children;if(n&&(t.attrs.container=n),L[o]||(A.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape"),l=new(0,L[o])(t.attrs),s)for(h=s.length,u=0;u<h;u++)l.add(R._createNode(s[u]));return l}}R.prototype.nodeType="Node",R.prototype._attrsAffectingSize=[],R.prototype.eventListeners={},R.prototype.on.call(R.prototype,In,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(_t),this._clearSelfAndDescendantCache(me))}),R.prototype.on.call(R.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(kt)}),R.prototype.on.call(R.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(ct)}),R.prototype.on.call(R.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(li)});const le=C.addGetterSetter;le(R,"zIndex"),le(R,"absolutePosition"),le(R,"position"),le(R,"x",0,q()),le(R,"y",0,q()),le(R,"globalCompositeOperation","source-over",st()),le(R,"opacity",1,q()),le(R,"name","",st()),le(R,"id","",st()),le(R,"rotation",0,q()),C.addComponentsGetterSetter(R,"scale",["x","y"]),le(R,"scaleX",1,q()),le(R,"scaleY",1,q()),C.addComponentsGetterSetter(R,"skew",["x","y"]),le(R,"skewX",0,q()),le(R,"skewY",0,q()),C.addComponentsGetterSetter(R,"offset",["x","y"]),le(R,"offsetX",0,q()),le(R,"offsetY",0,q()),le(R,"dragDistance",null,q()),le(R,"width",0,q()),le(R,"height",0,q()),le(R,"listening",!0,He()),le(R,"preventDefault",!0,He()),le(R,"filters",null,function(c){return this._filterUpToDate=!1,c}),le(R,"visible",!0,He()),le(R,"transformsEnabled","all",st()),le(R,"size"),le(R,"dragBoundFunc"),le(R,"draggable",!1,He()),C.backCompat(R,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Oe extends R{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];var o=[];return(this.children||[]).forEach(function(s){t(s)&&o.push(s)}),o}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var o=t[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var n=this._generalFind(t,!0);return n.length>0?n[0]:void 0}_generalFind(t,n){var o=[];return this._descendants(s=>{const l=s._isMatch(t);return l&&o.push(s),!(!l||!n)}),o}_descendants(t){let n=!1;const o=this.getChildren();for(const s of o){if(n=t(s),n)return!0;if(s.hasChildren()&&(n=s._descendants(t),n))return!0}return!1}toObject(){var t=R.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(n=>{t.children.push(n.toObject())}),t}isAncestorOf(t){for(var n=t.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(t){var n=R.prototype.clone.call(this,t);return this.getChildren().forEach(function(o){n.add(o.clone())}),n}getAllIntersections(t){var n=[];return this.find("Shape").forEach(function(o){o.isVisible()&&o.intersects(t)&&n.push(o)}),n}_clearSelfAndDescendantCache(t){var n;super._clearSelfAndDescendantCache(t),!this.isCached()&&(null===(n=this.children)||void 0===n||n.forEach(function(o){o._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;null===(t=this.children)||void 0===t||t.forEach(function(n,o){n.index=o}),this._requestDraw()}drawScene(t,n){var o=this.getLayer(),s=t||o&&o.getCanvas(),l=s&&s.getContext(),h=this._getCanvasCache(),u=h&&h.scene,p=s&&s.isCache;if(!this.isVisible()&&!p)return this;if(u){l.save();var _=this.getAbsoluteTransform(n).getMatrix();l.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedSceneCanvas(l),l.restore()}else this._drawChildren("drawScene",s,n);return this}drawHit(t,n){if(!this.shouldDrawHit(n))return this;var o=this.getLayer(),s=t||o&&o.hitCanvas,l=s&&s.getContext(),h=this._getCanvasCache();if(h&&h.hit){l.save();var p=this.getAbsoluteTransform(n).getMatrix();l.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",s,n);return this}_drawChildren(t,n,o){var s,l=n&&n.getContext(),h=this.clipWidth(),u=this.clipHeight(),p=this.clipFunc(),_=h&&u||p;const v=o===this;if(_){l.save();var T=this.getAbsoluteTransform(o),b=T.getMatrix();if(l.transform(b[0],b[1],b[2],b[3],b[4],b[5]),l.beginPath(),p)p.call(this,l,this);else{var P=this.clipX(),y=this.clipY();l.rect(P,y,h,u)}l.clip(),b=T.copy().invert().getMatrix(),l.transform(b[0],b[1],b[2],b[3],b[4],b[5])}var Z=!v&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;Z&&(l.save(),l._applyGlobalCompositeOperation(this)),null===(s=this.children)||void 0===s||s.forEach(function(E){E[t](n,o)}),Z&&l.restore(),_&&l.restore()}getClientRect(t){var n,l,h,u,p,_,o=(t=t||{}).skipTransform,s=t.relativeTo,v=this;null===(n=this.children)||void 0===n||n.forEach(function(Z){if(Z.visible()){var E=Z.getClientRect({relativeTo:v,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===E.width&&0===E.height||(void 0===l?(l=E.x,h=E.y,u=E.x+E.width,p=E.y+E.height):(l=Math.min(l,E.x),h=Math.min(h,E.y),u=Math.max(u,E.x+E.width),p=Math.max(p,E.y+E.height)))}});for(var T=this.find("Shape"),b=!1,P=0;P<T.length;P++)if(T[P]._isVisible(this)){b=!0;break}return _=b&&void 0!==l?{x:l,y:h,width:u-l,height:p-h}:{x:0,y:0,width:0,height:0},o?_:this._transformedRect(_,s)}}C.addComponentsGetterSetter(Oe,"clip",["x","y","width","height"]),C.addGetterSetter(Oe,"clipX",void 0,q()),C.addGetterSetter(Oe,"clipY",void 0,q()),C.addGetterSetter(Oe,"clipWidth",void 0,q()),C.addGetterSetter(Oe,"clipHeight",void 0,q()),C.addGetterSetter(Oe,"clipFunc");const Ht=new Map,Pi=void 0!==L._global.PointerEvent;function Hi(c){return Ht.get(c)}function Yi(c){return{evt:c,pointerId:c.pointerId}}function hn(c,t){return Ht.get(c)===t}function Ji(c,t){hi(c),t.getStage()&&(Ht.set(c,t),Pi&&t._fire("gotpointercapture",Yi(new PointerEvent("gotpointercapture"))))}function hi(c,t){const n=Ht.get(c);n&&(n.getStage(),Ht.delete(c),Pi&&n._fire("lostpointercapture",Yi(new PointerEvent("lostpointercapture"))))}var Mn="mouseleave",Zn="mouseover",Qi="mouseenter",On="mousemove",Vi="mousedown",dn="mouseup",H="pointermove",tt="pointerdown",Ne="pointerup",qe="pointercancel",je="pointerout",mt="pointerleave",ft="pointerover",It="pointerenter",di="contextmenu",ze="touchstart",un="touchend",ui="touchmove",Be="touchcancel",vt="wheel",ht=[[Qi,"_pointerenter"],[Vi,"_pointerdown"],[On,"_pointermove"],[dn,"_pointerup"],[Mn,"_pointerleave"],[ze,"_pointerdown"],[ui,"_pointermove"],[un,"_pointerup"],[Be,"_pointercancel"],[Zn,"_pointerover"],[vt,"_wheel"],[di,"_contextmenu"],[tt,"_pointerdown"],[H,"_pointermove"],[Ne,"_pointerup"],[qe,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const Et={mouse:{[je]:"mouseout",[mt]:Mn,[ft]:Zn,[It]:Qi,[H]:On,[tt]:Vi,[Ne]:dn,[qe]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[je]:"touchout",[mt]:"touchleave",[ft]:"touchover",[It]:"touchenter",[H]:ui,[tt]:ze,[Ne]:un,[qe]:Be,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[je]:je,[mt]:mt,[ft]:ft,[It]:It,[H]:H,[tt]:tt,[Ne]:Ne,[qe]:qe,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Me=c=>c.indexOf("pointer")>=0?"pointer":c.indexOf("touch")>=0?"touch":"mouse",Ze=c=>{const t=Me(c);return"pointer"===t?L.pointerEventsEnabled&&Et.pointer:"touch"===t?Et.touch:"mouse"===t?Et.mouse:void 0};function Mt(c={}){return(c.clipFunc||c.clipWidth||c.clipHeight)&&A.warn("Stage does not support clipping. Please use clip for Layers or Groups."),c}const dt=[];class De extends Oe{constructor(t){super(Mt(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),dt.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Mt(this.attrs)}),this._checkVisibility()}_validateAdd(t){const n="Layer"===t.getType(),o="FastLayer"===t.getType();n||o||A.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if("string"==typeof t){if("."===t.charAt(0)){var n=t.slice(1);t=document.getElementsByClassName(n)[0]}else{var o;o="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(o)}if(!t)throw"Can not find container in document with id "+o}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var o,t=this.children,n=t.length;for(o=0;o<n;o++)t[o].clear();return this}clone(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),Oe.prototype.clone.call(this,t)}destroy(){super.destroy();var t=this.content;t&&A._isInDocument(t)&&this.container().removeChild(t);var n=dt.indexOf(this);return n>-1&&dt.splice(n,1),A.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(A.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(t){return this._pointerPositions.find(n=>n.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var n=new Se({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),o=n.getContext()._context,s=this.children;return(t.x||t.y)&&o.translate(-1*t.x,-1*t.y),s.forEach(function(l){if(l.isVisible()){var h=l._toKonvaCanvas(t);o.drawImage(h._canvas,t.x,t.y,h.getWidth()/h.getPixelRatio(),h.getHeight()/h.getPixelRatio())}}),n}getIntersection(t){if(!t)return null;var l,n=this.children;for(l=n.length-1;l>=0;l--){const h=n[l].getIntersection(t);if(h)return h}return null}_resizeDOM(){var t=this.width(),n=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=n+"px"),this.bufferCanvas.setSize(t,n),this.bufferHitCanvas.setSize(t,n),this.children.forEach(o=>{o.setSize({width:t,height:n}),o.draw()})}add(t,...n){if(arguments.length>1){for(var o=0;o<arguments.length;o++)this.add(arguments[o]);return this}super.add(t);var s=this.children.length;return s>5&&A.warn("The stage has "+s+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),L.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return hn(t,this)}setPointerCapture(t){Ji(t,this)}releaseCapture(t){hi(t)}getLayers(){return this.children}_bindContentEvents(){!L.isBrowser||ht.forEach(([t,n])=>{this.content.addEventListener(t,o=>{this[n](o)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const n=Ze(t.type);this._fire(n.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const n=Ze(t.type);this._fire(n.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let n=this[t+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(t){const n=Ze(t.type),o=Me(t.type);if(n){this.setPointersPositions(t);var s=this._getTargetShape(o),l=!re.isDragging||L.hitOnDragEnabled;s&&l?(s._fireAndBubble(n.pointerout,{evt:t}),s._fireAndBubble(n.pointerleave,{evt:t}),this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this[o+"targetShape"]=null):l&&(this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(t){const n=Ze(t.type),o=Me(t.type);if(n){this.setPointersPositions(t);var s=!1;this._changedPointerPositions.forEach(l=>{var h=this.getIntersection(l);if(re.justDragged=!1,L["_"+o+"ListenClick"]=!0,!h||!h.isListening())return;L.capturePointerEventsEnabled&&h.setPointerCapture(l.id),this[o+"ClickStartShape"]=h,h._fireAndBubble(n.pointerdown,{evt:t,pointerId:l.id}),s=!0;const p=t.type.indexOf("touch")>=0;h.preventDefault()&&t.cancelable&&p&&t.preventDefault()}),s||this._fire(n.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){const n=Ze(t.type),o=Me(t.type);if(!n)return;if(re.isDragging&&re.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t),re.isDragging&&!L.hitOnDragEnabled)return;var l={};let h=!1;var u=this._getTargetShape(o);this._changedPointerPositions.forEach(p=>{const _=Hi(p.id)||this.getIntersection(p),v=p.id,T={evt:t,pointerId:v};var b=u!==_;if(b&&u&&(u._fireAndBubble(n.pointerout,Object.assign({},T),_),u._fireAndBubble(n.pointerleave,Object.assign({},T),_)),_){if(l[_._id])return;l[_._id]=!0}_&&_.isListening()?(h=!0,b&&(_._fireAndBubble(n.pointerover,Object.assign({},T),u),_._fireAndBubble(n.pointerenter,Object.assign({},T),u),this[o+"targetShape"]=_),_._fireAndBubble(n.pointermove,Object.assign({},T))):u&&(this._fire(n.pointerover,{evt:t,target:this,currentTarget:this,pointerId:v}),this[o+"targetShape"]=null)}),h||this._fire(n.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const n=Ze(t.type),o=Me(t.type);if(!n)return;this.setPointersPositions(t);const s=this[o+"ClickStartShape"],l=this[o+"ClickEndShape"];var h={};let u=!1;this._changedPointerPositions.forEach(p=>{const _=Hi(p.id)||this.getIntersection(p);if(_){if(_.releaseCapture(p.id),h[_._id])return;h[_._id]=!0}const v=p.id,T={evt:t,pointerId:v};let b=!1;L["_"+o+"InDblClickWindow"]?(b=!0,clearTimeout(this[o+"DblTimeout"])):re.justDragged||(L["_"+o+"InDblClickWindow"]=!0,clearTimeout(this[o+"DblTimeout"])),this[o+"DblTimeout"]=setTimeout(function(){L["_"+o+"InDblClickWindow"]=!1},L.dblClickWindow),_&&_.isListening()?(u=!0,this[o+"ClickEndShape"]=_,_._fireAndBubble(n.pointerup,Object.assign({},T)),L["_"+o+"ListenClick"]&&s&&s===_&&(_._fireAndBubble(n.pointerclick,Object.assign({},T)),b&&l&&l===_&&_._fireAndBubble(n.pointerdblclick,Object.assign({},T)))):(this[o+"ClickEndShape"]=null,L["_"+o+"ListenClick"]&&this._fire(n.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:v}),b&&this._fire(n.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:v}))}),u||this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),L["_"+o+"ListenClick"]=!1,t.cancelable&&"touch"!==o&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(di,{evt:t}):this._fire(di,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(vt,{evt:t}):this._fire(vt,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const n=Hi(t.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Ne,Yi(t)),hi(t.pointerId)}_lostpointercapture(t){hi(t.pointerId)}setPointersPositions(t){var n=this._getContentPosition(),o=null,s=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,l=>{this._pointerPositions.push({id:l.identifier,x:(l.clientX-n.left)/n.scaleX,y:(l.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,l=>{this._changedPointerPositions.push({id:l.identifier,x:(l.clientX-n.left)/n.scaleX,y:(l.clientY-n.top)/n.scaleY})})):(this.pointerPos={x:o=(t.clientX-n.left)/n.scaleX,y:s=(t.clientY-n.top)/n.scaleY},this._pointerPositions=[{x:o,y:s,id:A._getFirstPointerId(t)}],this._changedPointerPositions=[{x:o,y:s,id:A._getFirstPointerId(t)}])}_setPointerPosition(t){A.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Se({width:this.width(),height:this.height()}),this.bufferHitCanvas=new lt({pixelRatio:1,width:this.width(),height:this.height()}),L.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return A.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}De.prototype.nodeType="Stage",M(De),C.addGetterSetter(De,"container");var gi="hasShadow",Yt="shadowRGBA",pi="patternImage",ki="linearGradient",Ii="radialGradient";let Je;function it(){return Je||(Je=A.createCanvasElement().getContext("2d"),Je)}const _i={};class S extends R{constructor(t){let n;for(super(t);n=A.getRandomColor(),!n||n in _i;);this.colorKey=n,_i[n]=this}getContext(){return A.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return A.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(gi,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(pi,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const n=it().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const o=new e;o.translate(this.fillPatternX(),this.fillPatternY()),o.rotate(L.getAngle(this.fillPatternRotation())),o.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),o.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=o.getMatrix(),l="undefined"==typeof DOMMatrix?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);n.setTransform(l)}return n}}_getLinearGradient(){return this._getCache(ki,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var n=it(),o=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),l=n.createLinearGradient(o.x,o.y,s.x,s.y),h=0;h<t.length;h+=2)l.addColorStop(t[h],t[h+1]);return l}}_getRadialGradient(){return this._getCache(Ii,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var n=it(),o=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),l=n.createRadialGradient(o.x,o.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius()),h=0;h<t.length;h+=2)l.addColorStop(t[h],t[h+1]);return l}}getShadowRGBA(){return this._getCache(Yt,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var t=A.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var o=this.getStage().bufferHitCanvas;return o.getContext().clear(),this.drawHit(o,null,!0),o.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return R.prototype.destroy.call(this),delete _i[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var n;if(!this.getStage()||null!==(n=this.attrs.perfectDrawEnabled)&&void 0!==n&&!n)return!1;const s=t||this.hasFill(),l=this.hasStroke(),h=1!==this.getAbsoluteOpacity();if(s&&l&&h)return!0;const u=this.hasShadow(),p=this.shadowForStrokeEnabled();return!!(s&&l&&u&&p)}setStrokeHitEnabled(t){A.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),this.hitStrokeWidth(t?"auto":0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){const n=t.skipTransform,o=t.relativeTo,s=this.getSelfRect(),h=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,u=s.width+h,p=s.height+h,_=!t.skipShadow&&this.hasShadow(),v=_?this.shadowOffsetX():0,T=_?this.shadowOffsetY():0,b=u+Math.abs(v),P=p+Math.abs(T),y=_&&this.shadowBlur()||0,F={width:b+2*y,height:P+2*y,x:-(h/2+y)+Math.min(v,0)+s.x,y:-(h/2+y)+Math.min(T,0)+s.y};return n?F:this._transformedRect(F,o)}drawScene(t,n){var v,T,o=this.getLayer(),s=t||o.getCanvas(),l=s.getContext(),h=this._getCanvasCache(),u=this.getSceneFunc(),p=this.hasShadow(),b=s.isCache,P=n===this;if(!this.isVisible()&&!P)return this;if(h){l.save();var y=this.getAbsoluteTransform(n).getMatrix();return l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(l),l.restore(),this}if(!u)return this;if(l.save(),this._useBufferCanvas()&&!b){(T=(v=this.getStage().bufferCanvas).getContext()).clear(),T.save(),T._applyLineJoin(this);var Z=this.getAbsoluteTransform(n).getMatrix();T.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),u.call(this,T,this),T.restore();var E=v.pixelRatio;p&&l._applyShadow(this),l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(v._canvas,0,0,v.width/E,v.height/E)}else l._applyLineJoin(this),P||(Z=this.getAbsoluteTransform(n).getMatrix(),l.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),p&&l._applyShadow(this),u.call(this,l,this);return l.restore(),this}drawHit(t,n,o=!1){if(!this.shouldDrawHit(n,o))return this;var s=this.getLayer(),l=t||s.hitCanvas,h=l&&l.getContext(),u=this.hitFunc()||this.sceneFunc(),p=this._getCanvasCache(),_=p&&p.hit;if(this.colorKey||A.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),_){h.save();var v=this.getAbsoluteTransform(n).getMatrix();return h.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(h),h.restore(),this}if(!u)return this;if(h.save(),h._applyLineJoin(this),this!==n){var b=this.getAbsoluteTransform(n).getMatrix();h.transform(b[0],b[1],b[2],b[3],b[4],b[5])}return u.call(this,h,this),h.restore(),this}drawHitFromCache(t=0){var p,_,v,T,b,n=this._getCanvasCache(),o=this._getCachedSceneCanvas(),s=n.hit,l=s.getContext(),h=s.getWidth(),u=s.getHeight();l.clear(),l.drawImage(o._canvas,0,0,h,u);try{for(v=(_=(p=l.getImageData(0,0,h,u)).data).length,T=A._hexToRgb(this.colorKey),b=0;b<v;b+=4)_[b+3]>t?(_[b]=T.r,_[b+1]=T.g,_[b+2]=T.b,_[b+3]=255):_[b+3]=0;l.putImageData(p,0,0)}catch(y){A.error("Unable to draw hit graph from cached scene canvas. "+y.message)}return this}hasPointerCapture(t){return hn(t,this)}setPointerCapture(t){Ji(t,this)}releaseCapture(t){hi(t)}}S.prototype._fillFunc=function Zt(c){c.fill()},S.prototype._strokeFunc=function Jt(c){c.stroke()},S.prototype._fillFuncHit=function mi(c){c.fill()},S.prototype._strokeFuncHit=function Ke(c){c.stroke()},S.prototype._centroid=!1,S.prototype.nodeType="Shape",M(S),S.prototype.eventListeners={},S.prototype.on.call(S.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function gn(){this._clearCache(gi)}),S.prototype.on.call(S.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function m(){this._clearCache(Yt)}),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function x(){this._clearCache(pi)}),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function w(){this._clearCache(ki)}),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function I(){this._clearCache(Ii)}),C.addGetterSetter(S,"stroke",void 0,Ct()),C.addGetterSetter(S,"strokeWidth",2,q()),C.addGetterSetter(S,"fillAfterStrokeEnabled",!1),C.addGetterSetter(S,"hitStrokeWidth","auto",ot()),C.addGetterSetter(S,"strokeHitEnabled",!0,He()),C.addGetterSetter(S,"perfectDrawEnabled",!0,He()),C.addGetterSetter(S,"shadowForStrokeEnabled",!0,He()),C.addGetterSetter(S,"lineJoin"),C.addGetterSetter(S,"lineCap"),C.addGetterSetter(S,"sceneFunc"),C.addGetterSetter(S,"hitFunc"),C.addGetterSetter(S,"dash"),C.addGetterSetter(S,"dashOffset",0,q()),C.addGetterSetter(S,"shadowColor",void 0,st()),C.addGetterSetter(S,"shadowBlur",0,q()),C.addGetterSetter(S,"shadowOpacity",1,q()),C.addComponentsGetterSetter(S,"shadowOffset",["x","y"]),C.addGetterSetter(S,"shadowOffsetX",0,q()),C.addGetterSetter(S,"shadowOffsetY",0,q()),C.addGetterSetter(S,"fillPatternImage"),C.addGetterSetter(S,"fill",void 0,Ct()),C.addGetterSetter(S,"fillPatternX",0,q()),C.addGetterSetter(S,"fillPatternY",0,q()),C.addGetterSetter(S,"fillLinearGradientColorStops"),C.addGetterSetter(S,"strokeLinearGradientColorStops"),C.addGetterSetter(S,"fillRadialGradientStartRadius",0),C.addGetterSetter(S,"fillRadialGradientEndRadius",0),C.addGetterSetter(S,"fillRadialGradientColorStops"),C.addGetterSetter(S,"fillPatternRepeat","repeat"),C.addGetterSetter(S,"fillEnabled",!0),C.addGetterSetter(S,"strokeEnabled",!0),C.addGetterSetter(S,"shadowEnabled",!0),C.addGetterSetter(S,"dashEnabled",!0),C.addGetterSetter(S,"strokeScaleEnabled",!0),C.addGetterSetter(S,"fillPriority","color"),C.addComponentsGetterSetter(S,"fillPatternOffset",["x","y"]),C.addGetterSetter(S,"fillPatternOffsetX",0,q()),C.addGetterSetter(S,"fillPatternOffsetY",0,q()),C.addComponentsGetterSetter(S,"fillPatternScale",["x","y"]),C.addGetterSetter(S,"fillPatternScaleX",1,q()),C.addGetterSetter(S,"fillPatternScaleY",1,q()),C.addComponentsGetterSetter(S,"fillLinearGradientStartPoint",["x","y"]),C.addComponentsGetterSetter(S,"strokeLinearGradientStartPoint",["x","y"]),C.addGetterSetter(S,"fillLinearGradientStartPointX",0),C.addGetterSetter(S,"strokeLinearGradientStartPointX",0),C.addGetterSetter(S,"fillLinearGradientStartPointY",0),C.addGetterSetter(S,"strokeLinearGradientStartPointY",0),C.addComponentsGetterSetter(S,"fillLinearGradientEndPoint",["x","y"]),C.addComponentsGetterSetter(S,"strokeLinearGradientEndPoint",["x","y"]),C.addGetterSetter(S,"fillLinearGradientEndPointX",0),C.addGetterSetter(S,"strokeLinearGradientEndPointX",0),C.addGetterSetter(S,"fillLinearGradientEndPointY",0),C.addGetterSetter(S,"strokeLinearGradientEndPointY",0),C.addComponentsGetterSetter(S,"fillRadialGradientStartPoint",["x","y"]),C.addGetterSetter(S,"fillRadialGradientStartPointX",0),C.addGetterSetter(S,"fillRadialGradientStartPointY",0),C.addComponentsGetterSetter(S,"fillRadialGradientEndPoint",["x","y"]),C.addGetterSetter(S,"fillRadialGradientEndPointX",0),C.addGetterSetter(S,"fillRadialGradientEndPointY",0),C.addGetterSetter(S,"fillPatternRotation",0),C.backCompat(S,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var pe=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Re=pe.length;class Te extends Oe{constructor(t){super(t),this.canvas=new Se,this.hitCanvas=new lt({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){R.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!R.prototype.moveUp.call(this))return!1;var n=this.getStage();return!(!n||!n.content||(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),0))}moveDown(){if(R.prototype.moveDown.call(this)){var t=this.getStage();if(t){var n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(R.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return R.prototype.remove.call(this),t&&t.parentNode&&A._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:n}){return this.canvas.setSize(t,n),this.hitCanvas.setSize(t,n),this._setSmoothEnabled(),this}_validateAdd(t){var n=t.getType();"Group"!==n&&"Shape"!==n&&A.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),R.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.canvas._canvas.style.display=this.visible()?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){A.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){A.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,A.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var n=1,o=!1;;){for(let s=0;s<Re;s++){const l=pe[s],h=this._getIntersection({x:t.x+l.x*n,y:t.y+l.y*n}),u=h.shape;if(u)return u;if(o=!!h.antialiased,!h.antialiased)break}if(!o)return null;n+=1}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,o=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,s=o[3];if(255===s){const l=A._rgbToHex(o[0],o[1],o[2]),h=_i["#"+l];return h?{shape:h}:{antialiased:!0}}return s>0?{antialiased:!0}:{}}drawScene(t,n){var o=this.getLayer(),s=t||o&&o.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),Oe.prototype.drawScene.call(this,s,n),this._fire("draw",{node:this}),this}drawHit(t,n){var o=this.getLayer(),s=t||o&&o.hitCanvas;return o&&o.clearBeforeDraw()&&o.getHitCanvas().getContext().clear(),Oe.prototype.drawHit.call(this,s,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){A.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return A.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var t=this.parent;this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return A.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Te.prototype.nodeType="Layer",M(Te),C.addGetterSetter(Te,"imageSmoothingEnabled",!0),C.addGetterSetter(Te,"clearBeforeDraw",!0),C.addGetterSetter(Te,"hitGraphEnabled",!0,He());class $i extends Te{constructor(t){super(t),this.listening(!1),A.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}$i.prototype.nodeType="FastLayer",M($i);class Qt extends Oe{_validateAdd(t){var n=t.getType();"Group"!==n&&"Shape"!==n&&A.throw("You may only add groups and shapes to groups.")}}Qt.prototype.nodeType="Group",M(Qt);var pn=ee.performance&&ee.performance.now?function(){return ee.performance.now()}:function(){return(new Date).getTime()};let Nn=(()=>{class c{constructor(n,o){this.id=c.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:pn(),frameRate:0},this.func=n,this.setLayers(o)}setLayers(n){return this.layers=n?n.length>0?n:[n]:[],this}getLayers(){return this.layers}addLayer(n){var l,o=this.layers,s=o.length;for(l=0;l<s;l++)if(o[l]._id===n._id)return!1;return this.layers.push(n),!0}isRunning(){var l,o=c.animations,s=o.length;for(l=0;l<s;l++)if(o[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=pn(),c._addAnimation(this),this}stop(){return c._removeAnimation(this),this}_updateFrameObject(n){this.frame.timeDiff=n-this.frame.lastTime,this.frame.lastTime=n,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(n){this.animations.push(n),this._handleAnimation()}static _removeAnimation(n){var h,o=n.id,s=this.animations,l=s.length;for(h=0;h<l;h++)if(s[h].id===o){this.animations.splice(h,1);break}}static _runFrames(){var s,l,h,u,p,_,v,T,n={},o=this.animations;for(u=0;u<o.length;u++)if(l=(s=o[u]).layers,h=s.func,s._updateFrameObject(pn()),_=l.length,!h||!1!==h.call(s,s.frame))for(p=0;p<_;p++)void 0!==(v=l[p])._id&&(n[v._id]=v);for(T in n)!n.hasOwnProperty(T)||n[T].batchDraw()}static _animationLoop(){var n=c;n.animations.length?(n._runFrames(),A.requestAnimFrame(n._animationLoop)):n.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,A.requestAnimFrame(this._animationLoop))}}return c.animations=[],c.animIdCounter=0,c.animRunning=!1,c})();var Tr={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Sr=0,jn=["fill","stroke","shadowColor"];class Pr{constructor(t,n,o,s,l,h,u){this.prop=t,this.propFunc=n,this.begin=s,this._pos=s,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=u,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=o,this._change=l-this.begin,this.pause()}fire(t){var n=this[t];n&&n()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}let Kn=(()=>{class c{constructor(n){var h,_,o=this,s=n.node,l=s._id,u=n.easing||ji.Linear,p=!!n.yoyo;h=void 0===n.duration?.3:0===n.duration?.001:n.duration,this.node=s,this._id=Sr++;var v=s.getLayer()||(s instanceof L.Stage?s.getLayers():null);for(_ in v||A.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Nn(function(){o.tween.onEnterFrame()},v),this.tween=new Pr(_,function(T){o._tweenFunc(T)},u,0,1,1e3*h,p),this._addListeners(),c.attrs[l]||(c.attrs[l]={}),c.attrs[l][this._id]||(c.attrs[l][this._id]={}),c.tweens[l]||(c.tweens[l]={}),n)void 0===Tr[_]&&this._addAttr(_,n[_]);this.reset(),this.onFinish=n.onFinish,this.onReset=n.onReset,this.onUpdate=n.onUpdate}_addAttr(n,o){var h,u,p,_,v,T,b,P,s=this.node,l=s._id;if((p=c.tweens[l][n])&&delete c.attrs[l][p][n],h=s.getAttr(n),A._isArray(o))if(u=[],v=Math.max(o.length,h.length),"points"===n&&o.length!==h.length&&(o.length>h.length?(b=h,h=A._prepareArrayForTween(h,o,s.closed())):(T=o,o=A._prepareArrayForTween(o,h,s.closed()))),0===n.indexOf("fill"))for(_=0;_<v;_++)if(_%2==0)u.push(o[_]-h[_]);else{var y=A.colorToRGBA(h[_]);P=A.colorToRGBA(o[_]),h[_]=y,u.push({r:P.r-y.r,g:P.g-y.g,b:P.b-y.b,a:P.a-y.a})}else for(_=0;_<v;_++)u.push(o[_]-h[_]);else-1!==jn.indexOf(n)?(h=A.colorToRGBA(h),u={r:(P=A.colorToRGBA(o)).r-h.r,g:P.g-h.g,b:P.b-h.b,a:P.a-h.a}):u=o-h;c.attrs[l][this._id][n]={start:h,diff:u,end:o,trueEnd:T,trueStart:b},c.tweens[l][n]=this._id}_tweenFunc(n){var l,h,u,p,_,v,T,b,o=this.node,s=c.attrs[o._id][this._id];for(l in s){if(p=(h=s[l]).diff,b=h.end,A._isArray(u=h.start))if(_=[],T=Math.max(u.length,b.length),0===l.indexOf("fill"))for(v=0;v<T;v++)_.push(v%2==0?(u[v]||0)+p[v]*n:"rgba("+Math.round(u[v].r+p[v].r*n)+","+Math.round(u[v].g+p[v].g*n)+","+Math.round(u[v].b+p[v].b*n)+","+(u[v].a+p[v].a*n)+")");else for(v=0;v<T;v++)_.push((u[v]||0)+p[v]*n);else _=-1!==jn.indexOf(l)?"rgba("+Math.round(u.r+p.r*n)+","+Math.round(u.g+p.g*n)+","+Math.round(u.b+p.b*n)+","+(u.a+p.a*n)+")":u+p*n;o.setAttr(l,_)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var n=this.node,o=c.attrs[n._id][this._id];o.points&&o.points.trueEnd&&n.setAttr("points",o.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var n=this.node,o=c.attrs[n._id][this._id];o.points&&o.points.trueStart&&n.points(o.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(n){return this.tween.seek(1e3*n),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var l,n=this.node._id,o=this._id,s=c.tweens[n];for(l in this.pause(),s)delete c.tweens[n][l];delete c.attrs[n][o]}}return c.attrs={},c.tweens={},c})();R.prototype.to=function(c){var t=c.onFinish;c.node=this,c.onFinish=function(){this.destroy(),t&&t()},new Kn(c).play()};const ji={BackEaseIn(c,t,n,o){var s=1.70158;return n*(c/=o)*c*((s+1)*c-s)+t},BackEaseOut(c,t,n,o){var s=1.70158;return n*((c=c/o-1)*c*((s+1)*c+s)+1)+t},BackEaseInOut(c,t,n,o){var s=1.70158;return(c/=o/2)<1?n/2*(c*c*((1+(s*=1.525))*c-s))+t:n/2*((c-=2)*c*((1+(s*=1.525))*c+s)+2)+t},ElasticEaseIn(c,t,n,o,s,l){var h=0;return 0===c?t:1==(c/=o)?t+n:(l||(l=.3*o),!s||s<Math.abs(n)?(s=n,h=l/4):h=l/(2*Math.PI)*Math.asin(n/s),-s*Math.pow(2,10*(c-=1))*Math.sin((c*o-h)*(2*Math.PI)/l)+t)},ElasticEaseOut(c,t,n,o,s,l){var h=0;return 0===c?t:1==(c/=o)?t+n:(l||(l=.3*o),!s||s<Math.abs(n)?(s=n,h=l/4):h=l/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*c)*Math.sin((c*o-h)*(2*Math.PI)/l)+n+t)},ElasticEaseInOut(c,t,n,o,s,l){var h=0;return 0===c?t:2==(c/=o/2)?t+n:(l||(l=o*(.3*1.5)),!s||s<Math.abs(n)?(s=n,h=l/4):h=l/(2*Math.PI)*Math.asin(n/s),c<1?s*Math.pow(2,10*(c-=1))*Math.sin((c*o-h)*(2*Math.PI)/l)*-.5+t:s*Math.pow(2,-10*(c-=1))*Math.sin((c*o-h)*(2*Math.PI)/l)*.5+n+t)},BounceEaseOut:(c,t,n,o)=>(c/=o)<1/2.75?n*(7.5625*c*c)+t:c<2/2.75?n*(7.5625*(c-=1.5/2.75)*c+.75)+t:c<2.5/2.75?n*(7.5625*(c-=2.25/2.75)*c+.9375)+t:n*(7.5625*(c-=2.625/2.75)*c+.984375)+t,BounceEaseIn:(c,t,n,o)=>n-ji.BounceEaseOut(o-c,0,n,o)+t,BounceEaseInOut:(c,t,n,o)=>c<o/2?.5*ji.BounceEaseIn(2*c,0,n,o)+t:.5*ji.BounceEaseOut(2*c-o,0,n,o)+.5*n+t,EaseIn:(c,t,n,o)=>n*(c/=o)*c+t,EaseOut:(c,t,n,o)=>-n*(c/=o)*(c-2)+t,EaseInOut:(c,t,n,o)=>(c/=o/2)<1?n/2*c*c+t:-n/2*(--c*(c-2)-1)+t,StrongEaseIn:(c,t,n,o)=>n*(c/=o)*c*c*c*c+t,StrongEaseOut:(c,t,n,o)=>n*((c=c/o-1)*c*c*c*c+1)+t,StrongEaseInOut:(c,t,n,o)=>(c/=o/2)<1?n/2*c*c*c*c*c+t:n/2*((c-=2)*c*c*c*c+2)+t,Linear:(c,t,n,o)=>n*c/o+t},er=A._assign(L,{Util:A,Transform:e,Node:R,Container:Oe,Stage:De,stages:dt,Layer:Te,FastLayer:$i,Group:Qt,DD:re,Shape:S,shapes:_i,Animation:Nn,Tween:Kn,Easings:ji,Context:xe,Canvas:$e});class Ot extends S{_sceneFunc(t){var n=L.getAngle(this.angle()),o=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,o),t.arc(0,0,this.innerRadius(),n,0,!o),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),n=this.outerRadius(),o=this.clockwise(),s=L.getAngle(o?360-this.angle():this.angle()),l=Math.cos(Math.min(s,Math.PI)),u=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),p=Math.sin(Math.min(s,Math.PI/2)),_=l*(l>0?t:n),T=u*(u>0?t:n),b=p*(p>0?n:t);return{x:_,y:o?-1*b:T,width:1*n-_,height:b-T}}}function qn(c,t,n,o,s,l,h){var u=Math.sqrt(Math.pow(n-c,2)+Math.pow(o-t,2)),p=Math.sqrt(Math.pow(s-n,2)+Math.pow(l-o,2)),_=h*u/(u+p),v=h*p/(u+p);return[n-_*(s-c),o-_*(l-t),n+v*(s-c),o+v*(l-t)]}function tr(c,t){var s,l,n=c.length,o=[];for(s=2;s<n-2;s+=2)l=qn(c[s-2],c[s-1],c[s],c[s+1],c[s+2],c[s+3],t),!isNaN(l[0])&&(o.push(l[0]),o.push(l[1]),o.push(c[s]),o.push(c[s+1]),o.push(l[2]),o.push(l[3]));return o}Ot.prototype._centroid=!0,Ot.prototype.className="Arc",Ot.prototype._attrsAffectingSize=["innerRadius","outerRadius"],M(Ot),C.addGetterSetter(Ot,"innerRadius",0,q()),C.addGetterSetter(Ot,"outerRadius",0,q()),C.addGetterSetter(Ot,"angle",0,q()),C.addGetterSetter(Ot,"clockwise",!1,He());class Nt extends S{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var u,p,_,n=this.points(),o=n.length,s=this.tension(),l=this.closed(),h=this.bezier();if(o){if(t.beginPath(),t.moveTo(n[0],n[1]),0!==s&&o>4){for(p=(u=this.getTensionPoints()).length,_=l?0:4,l||t.quadraticCurveTo(u[0],u[1],u[2],u[3]);_<p-2;)t.bezierCurveTo(u[_++],u[_++],u[_++],u[_++],u[_++],u[_++]);l||t.quadraticCurveTo(u[p-2],u[p-1],n[o-2],n[o-1])}else if(h)for(_=2;_<o;)t.bezierCurveTo(n[_++],n[_++],n[_++],n[_++],n[_++],n[_++]);else for(_=2;_<o;_+=2)t.lineTo(n[_],n[_+1]);l?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():tr(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),n=t.length,o=this.tension(),s=qn(t[n-2],t[n-1],t[0],t[1],t[2],t[3],o),l=qn(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],o),h=tr(t,o);return[s[2],s[3]].concat(h).concat([l[0],l[1],t[n-2],t[n-1],l[2],l[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var h,u,n=(t=0!==this.tension()?[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.points())[0],o=t[0],s=t[1],l=t[1],p=0;p<t.length/2;p++)h=t[2*p],u=t[2*p+1],n=Math.min(n,h),o=Math.max(o,h),s=Math.min(s,u),l=Math.max(l,u);return{x:n,y:s,width:o-n,height:l-s}}}Nt.prototype.className="Line",Nt.prototype._attrsAffectingSize=["points","bezier","tension"],M(Nt),C.addGetterSetter(Nt,"closed",!1),C.addGetterSetter(Nt,"bezier",!1),C.addGetterSetter(Nt,"tension",0,q()),C.addGetterSetter(Nt,"points",[],function wi(){if(L.isUnminified)return function(c,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&c instanceof n||(A._isArray(c)?c.forEach(function(o){A._isNumber(o)||A.warn('"'+t+'" attribute has non numeric element '+o+". Make sure that all elements are numbers.")}):A.warn(at(c)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),c}}());class ce extends S{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this.dataArray=ce.parsePathData(this.data()),this.pathLength=0;for(var n=0;n<this.dataArray.length;++n)this.pathLength+=this.dataArray[n].pathLength;this.on("dataChange.konva",function(){this.dataArray=ce.parsePathData(this.data()),this.pathLength=0;for(var o=0;o<this.dataArray.length;++o)this.pathLength+=this.dataArray[o].pathLength})}_sceneFunc(t){var n=this.dataArray;t.beginPath();for(var o=!1,s=0;s<n.length;s++){var h=n[s].points;switch(n[s].command){case"L":t.lineTo(h[0],h[1]);break;case"M":t.moveTo(h[0],h[1]);break;case"C":t.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case"Q":t.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case"A":var u=h[0],p=h[1],_=h[2],v=h[3],T=h[4],b=h[5],P=h[6],y=h[7],Z=_>v?_:v,E=_>v?1:_/v,F=_>v?v/_:1;t.translate(u,p),t.rotate(P),t.scale(E,F),t.arc(0,0,Z,T,T+b,1-y),t.scale(1/E,1/F),t.rotate(-P),t.translate(-u,-p);break;case"z":o=!0,t.closePath()}}o||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(_){if("A"===_.command){var v=_.points[4],T=_.points[5],b=_.points[4]+T,P=Math.PI/180;if(Math.abs(v-b)<P&&(P=Math.abs(v-b)),T<0)for(let y=v-P;y>b;y-=P){const Z=ce.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],y,0);t.push(Z.x,Z.y)}else for(let y=v+P;y<b;y+=P){const Z=ce.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],y,0);t.push(Z.x,Z.y)}}else if("C"===_.command)for(let y=0;y<=1;y+=.01){const Z=ce.getPointOnCubicBezier(y,_.start.x,_.start.y,_.points[0],_.points[1],_.points[2],_.points[3],_.points[4],_.points[5]);t.push(Z.x,Z.y)}else t=t.concat(_.points)});for(var h,u,n=t[0],o=t[0],s=t[1],l=t[1],p=0;p<t.length/2;p++)h=t[2*p],u=t[2*p+1],isNaN(h)||(n=Math.min(n,h),o=Math.max(o,h)),isNaN(u)||(s=Math.min(s,u),l=Math.max(l,u));return{x:n,y:s,width:o-n,height:l-s}}getLength(){return this.pathLength}getPointAtLength(t){var n,o=0,s=this.dataArray.length;if(!s)return null;for(;o<s&&t>this.dataArray[o].pathLength;)t-=this.dataArray[o].pathLength,++o;if(o===s)return{x:(n=this.dataArray[o-1].points.slice(-2))[0],y:n[1]};if(t<.01)return{x:(n=this.dataArray[o].points.slice(0,2))[0],y:n[1]};var l=this.dataArray[o],h=l.points;switch(l.command){case"L":return ce.getPointOnLine(t,l.start.x,l.start.y,h[0],h[1]);case"C":return ce.getPointOnCubicBezier(t/l.pathLength,l.start.x,l.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return ce.getPointOnQuadraticBezier(t/l.pathLength,l.start.x,l.start.y,h[0],h[1],h[2],h[3]);case"A":var T=h[4];return ce.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],T+=h[5]*t/l.pathLength,h[6])}return null}static getLineLength(t,n,o,s){return Math.sqrt((o-t)*(o-t)+(s-n)*(s-n))}static getPointOnLine(t,n,o,s,l,h,u){void 0===h&&(h=n),void 0===u&&(u=o);var p=(l-o)/(s-n+1e-8),_=Math.sqrt(t*t/(1+p*p));s<n&&(_*=-1);var T,v=p*_;if(s===n)T={x:h,y:u+v};else if((u-o)/(h-n+1e-8)===p)T={x:h+_,y:u+v};else{var b,P,y=this.getLineLength(n,o,s,l),Z=(h-n)*(s-n)+(u-o)*(l-o),E=this.getLineLength(h,u,b=n+(Z/=y*y)*(s-n),P=o+Z*(l-o)),F=Math.sqrt(t*t-E*E);_=Math.sqrt(F*F/(1+p*p)),s<n&&(_*=-1),T={x:b+_,y:P+(v=p*_)}}return T}static getPointOnCubicBezier(t,n,o,s,l,h,u,p,_){function v(E){return E*E*E}function T(E){return 3*E*E*(1-E)}function b(E){return 3*E*(1-E)*(1-E)}function P(E){return(1-E)*(1-E)*(1-E)}return{x:p*v(t)+h*T(t)+s*b(t)+n*P(t),y:_*v(t)+u*T(t)+l*b(t)+o*P(t)}}static getPointOnQuadraticBezier(t,n,o,s,l,h,u){function p(P){return P*P}function _(P){return 2*P*(1-P)}function v(P){return(1-P)*(1-P)}return{x:h*p(t)+s*_(t)+n*v(t),y:u*p(t)+l*_(t)+o*v(t)}}static getPointOnEllipticalArc(t,n,o,s,l,h){var u=Math.cos(h),p=Math.sin(h),__x=o*Math.cos(l),__y=s*Math.sin(l);return{x:t+(__x*u-__y*p),y:n+(__x*p+__y*u)}}static parsePathData(t){if(!t)return[];var n=t,o=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var s=0;s<o.length;s++)n=n.replace(new RegExp(o[s],"g"),"|"+o[s]);var T,l=n.split("|"),h=[],u=[],p=0,_=0,v=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(s=1;s<l.length;s++){var b=l[s],P=b.charAt(0);for(b=b.slice(1),u.length=0;T=v.exec(b);)u.push(T[0]);for(var y=[],Z=0,E=u.length;Z<E;Z++)if("00"!==u[Z]){var F=parseFloat(u[Z]);isNaN(F)?y.push(0):y.push(F)}else y.push(0,0);for(;y.length>0&&!isNaN(y[0]);){var B,X,J,$,K,W,ne,te,ue,Qe,D=null,N=[],z=p,V=_;switch(P){case"l":p+=y.shift(),_+=y.shift(),D="L",N.push(p,_);break;case"L":p=y.shift(),_=y.shift(),N.push(p,_);break;case"m":var he=y.shift(),Ae=y.shift();if(p+=he,_+=Ae,D="M",h.length>2&&"z"===h[h.length-1].command)for(var Ve=h.length-2;Ve>=0;Ve--)if("M"===h[Ve].command){p=h[Ve].points[0]+he,_=h[Ve].points[1]+Ae;break}N.push(p,_),P="l";break;case"M":p=y.shift(),_=y.shift(),D="M",N.push(p,_),P="L";break;case"h":p+=y.shift(),D="L",N.push(p,_);break;case"H":p=y.shift(),D="L",N.push(p,_);break;case"v":_+=y.shift(),D="L",N.push(p,_);break;case"V":_=y.shift(),D="L",N.push(p,_);break;case"C":N.push(y.shift(),y.shift(),y.shift(),y.shift()),p=y.shift(),_=y.shift(),N.push(p,_);break;case"c":N.push(p+y.shift(),_+y.shift(),p+y.shift(),_+y.shift()),p+=y.shift(),_+=y.shift(),D="C",N.push(p,_);break;case"S":X=p,J=_,"C"===(B=h[h.length-1]).command&&(X=p+(p-B.points[2]),J=_+(_-B.points[3])),N.push(X,J,y.shift(),y.shift()),p=y.shift(),_=y.shift(),D="C",N.push(p,_);break;case"s":X=p,J=_,"C"===(B=h[h.length-1]).command&&(X=p+(p-B.points[2]),J=_+(_-B.points[3])),N.push(X,J,p+y.shift(),_+y.shift()),p+=y.shift(),_+=y.shift(),D="C",N.push(p,_);break;case"Q":N.push(y.shift(),y.shift()),p=y.shift(),_=y.shift(),N.push(p,_);break;case"q":N.push(p+y.shift(),_+y.shift()),p+=y.shift(),_+=y.shift(),D="Q",N.push(p,_);break;case"T":X=p,J=_,"Q"===(B=h[h.length-1]).command&&(X=p+(p-B.points[0]),J=_+(_-B.points[1])),p=y.shift(),_=y.shift(),D="Q",N.push(X,J,p,_);break;case"t":X=p,J=_,"Q"===(B=h[h.length-1]).command&&(X=p+(p-B.points[0]),J=_+(_-B.points[1])),p+=y.shift(),_+=y.shift(),D="Q",N.push(X,J,p,_);break;case"A":$=y.shift(),K=y.shift(),W=y.shift(),ne=y.shift(),te=y.shift(),ue=p,Qe=_,p=y.shift(),_=y.shift(),D="A",N=this.convertEndpointToCenterParameterization(ue,Qe,p,_,ne,te,$,K,W);break;case"a":$=y.shift(),K=y.shift(),W=y.shift(),ne=y.shift(),te=y.shift(),ue=p,Qe=_,p+=y.shift(),_+=y.shift(),D="A",N=this.convertEndpointToCenterParameterization(ue,Qe,p,_,ne,te,$,K,W)}h.push({command:D||P,points:N,start:{x:z,y:V},pathLength:this.calcLength(z,V,D||P,N)})}("z"===P||"Z"===P)&&h.push({command:"z",points:[],start:void 0,pathLength:0})}return h}static calcLength(t,n,o,s){var l,h,u,p,_=ce;switch(o){case"L":return _.getLineLength(t,n,s[0],s[1]);case"C":for(l=0,h=_.getPointOnCubicBezier(0,t,n,s[0],s[1],s[2],s[3],s[4],s[5]),p=.01;p<=1;p+=.01)u=_.getPointOnCubicBezier(p,t,n,s[0],s[1],s[2],s[3],s[4],s[5]),l+=_.getLineLength(h.x,h.y,u.x,u.y),h=u;return l;case"Q":for(l=0,h=_.getPointOnQuadraticBezier(0,t,n,s[0],s[1],s[2],s[3]),p=.01;p<=1;p+=.01)u=_.getPointOnQuadraticBezier(p,t,n,s[0],s[1],s[2],s[3]),l+=_.getLineLength(h.x,h.y,u.x,u.y),h=u;return l;case"A":l=0;var v=s[4],T=s[5],b=s[4]+T,P=Math.PI/180;if(Math.abs(v-b)<P&&(P=Math.abs(v-b)),h=_.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],v,0),T<0)for(p=v-P;p>b;p-=P)u=_.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],p,0),l+=_.getLineLength(h.x,h.y,u.x,u.y),h=u;else for(p=v+P;p<b;p+=P)u=_.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],p,0),l+=_.getLineLength(h.x,h.y,u.x,u.y),h=u;return u=_.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],b,0),l+_.getLineLength(h.x,h.y,u.x,u.y)}return 0}static convertEndpointToCenterParameterization(t,n,o,s,l,h,u,p,_){var v=_*(Math.PI/180),T=Math.cos(v)*(t-o)/2+Math.sin(v)*(n-s)/2,b=-1*Math.sin(v)*(t-o)/2+Math.cos(v)*(n-s)/2,P=T*T/(u*u)+b*b/(p*p);P>1&&(u*=Math.sqrt(P),p*=Math.sqrt(P));var y=Math.sqrt((u*u*(p*p)-u*u*(b*b)-p*p*(T*T))/(u*u*(b*b)+p*p*(T*T)));l===h&&(y*=-1),isNaN(y)&&(y=0);var Z=y*u*b/p,E=y*-p*T/u,F=(t+o)/2+Math.cos(v)*Z-Math.sin(v)*E,D=(n+s)/2+Math.sin(v)*Z+Math.cos(v)*E,N=function(K){return Math.sqrt(K[0]*K[0]+K[1]*K[1])},z=function(K,W){return(K[0]*W[0]+K[1]*W[1])/(N(K)*N(W))},V=function(K,W){return(K[0]*W[1]<K[1]*W[0]?-1:1)*Math.acos(z(K,W))},B=V([1,0],[(T-Z)/u,(b-E)/p]),X=[(T-Z)/u,(b-E)/p],J=[(-1*T-Z)/u,(-1*b-E)/p],$=V(X,J);return z(X,J)<=-1&&($=Math.PI),z(X,J)>=1&&($=0),0===h&&$>0&&($-=2*Math.PI),1===h&&$<0&&($+=2*Math.PI),[F,D,u,p,B,$,v,h]}}ce.prototype.className="Path",ce.prototype._attrsAffectingSize=["data"],M(ce),C.addGetterSetter(ce,"data");class fi extends Nt{_sceneFunc(t){super._sceneFunc(t);var n=2*Math.PI,o=this.points(),s=o,l=0!==this.tension()&&o.length>4;l&&(s=this.getTensionPoints());var p,_,h=this.pointerLength(),u=o.length;if(l){const b=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],o[u-2],o[u-1]],P=ce.calcLength(s[s.length-4],s[s.length-3],"C",b),y=ce.getPointOnQuadraticBezier(Math.min(1,1-h/P),b[0],b[1],b[2],b[3],b[4],b[5]);p=o[u-2]-y.x,_=o[u-1]-y.y}else p=o[u-2]-o[u-4],_=o[u-1]-o[u-3];var v=(Math.atan2(_,p)+n)%n,T=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(o[u-2],o[u-1]),t.rotate(v),t.moveTo(0,0),t.lineTo(-h,T/2),t.lineTo(-h,-T/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(o[0],o[1]),l?(p=(s[0]+s[2])/2-o[0],_=(s[1]+s[3])/2-o[1]):(p=o[2]-o[0],_=o[3]-o[1]),t.rotate((Math.atan2(-_,-p)+n)%n),t.moveTo(0,0),t.lineTo(-h,T/2),t.lineTo(-h,-T/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),n=this.pointerWidth()/2;return{x:t.x-n,y:t.y-n,width:t.width+2*n,height:t.height+2*n}}}fi.prototype.className="Arrow",M(fi),C.addGetterSetter(fi,"pointerLength",10,q()),C.addGetterSetter(fi,"pointerWidth",10,q()),C.addGetterSetter(fi,"pointerAtBeginning",!1),C.addGetterSetter(fi,"pointerAtEnding",!0);class Ei extends S{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Ei.prototype._centroid=!0,Ei.prototype.className="Circle",Ei.prototype._attrsAffectingSize=["radius"],M(Ei),C.addGetterSetter(Ei,"radius",0,q());class Vt extends S{_sceneFunc(t){var n=this.radiusX(),o=this.radiusY();t.beginPath(),t.save(),n!==o&&t.scale(1,o/n),t.arc(0,0,n,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Vt.prototype.className="Ellipse",Vt.prototype._centroid=!0,Vt.prototype._attrsAffectingSize=["radiusX","radiusY"],M(Vt),C.addComponentsGetterSetter(Vt,"radius",["x","y"]),C.addGetterSetter(Vt,"radiusX",0,q()),C.addGetterSetter(Vt,"radiusY",0,q());class ut extends S{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&4===t.readyState||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),o=this.getHeight(),s=this.attrs.image;let l;if(s){const h=this.attrs.cropWidth,u=this.attrs.cropHeight;l=h&&u?[s,this.cropX(),this.cropY(),h,u,0,0,n,o]:[s,0,0,n,o]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)),s&&t.drawImage.apply(t,l)}_hitFunc(t){var n=this.width(),o=this.height();t.beginPath(),t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,n;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(n=this.image())||void 0===n?void 0:n.width}getHeight(){var t,n;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(n=this.image())||void 0===n?void 0:n.height}static fromURL(t,n,o=null){var s=A.createImageElement();s.onload=function(){var l=new ut({image:s});n(l)},s.onerror=o,s.crossOrigin="Anonymous",s.src=t}}ut.prototype.className="Image",M(ut),C.addGetterSetter(ut,"image"),C.addComponentsGetterSetter(ut,"crop",["x","y","width","height"]),C.addGetterSetter(ut,"cropX",0,q()),C.addGetterSetter(ut,"cropY",0,q()),C.addGetterSetter(ut,"cropWidth",0,q()),C.addGetterSetter(ut,"cropHeight",0,q());var nt=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Dn="right",Rn="down",Fn="left",Ir=nt.length;class Un extends Qt{constructor(t){super(t),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var o,n=this,s=function(){n._sync()};for(o=0;o<Ir;o++)t.on(nt[o]+"Change.konva",s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var o,s,l,h,u,p,_,t=this.getText(),n=this.getTag();if(t&&n){switch(o=t.width(),s=t.height(),l=n.pointerDirection(),h=n.pointerWidth(),_=n.pointerHeight(),u=0,p=0,l){case"up":u=o/2,p=-1*_;break;case Dn:u=o+h,p=s/2;break;case Rn:u=o/2,p=s+_;break;case Fn:u=-1*h,p=s/2}n.setAttrs({x:-1*u,y:-1*p,width:o,height:s}),t.setAttrs({x:-1*u,y:-1*p})}}}Un.prototype.className="Label",M(Un);class vi extends S{_sceneFunc(t){var n=this.width(),o=this.height(),s=this.pointerDirection(),l=this.pointerWidth(),h=this.pointerHeight(),u=this.cornerRadius();let p=0,_=0,v=0,T=0;"number"==typeof u?p=_=v=T=Math.min(u,n/2,o/2):(p=Math.min(u[0]||0,n/2,o/2),_=Math.min(u[1]||0,n/2,o/2),T=Math.min(u[2]||0,n/2,o/2),v=Math.min(u[3]||0,n/2,o/2)),t.beginPath(),t.moveTo(p,0),"up"===s&&(t.lineTo((n-l)/2,0),t.lineTo(n/2,-1*h),t.lineTo((n+l)/2,0)),t.lineTo(n-_,0),t.arc(n-_,_,_,3*Math.PI/2,0,!1),s===Dn&&(t.lineTo(n,(o-h)/2),t.lineTo(n+l,o/2),t.lineTo(n,(o+h)/2)),t.lineTo(n,o-T),t.arc(n-T,o-T,T,0,Math.PI/2,!1),s===Rn&&(t.lineTo((n+l)/2,o),t.lineTo(n/2,o+h),t.lineTo((n-l)/2,o)),t.lineTo(v,o),t.arc(v,o-v,v,Math.PI/2,Math.PI,!1),s===Fn&&(t.lineTo(0,(o+h)/2),t.lineTo(-1*l,o/2),t.lineTo(0,(o-h)/2)),t.lineTo(0,p),t.arc(p,p,p,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,n=0,o=this.pointerWidth(),s=this.pointerHeight(),l=this.pointerDirection(),h=this.width(),u=this.height();return"up"===l?(n-=s,u+=s):l===Rn?u+=s:l===Fn?(t-=1.5*o,h+=o):l===Dn&&(h+=1.5*o),{x:t,y:n,width:h,height:u}}}vi.prototype.className="Tag",M(vi),C.addGetterSetter(vi,"pointerDirection","none"),C.addGetterSetter(vi,"pointerWidth",0,q()),C.addGetterSetter(vi,"pointerHeight",0,q()),C.addGetterSetter(vi,"cornerRadius",0,sn(4));class Ki extends S{_sceneFunc(t){var n=this.cornerRadius(),o=this.width(),s=this.height();if(t.beginPath(),n){let l=0,h=0,u=0,p=0;"number"==typeof n?l=h=u=p=Math.min(n,o/2,s/2):(l=Math.min(n[0]||0,o/2,s/2),h=Math.min(n[1]||0,o/2,s/2),p=Math.min(n[2]||0,o/2,s/2),u=Math.min(n[3]||0,o/2,s/2)),t.moveTo(l,0),t.lineTo(o-h,0),t.arc(o-h,h,h,3*Math.PI/2,0,!1),t.lineTo(o,s-p),t.arc(o-p,s-p,p,0,Math.PI/2,!1),t.lineTo(u,s),t.arc(u,s-u,u,Math.PI/2,Math.PI,!1),t.lineTo(0,l),t.arc(l,l,l,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,o,s);t.closePath(),t.fillStrokeShape(this)}}Ki.prototype.className="Rect",M(Ki),C.addGetterSetter(Ki,"cornerRadius",0,sn(4));class xi extends S{_sceneFunc(t){const n=this._getPoints();t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var o=1;o<n.length;o++)t.lineTo(n[o].x,n[o].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,n=this.attrs.radius||0,o=[];for(var s=0;s<t;s++)o.push({x:n*Math.sin(2*s*Math.PI/t),y:-1*n*Math.cos(2*s*Math.PI/t)});return o}getSelfRect(){const t=this._getPoints();var n=t[0].x,o=t[0].y,s=t[0].x,l=t[0].y;return t.forEach(h=>{n=Math.min(n,h.x),o=Math.max(o,h.x),s=Math.min(s,h.y),l=Math.max(l,h.y)}),{x:n,y:s,width:o-n,height:l-s}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}xi.prototype.className="RegularPolygon",xi.prototype._centroid=!0,xi.prototype._attrsAffectingSize=["radius"],M(xi),C.addGetterSetter(xi,"radius",0,q()),C.addGetterSetter(xi,"sides",0,q());var ir=2*Math.PI;class yi extends S{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,ir,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),ir,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}yi.prototype.className="Ring",yi.prototype._centroid=!0,yi.prototype._attrsAffectingSize=["innerRadius","outerRadius"],M(yi),C.addGetterSetter(yi,"innerRadius",0,q()),C.addGetterSetter(yi,"outerRadius",0,q());class yt extends S{constructor(t){super(t),this._updated=!0,this.anim=new Nn(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var n=this.animation(),o=this.frameIndex(),s=4*o,l=this.animations()[n],h=this.frameOffsets(),u=l[s+0],p=l[s+1],_=l[s+2],v=l[s+3],T=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,_,v),t.closePath(),t.fillStrokeShape(this)),T)if(h){var b=h[n],P=2*o;t.drawImage(T,u,p,_,v,b[P+0],b[P+1],_,v)}else t.drawImage(T,u,p,_,v,0,0,_,v)}_hitFunc(t){var n=this.animation(),o=this.frameIndex(),s=4*o,l=this.animations()[n],h=this.frameOffsets(),u=l[s+2],p=l[s+3];if(t.beginPath(),h){var _=h[n],v=2*o;t.rect(_[v+0],_[v+1],u,p)}else t.rect(0,0,u,p);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),n=this.animation(),o=this.animations();this.frameIndex(t<o[n].length/4-1?t+1:0)}}yt.prototype.className="Sprite",M(yt),C.addGetterSetter(yt,"animation"),C.addGetterSetter(yt,"animations"),C.addGetterSetter(yt,"frameOffsets"),C.addGetterSetter(yt,"image"),C.addGetterSetter(yt,"frameIndex",0,q()),C.addGetterSetter(yt,"frameRate",17,q()),C.backCompat(yt,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Wt extends S{_sceneFunc(t){var n=this.innerRadius(),o=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-o);for(var l=1;l<2*s;l++){var h=l%2==0?o:n,u=h*Math.sin(l*Math.PI/s),p=-1*h*Math.cos(l*Math.PI/s);t.lineTo(u,p)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}function nr(c){return Array.from(c)}Wt.prototype.className="Star",Wt.prototype._centroid=!0,Wt.prototype._attrsAffectingSize=["innerRadius","outerRadius"],M(Wt),C.addGetterSetter(Wt,"numPoints",5,q()),C.addGetterSetter(Wt,"innerRadius",0,q()),C.addGetterSetter(Wt,"outerRadius",0,q());var fn,Mi="auto",tn="justify",cr=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Lr=cr.length;function Gn(){return fn||(fn=A.createCanvasElement().getContext("2d"))}class _e extends S{constructor(t){super(function Hr(c){return!(c=c||{}).fillLinearGradientColorStops&&!c.fillRadialGradientColorStops&&!c.fillPatternImage&&(c.fill=c.fill||"black"),c}(t)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<Lr;n++)this.on(cr[n]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(t){var n=this.textArr,o=n.length;if(this.text()){var E,s=this.padding(),l=this.fontSize(),h=this.lineHeight()*l,u=this.verticalAlign(),p=0,_=this.align(),v=this.getWidth(),T=this.letterSpacing(),b=this.fill(),P=this.textDecoration(),y=-1!==P.indexOf("underline"),Z=-1!==P.indexOf("line-through"),F=0,D=(F=h/2,0),N=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),"middle"===u?p=(this.getHeight()-o*h-2*s)/2:"bottom"===u&&(p=this.getHeight()-o*h-2*s),t.translate(s,p+s),E=0;E<o;E++){D=0,N=0;var J,$,K,z=n[E],V=z.text,B=z.width,X=z.lastInParagraph;if(t.save(),"right"===_?D+=v-B-2*s:"center"===_&&(D+=(v-B-2*s)/2),y&&(t.save(),t.beginPath(),t.moveTo(D,F+N+Math.round(l/2)),$=0==(J=V.split(" ").length-1),K=_===tn&&X&&!$?v-2*s:B,t.lineTo(D+Math.round(K),F+N+Math.round(l/2)),t.lineWidth=l/15,t.strokeStyle=b,t.stroke(),t.restore()),Z&&(t.save(),t.beginPath(),t.moveTo(D,F+N),$=0==(J=V.split(" ").length-1),K=_===tn&&X&&!$?v-2*s:B,t.lineTo(D+Math.round(K),F+N),t.lineWidth=l/15,t.strokeStyle=b,t.stroke(),t.restore()),0!==T||_===tn){J=V.split(" ").length-1;for(var W=nr(V),ne=0;ne<W.length;ne++){var te=W[ne];" "===te&&!X&&_===tn&&(D+=(v-2*s-B)/J),this._partialTextX=D,this._partialTextY=F+N,this._partialText=te,t.fillStrokeShape(this),D+=this.measureSize(te).width+T}}else this._partialTextX=D,this._partialTextY=F+N,this._partialText=V,t.fillStrokeShape(this);t.restore(),o>1&&(F+=h)}}}_hitFunc(t){var n=this.getWidth(),o=this.getHeight();t.beginPath(),t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)}setText(t){var n=A._isString(t)?t:null==t?"":t+"";return this._setAttr("text",n),this}getWidth(){return this.attrs.width===Mi||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===Mi||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return A.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var s,n=Gn(),o=this.fontSize();return n.save(),n.font=this._getContextFont(),s=n.measureText(t),n.restore(),{width:s.width,height:o}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+function Gr(c){return c.split(",").map(t=>{const n=(t=t.trim()).indexOf(" ")>=0,o=t.indexOf('"')>=0||t.indexOf("'")>=0;return n&&!o&&(t=`"${t}"`),t}).join(", ")}(this.fontFamily())}_addTextLine(t){this.align()===tn&&(t=t.trim());var n=this._getTextWidth(t);return this.textArr.push({text:t,width:n,lastInParagraph:!1})}_getTextWidth(t){var n=this.letterSpacing(),o=t.length;return Gn().measureText(t).width+(o?n*(o-1):0)}_setTextData(){var t=this.text().split("\n"),n=+this.fontSize(),o=0,s=this.lineHeight()*n,l=this.attrs.width,h=this.attrs.height,u=l!==Mi&&void 0!==l,p=h!==Mi&&void 0!==h,_=this.padding(),v=l-2*_,T=h-2*_,b=0,P=this.wrap(),Z="char"!==P&&"none"!==P,E=this.ellipsis();this.textArr=[],Gn().font=this._getContextFont();for(var F=E?this._getTextWidth("\u2026"):0,D=0,N=t.length;D<N;++D){var z=t[D],V=this._getTextWidth(z);if(u&&V>v)for(;z.length>0;){for(var B=0,X=z.length,J="",$=0;B<X;){var K=B+X>>>1,W=z.slice(0,K+1),ne=this._getTextWidth(W)+F;ne<=v?(B=K+1,J=W,$=ne):X=K}if(!J)break;if(Z){var te,ue=z[J.length];(te=(" "===ue||"-"===ue)&&$<=v?J.length:Math.max(J.lastIndexOf(" "),J.lastIndexOf("-"))+1)>0&&(J=J.slice(0,B=te),$=this._getTextWidth(J))}if(J=J.trimRight(),this._addTextLine(J),o=Math.max(o,$),this._shouldHandleEllipsis(b+=s)){this._tryToAddEllipsisToLastLine();break}if((z=(z=z.slice(B)).trimLeft()).length>0&&(V=this._getTextWidth(z))<=v){this._addTextLine(z),b+=s,o=Math.max(o,V);break}}else this._addTextLine(z),b+=s,o=Math.max(o,V),this._shouldHandleEllipsis(b)&&D<N-1&&this._tryToAddEllipsisToLastLine();if(p&&b+s>T)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=n,this.textWidth=o}_shouldHandleEllipsis(t){var n=+this.fontSize(),o=this.lineHeight()*n,s=this.attrs.height,l=s!==Mi&&void 0!==s,u=s-2*this.padding();return!("none"!==this.wrap())||l&&t+o>u}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,n=t!==Mi&&void 0!==t,s=t-2*this.padding(),l=this.ellipsis(),h=this.textArr[this.textArr.length-1];h&&l&&(n&&(this._getTextWidth(h.text+"\u2026")<s||(h.text=h.text.slice(0,h.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(h.text+"\u2026"))}getStrokeScaleEnabled(){return!0}}_e.prototype._fillFunc=function zr(c){c.fillText(this._partialText,this._partialTextX,this._partialTextY)},_e.prototype._strokeFunc=function Br(c){c.strokeText(this._partialText,this._partialTextX,this._partialTextY)},_e.prototype.className="Text",_e.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],M(_e),C.overWriteSetter(_e,"width",ot()),C.overWriteSetter(_e,"height",ot()),C.addGetterSetter(_e,"fontFamily","Arial"),C.addGetterSetter(_e,"fontSize",12,q()),C.addGetterSetter(_e,"fontStyle","normal"),C.addGetterSetter(_e,"fontVariant","normal"),C.addGetterSetter(_e,"padding",0,q()),C.addGetterSetter(_e,"align","left"),C.addGetterSetter(_e,"verticalAlign","top"),C.addGetterSetter(_e,"lineHeight",1,q()),C.addGetterSetter(_e,"wrap","word"),C.addGetterSetter(_e,"ellipsis",!1,He()),C.addGetterSetter(_e,"letterSpacing",0,q()),C.addGetterSetter(_e,"text","",st()),C.addGetterSetter(_e,"textDecoration","");function hr(c){c.fillText(this.partialText,0,0)}function dr(c){c.strokeText(this.partialText,0,0)}class Pe extends S{constructor(t){super(t),this.dummyCanvas=A.createCanvasElement(),this.dataArray=[],this.dataArray=ce.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=ce.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var n=this.textDecoration(),o=this.fill(),s=this.fontSize(),l=this.glyphInfo;"underline"===n&&t.beginPath();for(var h=0;h<l.length;h++){t.save();var u=l[h].p0;t.translate(u.x,u.y),t.rotate(l[h].rotation),this.partialText=l[h].text,t.fillStrokeShape(this),"underline"===n&&(0===h&&t.moveTo(0,s/2+1),t.lineTo(s,s/2+1)),t.restore()}"underline"===n&&(t.strokeStyle=o,t.lineWidth=s/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var n=this.glyphInfo;if(n.length>=1){var o=n[0].p0;t.moveTo(o.x,o.y)}for(var s=0;s<n.length;s++){var l=n[s].p1;t.lineTo(l.x,l.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return A.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return _e.prototype.setText.call(this,t)}_getContextFont(){return _e.prototype._getContextFont.call(this)}_getTextSize(t){var o=this.dummyCanvas.getContext("2d");o.save(),o.font=this._getContextFont();var s=o.measureText(t);return o.restore(),{width:s.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,n=this._getTextSize(this.attrs.text),o=this.letterSpacing(),s=this.align(),l=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var h=Math.max(this.textWidth+((this.attrs.text||"").length-1)*o,0);this.glyphInfo=[];for(var u=0,p=0;p<t.dataArray.length;p++)t.dataArray[p].pathLength>0&&(u+=t.dataArray[p].pathLength);var _=0;"center"===s&&(_=Math.max(0,u/2-h/2)),"right"===s&&(_=Math.max(0,u-h));for(var b,P,y,v=nr(this.text()),T=this.text().split(" ").length-1,Z=-1,E=0,F=function(){E=0;for(var ne=t.dataArray,te=Z+1;te<ne.length;te++){if(ne[te].pathLength>0)return Z=te,ne[te];"M"===ne[te].command&&(b={x:ne[te].points[0],y:ne[te].points[1]})}return{}},D=function(ne){var te=t._getTextSize(ne).width+o;" "===ne&&"justify"===s&&(te+=(u-h)/T);var ue=0,Qe=0;for(P=void 0;Math.abs(te-ue)/te>.01&&Qe<20;){Qe++;for(var he=ue;void 0===y;)(y=F())&&he+y.pathLength<te&&(he+=y.pathLength,y=void 0);if(0===Object.keys(y).length||void 0===b)return;var Ae=!1;switch(y.command){case"L":ce.getLineLength(b.x,b.y,y.points[0],y.points[1])>te?P=ce.getPointOnLine(te,b.x,b.y,y.points[0],y.points[1],b.x,b.y):y=void 0;break;case"A":var gt=y.points[5],ae=y.points[4]+gt;0===E?E=y.points[4]+1e-8:te>ue?E+=Math.PI/180*gt/Math.abs(gt):E-=Math.PI/360*gt/Math.abs(gt),(gt<0&&E<ae||gt>=0&&E>ae)&&(E=ae,Ae=!0),P=ce.getPointOnEllipticalArc(y.points[0],y.points[1],y.points[2],y.points[3],E,y.points[6]);break;case"C":0===E?E=te>y.pathLength?1e-8:te/y.pathLength:te>ue?E+=(te-ue)/y.pathLength/2:E=Math.max(E-(ue-te)/y.pathLength/2,0),E>1&&(E=1,Ae=!0),P=ce.getPointOnCubicBezier(E,y.start.x,y.start.y,y.points[0],y.points[1],y.points[2],y.points[3],y.points[4],y.points[5]);break;case"Q":0===E?E=te/y.pathLength:te>ue?E+=(te-ue)/y.pathLength:E-=(ue-te)/y.pathLength,E>1&&(E=1,Ae=!0),P=ce.getPointOnQuadraticBezier(E,y.start.x,y.start.y,y.points[0],y.points[1],y.points[2],y.points[3])}void 0!==P&&(ue=ce.getLineLength(b.x,b.y,P.x,P.y)),Ae&&(Ae=!1,y=void 0)}},V=_/(t._getTextSize("C").width+o)-1,B=0;B<V&&(D("C"),void 0!==b&&void 0!==P);B++)b=P;for(var X=0;X<v.length&&(D(v[X]),void 0!==b&&void 0!==P);X++){var J=ce.getLineLength(b.x,b.y,P.x,P.y),$=0;if(l)try{$=l(v[X-1],v[X])*this.fontSize()}catch(ne){$=0}b.x+=$,P.x+=$,this.textWidth+=$;var K=ce.getPointOnLine($+J/2,b.x,b.y,P.x,P.y),W=Math.atan2(P.y-b.y,P.x-b.x);this.glyphInfo.push({transposeX:K.x,transposeY:K.y,text:v[X],rotation:W,p0:b,p1:P}),b=P}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(v){t.push(v.p0.x),t.push(v.p0.y),t.push(v.p1.x),t.push(v.p1.y)});for(var h,u,n=t[0]||0,o=t[0]||0,s=t[1]||0,l=t[1]||0,p=0;p<t.length/2;p++)h=t[2*p],u=t[2*p+1],n=Math.min(n,h),o=Math.max(o,h),s=Math.min(s,u),l=Math.max(l,u);var _=this.fontSize();return{x:n-_/2,y:s-_/2,width:o-n+_,height:l-s+_}}destroy(){return A.releaseCanvas(this.dummyCanvas),super.destroy()}}Pe.prototype._fillFunc=hr,Pe.prototype._strokeFunc=dr,Pe.prototype._fillFuncHit=hr,Pe.prototype._strokeFuncHit=dr,Pe.prototype.className="TextPath",Pe.prototype._attrsAffectingSize=["text","fontSize","data"],M(Pe),C.addGetterSetter(Pe,"data"),C.addGetterSetter(Pe,"fontFamily","Arial"),C.addGetterSetter(Pe,"fontSize",12,q()),C.addGetterSetter(Pe,"fontStyle","normal"),C.addGetterSetter(Pe,"align","left"),C.addGetterSetter(Pe,"letterSpacing",0,q()),C.addGetterSetter(Pe,"textBaseline","middle"),C.addGetterSetter(Pe,"fontVariant","normal"),C.addGetterSetter(Pe,"text",""),C.addGetterSetter(Pe,"textDecoration",null),C.addGetterSetter(Pe,"kerningFunc",null);var ur="tr-konva",Jr=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(c=>c+`.${ur}`).join(" "),gr="nodesRect",Qr=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Vr={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Wr="ontouchstart"in L._global;var vn=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],pr=1e8;function _r(c,t,n){const o=n.x+(c.x-n.x)*Math.cos(t)-(c.y-n.y)*Math.sin(t),s=n.y+(c.x-n.x)*Math.sin(t)+(c.y-n.y)*Math.cos(t);return Object.assign(Object.assign({},c),{rotation:c.rotation+t,x:o,y:s})}function Bn(c,t){return _r(c,t,function xn(c){return{x:c.x+c.width/2*Math.cos(c.rotation)+c.height/2*Math.sin(-c.rotation),y:c.y+c.height/2*Math.cos(c.rotation)+c.width/2*Math.sin(c.rotation)}}(c))}class se extends Qt{constructor(t){super(t),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Jr,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return A.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return ur+this._id}setNodes(t=[]){return this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const s=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},l=o._attrsAffectingSize.map(h=>h+"Change."+this._getEventNamespace()).join(" ");o.on(l,s),o.on(Qr.map(h=>h+`.${this._getEventNamespace()}`).join(" "),s),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(o)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let n;t.on(`dragstart.${this._getEventNamespace()}`,o=>{n=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(o,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,o=>{if(!n)return;const s=t.getAbsolutePosition(),l=s.x-n.x,h=s.y-n.y;this.nodes().forEach(u=>{if(u===t||u.isDragging())return;const p=u.getAbsolutePosition();u.setAbsolutePosition({x:p.x+l,y:p.y+h}),u.startDrag(o)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(gr),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(gr,this.__getNodeRect)}__getNodeShape(t,n=this.rotation(),o){var s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=t.getAbsoluteScale(o),h=t.getAbsolutePosition(o),u=s.x*l.x-t.offsetX()*l.x,p=s.y*l.y-t.offsetY()*l.y;const _=(L.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return _r({x:h.x+u*Math.cos(_)+p*Math.sin(-_),y:h.y+p*Math.cos(_)+u*Math.sin(_),width:s.width*l.x,height:s.height*l.y,rotation:_},-L.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-pr,y:-pr,width:0,height:0,rotation:0};const n=[];this.nodes().map(_=>{const v=_.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var T=[{x:v.x,y:v.y},{x:v.x+v.width,y:v.y},{x:v.x+v.width,y:v.y+v.height},{x:v.x,y:v.y+v.height}],b=_.getAbsoluteTransform();T.forEach(function(P){var y=b.point(P);n.push(y)})});const o=new e;var s,l,h,u;o.rotate(-L.getAngle(this.rotation())),n.forEach(function(_){var v=o.point(_);void 0===s&&(s=h=v.x,l=u=v.y),s=Math.min(s,v.x),l=Math.min(l,v.y),h=Math.max(h,v.x),u=Math.max(u,v.y)}),o.invert();const p=o.point({x:s,y:l});return{x:p.x,y:p.y,width:h-s,height:u-l,rotation:L.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),vn.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")}_createAnchor(t){var n=new Ki({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Wr?10:"auto"}),o=this;n.on("mousedown touchstart",function(s){o._handleMouseDown(s)}),n.on("dragstart",s=>{n.stopDrag(),s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),n.on("mouseenter",()=>{var s=L.getAngle(this.rotation()),l=function Xr(c,t){if("rotater"===c)return"crosshair";t+=A.degToRad(Vr[c]||0);var n=(A.radToDeg(t)%360+360)%360;return A._inRange(n,337.5,360)||A._inRange(n,0,22.5)?"ns-resize":A._inRange(n,22.5,67.5)?"nesw-resize":A._inRange(n,67.5,112.5)?"ew-resize":A._inRange(n,112.5,157.5)?"nwse-resize":A._inRange(n,157.5,202.5)?"ns-resize":A._inRange(n,202.5,247.5)?"nesw-resize":A._inRange(n,247.5,292.5)?"ew-resize":A._inRange(n,292.5,337.5)?"nwse-resize":(A.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(t,s);n.getStage().content&&(n.getStage().content.style.cursor=l),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var t=new S({name:"back",width:0,height:0,draggable:!0,sceneFunc(n){var o=this.getParent(),s=o.padding();n.beginPath(),n.rect(-s,-s,this.width()+2*s,this.height()+2*s),n.moveTo(this.width()/2,-s),o.rotateEnabled()&&n.lineTo(this.width()/2,-o.rotateAnchorOffset()*A._sign(this.height())-s),n.fillStrokeShape(this)},hitFunc:(n,o)=>{if(this.shouldOverdrawWholeArea()){var s=this.padding();n.beginPath(),n.rect(-s,-s,o.width()+2*s,o.height()+2*s),n.fillStrokeShape(o)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",n=>{n.cancelBubble=!0}),t.on("dragmove",n=>{n.cancelBubble=!0}),t.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var n=this._getNodeRect(),o=n.width,s=n.height,l=Math.sqrt(Math.pow(o,2)+Math.pow(s,2));this.sin=Math.abs(s/l),this.cos=Math.abs(o/l),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var h=t.target.getAbsolutePosition(),u=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:u.x-h.x,y:u.y-h.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(p=>{p._fire("transformstart",{evt:t.evt,target:p})})}_handleMouseMove(t){var n,o,s,l=this.findOne("."+this._movingAnchorName),h=l.getStage();h.setPointersPositions(t);const u=h.getPointerPosition();let p={x:u.x-this._anchorDragOffset.x,y:u.y-this._anchorDragOffset.y};const _=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(p=this.anchorDragBoundFunc()(_,p,t)),l.setAbsolutePosition(p);const v=l.getAbsolutePosition();if(_.x!==v.x||_.y!==v.y){if("rotater"===this._movingAnchorName){var T=this._getNodeRect();n=l.x()-T.width/2,o=-l.y()+T.height/2;let ne=Math.atan2(-o,n)+Math.PI/2;T.height<0&&(ne-=Math.PI);const te=L.getAngle(this.rotation())+ne,ue=L.getAngle(this.rotationSnapTolerance()),Ae=Bn(T,function $r(c,t,n){let o=t;for(let s=0;s<c.length;s++){const l=L.getAngle(c[s]),h=Math.abs(l-t)%(2*Math.PI);Math.min(h,2*Math.PI-h)<n&&(o=l)}return o}(this.rotationSnaps(),te,ue)-T.rotation);return void this._fitNodesInto(Ae,t)}var P=this.keepRatio()||t.shiftKey,D=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(P){var y=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(y.x-l.x(),2)+Math.pow(y.y-l.y(),2));var Z=this.findOne(".top-left").x()>y.x?-1:1,E=this.findOne(".top-left").y()>y.y?-1:1;n=s*this.cos*Z,o=s*this.sin*E,this.findOne(".top-left").x(y.x-n),this.findOne(".top-left").y(y.y-o)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(l.y());else if("top-right"===this._movingAnchorName){P&&(y=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},s=Math.sqrt(Math.pow(l.x()-y.x,2)+Math.pow(y.y-l.y(),2)),Z=this.findOne(".top-right").x()<y.x?-1:1,E=this.findOne(".top-right").y()>y.y?-1:1,n=s*this.cos*Z,o=s*this.sin*E,this.findOne(".top-right").x(y.x+n),this.findOne(".top-right").y(y.y-o));var F=l.position();this.findOne(".top-left").y(F.y),this.findOne(".bottom-right").x(F.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(l.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(l.x()):"bottom-left"===this._movingAnchorName?(P&&(y=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},s=Math.sqrt(Math.pow(y.x-l.x(),2)+Math.pow(l.y()-y.y,2)),Z=y.x<l.x()?-1:1,E=l.y()<y.y?-1:1,o=s*this.sin*E,l.x(y.x-(n=s*this.cos*Z)),l.y(y.y+o)),F=l.position(),this.findOne(".top-left").x(F.x),this.findOne(".bottom-right").y(F.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(l.y()):"bottom-right"===this._movingAnchorName?P&&(y=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},s=Math.sqrt(Math.pow(l.x()-y.x,2)+Math.pow(l.y()-y.y,2)),Z=this.findOne(".bottom-right").x()<y.x?-1:1,E=this.findOne(".bottom-right").y()<y.y?-1:1,n=s*this.cos*Z,o=s*this.sin*E,this.findOne(".bottom-right").x(y.x+n),this.findOne(".bottom-right").y(y.y+o)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(D=this.centeredScaling()||t.altKey){var N=this.findOne(".top-left"),z=this.findOne(".bottom-right"),V=N.x(),B=N.y(),X=this.getWidth()-z.x(),J=this.getHeight()-z.y();z.move({x:-V,y:-B}),N.move({x:X,y:J})}var $=this.findOne(".top-left").getAbsolutePosition();n=$.x,o=$.y;var K=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),W=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:o,width:K,height:W,rotation:L.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:t,target:n}),n&&this._nodes.forEach(o=>{o._fire("transformend",{evt:t,target:o})}),this._movingAnchorName=null}}_fitNodesInto(t,n){var o=this._getNodeRect();if(A._inRange(t.width,2*-this.padding()-1,1))return void this.update();if(A._inRange(t.height,2*-this.padding()-1,1))return void this.update();const l=this.flipEnabled();var h=new e;if(h.rotate(L.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const T=h.point({x:2*-this.padding(),y:0});if(t.x+=T.x,t.y+=T.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,!l)return void this.update()}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const T=h.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,t.width+=2*this.padding(),!l)return void this.update()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const T=h.point({x:0,y:2*-this.padding()});if(t.x+=T.x,t.y+=T.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,t.height+=2*this.padding(),!l)return void this.update()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const T=h.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,t.height+=2*this.padding(),!l)return void this.update()}if(this.boundBoxFunc()){const T=this.boundBoxFunc()(o,t);T?t=T:A.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const u=1e7,p=new e;p.translate(o.x,o.y),p.rotate(o.rotation),p.scale(o.width/u,o.height/u);const _=new e;_.translate(t.x,t.y),_.rotate(t.rotation),_.scale(t.width/u,t.height/u);const v=_.multiply(p.invert());this._nodes.forEach(T=>{var b;const P=T.getParent().getAbsoluteTransform(),y=T.getTransform().copy();y.translate(T.offsetX(),T.offsetY());const Z=new e;Z.multiply(P.copy().invert()).multiply(v).multiply(P).multiply(y);const E=Z.decompose();T.setAttrs(E),this._fire("transform",{evt:n,target:T}),T._fire("transform",{evt:n,target:T}),null===(b=T.getLayer())||void 0===b||b.batchDraw()}),this.rotation(A._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,n){this.findOne(t).setAttrs(n)}update(){var t,n=this._getNodeRect();this.rotation(A._getRotation(n.rotation));var o=n.width,s=n.height,l=this.enabledAnchors(),h=this.resizeEnabled(),u=this.padding(),p=this.anchorSize();this.find("._anchor").forEach(_=>{_.setAttrs({width:p,height:p,offsetX:p/2,offsetY:p/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:p/2+u,offsetY:p/2+u,visible:h&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:o/2,y:0,offsetY:p/2+u,visible:h&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:o,y:0,offsetX:p/2-u,offsetY:p/2+u,visible:h&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:p/2+u,visible:h&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:o,y:s/2,offsetX:p/2-u,visible:h&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:p/2+u,offsetY:p/2-u,visible:h&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:o/2,y:s,offsetY:p/2-u,visible:h&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:o,y:s,offsetX:p/2-u,offsetY:p/2-u,visible:h&&l.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:o/2,y:-this.rotateAnchorOffset()*A._sign(s)-u,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:o,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Qt.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return R.prototype.toObject.call(this)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}se.prototype.className="Transformer",M(se),C.addGetterSetter(se,"enabledAnchors",vn,function jr(c){return c instanceof Array||A.warn("enabledAnchors value should be an array"),c instanceof Array&&c.forEach(function(t){-1===vn.indexOf(t)&&A.warn("Unknown anchor name: "+t+". Available names are: "+vn.join(", "))}),c||[]}),C.addGetterSetter(se,"flipEnabled",!0,He()),C.addGetterSetter(se,"resizeEnabled",!0),C.addGetterSetter(se,"anchorSize",10,q()),C.addGetterSetter(se,"rotateEnabled",!0),C.addGetterSetter(se,"rotationSnaps",[]),C.addGetterSetter(se,"rotateAnchorOffset",50,q()),C.addGetterSetter(se,"rotationSnapTolerance",5,q()),C.addGetterSetter(se,"borderEnabled",!0),C.addGetterSetter(se,"anchorStroke","rgb(0, 161, 255)"),C.addGetterSetter(se,"anchorStrokeWidth",1,q()),C.addGetterSetter(se,"anchorFill","white"),C.addGetterSetter(se,"anchorCornerRadius",0,q()),C.addGetterSetter(se,"borderStroke","rgb(0, 161, 255)"),C.addGetterSetter(se,"borderStrokeWidth",1,q()),C.addGetterSetter(se,"borderDash"),C.addGetterSetter(se,"keepRatio",!0),C.addGetterSetter(se,"centeredScaling",!1),C.addGetterSetter(se,"ignoreStroke",!1),C.addGetterSetter(se,"padding",0,q()),C.addGetterSetter(se,"node"),C.addGetterSetter(se,"nodes"),C.addGetterSetter(se,"boundBoxFunc"),C.addGetterSetter(se,"anchorDragBoundFunc"),C.addGetterSetter(se,"shouldOverdrawWholeArea",!1),C.addGetterSetter(se,"useSingleNodeRotation",!0),C.backCompat(se,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class qt extends S{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,L.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}function mr(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}qt.prototype.className="Wedge",qt.prototype._centroid=!0,qt.prototype._attrsAffectingSize=["radius"],M(qt),C.addGetterSetter(qt,"radius",0,q()),C.addGetterSetter(qt,"angle",0,q()),C.addGetterSetter(qt,"clockwise",!1),C.backCompat(qt,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Kr=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ea=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];C.addGetterSetter(R,"blurRadius",0,q(),C.afterSetFilter);C.addGetterSetter(R,"brightness",0,q(),C.afterSetFilter);C.addGetterSetter(R,"contrast",0,q(),C.afterSetFilter);function Hn(c,t,n,o,s){var l=n-t,h=s-o;return 0===l?o+h/2:0===h?o:h*((c-t)/l)+o}C.addGetterSetter(R,"embossStrength",.5,q(),C.afterSetFilter),C.addGetterSetter(R,"embossWhiteLevel",.5,q(),C.afterSetFilter),C.addGetterSetter(R,"embossDirection","top-left",null,C.afterSetFilter),C.addGetterSetter(R,"embossBlend",!1,null,C.afterSetFilter);C.addGetterSetter(R,"enhance",0,q(),C.afterSetFilter);C.addGetterSetter(R,"hue",0,q(),C.afterSetFilter),C.addGetterSetter(R,"saturation",0,q(),C.afterSetFilter),C.addGetterSetter(R,"luminance",0,q(),C.afterSetFilter);C.addGetterSetter(R,"hue",0,q(),C.afterSetFilter),C.addGetterSetter(R,"saturation",0,q(),C.afterSetFilter),C.addGetterSetter(R,"value",0,q(),C.afterSetFilter);function yn(c,t,n){var o=4*(n*c.width+t),s=[];return s.push(c.data[o++],c.data[o++],c.data[o++],c.data[o++]),s}function nn(c,t){return Math.sqrt(Math.pow(c[0]-t[0],2)+Math.pow(c[1]-t[1],2)+Math.pow(c[2]-t[2],2))}C.addGetterSetter(R,"kaleidoscopePower",2,q(),C.afterSetFilter),C.addGetterSetter(R,"kaleidoscopeAngle",0,q(),C.afterSetFilter);C.addGetterSetter(R,"threshold",0,q(),C.afterSetFilter);C.addGetterSetter(R,"noise",.2,q(),C.afterSetFilter);C.addGetterSetter(R,"pixelSize",8,q(),C.afterSetFilter);C.addGetterSetter(R,"levels",.5,q(),C.afterSetFilter);C.addGetterSetter(R,"red",0,function(c){return this._filterUpToDate=!1,c>255?255:c<0?0:Math.round(c)}),C.addGetterSetter(R,"green",0,function(c){return this._filterUpToDate=!1,c>255?255:c<0?0:Math.round(c)}),C.addGetterSetter(R,"blue",0,ni,C.afterSetFilter);C.addGetterSetter(R,"red",0,function(c){return this._filterUpToDate=!1,c>255?255:c<0?0:Math.round(c)}),C.addGetterSetter(R,"green",0,function(c){return this._filterUpToDate=!1,c>255?255:c<0?0:Math.round(c)}),C.addGetterSetter(R,"blue",0,ni,C.afterSetFilter),C.addGetterSetter(R,"alpha",1,function(c){return this._filterUpToDate=!1,c>1?1:c<0?0:c});return C.addGetterSetter(R,"threshold",.5,q(),C.afterSetFilter),er.Util._assign(er,{Arc:Ot,Arrow:fi,Circle:Ei,Ellipse:Vt,Image:ut,Label:Un,Tag:vi,Line:Nt,Path:ce,Rect:Ki,RegularPolygon:xi,Ring:yi,Sprite:yt,Star:Wt,Text:_e,TextPath:Pe,Transformer:se,Wedge:qt,Filters:{Blur:function(t){var n=Math.round(this.blurRadius());n>0&&function ta(c,t){var l,h,u,p,_,v,T,b,P,y,Z,E,F,D,N,z,V,B,X,J,$,K,W,ne,n=c.data,o=c.width,s=c.height,te=t+t+1,ue=o-1,Qe=s-1,he=t+1,Ae=he*(he+1)/2,Ve=new mr,gt=null,ae=Ve,fe=null,We=null,Xt=Kr[t],$t=ea[t];for(u=1;u<te;u++)ae=ae.next=new mr,u===he&&(gt=ae);for(ae.next=Ve,T=v=0,h=0;h<s;h++){for(z=V=B=X=b=P=y=Z=0,E=he*(J=n[v]),F=he*($=n[v+1]),D=he*(K=n[v+2]),N=he*(W=n[v+3]),b+=Ae*J,P+=Ae*$,y+=Ae*K,Z+=Ae*W,ae=Ve,u=0;u<he;u++)ae.r=J,ae.g=$,ae.b=K,ae.a=W,ae=ae.next;for(u=1;u<he;u++)b+=(ae.r=J=n[p=v+((ue<u?ue:u)<<2)])*(ne=he-u),P+=(ae.g=$=n[p+1])*ne,y+=(ae.b=K=n[p+2])*ne,Z+=(ae.a=W=n[p+3])*ne,z+=J,V+=$,B+=K,X+=W,ae=ae.next;for(fe=Ve,We=gt,l=0;l<o;l++)n[v+3]=W=Z*Xt>>$t,0!==W?(n[v]=(b*Xt>>$t)*(W=255/W),n[v+1]=(P*Xt>>$t)*W,n[v+2]=(y*Xt>>$t)*W):n[v]=n[v+1]=n[v+2]=0,b-=E,P-=F,y-=D,Z-=N,E-=fe.r,F-=fe.g,D-=fe.b,N-=fe.a,p=T+((p=l+t+1)<ue?p:ue)<<2,b+=z+=fe.r=n[p],P+=V+=fe.g=n[p+1],y+=B+=fe.b=n[p+2],Z+=X+=fe.a=n[p+3],fe=fe.next,E+=J=We.r,F+=$=We.g,D+=K=We.b,N+=W=We.a,z-=J,V-=$,B-=K,X-=W,We=We.next,v+=4;T+=o}for(l=0;l<o;l++){for(V=B=X=z=P=y=Z=b=0,E=he*(J=n[v=l<<2]),F=he*($=n[v+1]),D=he*(K=n[v+2]),N=he*(W=n[v+3]),b+=Ae*J,P+=Ae*$,y+=Ae*K,Z+=Ae*W,ae=Ve,u=0;u<he;u++)ae.r=J,ae.g=$,ae.b=K,ae.a=W,ae=ae.next;for(_=o,u=1;u<=t;u++)b+=(ae.r=J=n[v=_+l<<2])*(ne=he-u),P+=(ae.g=$=n[v+1])*ne,y+=(ae.b=K=n[v+2])*ne,Z+=(ae.a=W=n[v+3])*ne,z+=J,V+=$,B+=K,X+=W,ae=ae.next,u<Qe&&(_+=o);for(v=l,fe=Ve,We=gt,h=0;h<s;h++)n[3+(p=v<<2)]=W=Z*Xt>>$t,W>0?(n[p]=(b*Xt>>$t)*(W=255/W),n[p+1]=(P*Xt>>$t)*W,n[p+2]=(y*Xt>>$t)*W):n[p]=n[p+1]=n[p+2]=0,b-=E,P-=F,y-=D,Z-=N,E-=fe.r,F-=fe.g,D-=fe.b,N-=fe.a,p=l+((p=h+he)<Qe?p:Qe)*o<<2,b+=z+=fe.r=n[p],P+=V+=fe.g=n[p+1],y+=B+=fe.b=n[p+2],Z+=X+=fe.a=n[p+3],fe=fe.next,E+=J=We.r,F+=$=We.g,D+=K=We.b,N+=W=We.a,z-=J,V-=$,B-=K,X-=W,We=We.next,v+=o}}(t,n)},Brighten:function(c){var s,t=255*this.brightness(),n=c.data,o=n.length;for(s=0;s<o;s+=4)n[s]+=t,n[s+1]+=t,n[s+2]+=t},Contrast:function(c){var u,t=Math.pow((this.contrast()+100)/100,2),n=c.data,o=n.length,s=150,l=150,h=150;for(u=0;u<o;u+=4)s=n[u],l=n[u+1],h=n[u+2],s/=255,s-=.5,s*=t,s+=.5,l/=255,l-=.5,l*=t,l+=.5,h/=255,h-=.5,h*=t,h+=.5,l=(l*=255)<0?0:l>255?255:l,h=(h*=255)<0?0:h>255?255:h,n[u]=s=(s*=255)<0?0:s>255?255:s,n[u+1]=l,n[u+2]=h},Emboss:function(c){var t=10*this.embossStrength(),n=255*this.embossWhiteLevel(),o=this.embossDirection(),s=this.embossBlend(),l=0,h=0,u=c.data,p=c.width,_=c.height,v=4*p,T=_;switch(o){case"top-left":l=-1,h=-1;break;case"top":l=-1,h=0;break;case"top-right":l=-1,h=1;break;case"right":l=0,h=1;break;case"bottom-right":l=1,h=1;break;case"bottom":l=1,h=0;break;case"bottom-left":l=1,h=-1;break;case"left":l=0,h=-1;break;default:A.error("Unknown emboss direction: "+o)}do{var b=(T-1)*v,P=l;T+P<1&&(P=0),T+P>_&&(P=0);var y=(T-1+P)*p*4,Z=p;do{var E=b+4*(Z-1),F=h;Z+F<1&&(F=0),Z+F>p&&(F=0);var D=y+4*(Z-1+F),z=u[E+1]-u[D+1],V=u[E+2]-u[D+2],B=u[E]-u[D],X=B>0?B:-B;if((z>0?z:-z)>X&&(B=z),(V>0?V:-V)>X&&(B=V),B*=t,s){var K=u[E]+B,W=u[E+1]+B,ne=u[E+2]+B;u[E]=K>255?255:K<0?0:K,u[E+1]=W>255?255:W<0?0:W,u[E+2]=ne>255?255:ne<0?0:ne}else{var te=n-B;te<0?te=0:te>255&&(te=255),u[E]=u[E+1]=u[E+2]=te}}while(--Z)}while(--T)},Enhance:function(c){var l,p,T,b,t=c.data,n=t.length,o=t[0],s=o,h=t[1],u=h,_=t[2],v=_,P=this.enhance();if(0!==P){for(b=0;b<n;b+=4)(l=t[b+0])<o?o=l:l>s&&(s=l),(p=t[b+1])<h?h=p:p>u&&(u=p),(T=t[b+2])<_?_=T:T>v&&(v=T);var y,Z,E,F,D,N,z,V,B;for(s===o&&(s=255,o=0),u===h&&(u=255,h=0),v===_&&(v=255,_=0),P>0?(Z=s+P*(255-s),E=o-P*(o-0),D=u+P*(255-u),N=h-P*(h-0),V=v+P*(255-v),B=_-P*(_-0)):(Z=s+P*(s-(y=.5*(s+o))),E=o+P*(o-y),D=u+P*(u-(F=.5*(u+h))),N=h+P*(h-F),V=v+P*(v-(z=.5*(v+_))),B=_+P*(_-z)),b=0;b<n;b+=4)t[b+0]=Hn(t[b+0],o,s,E,Z),t[b+1]=Hn(t[b+1],h,u,N,D),t[b+2]=Hn(t[b+2],_,v,B,V)}},Grayscale:function(c){var o,s,t=c.data,n=t.length;for(o=0;o<n;o+=4)t[o]=s=.34*t[o]+.5*t[o+1]+.16*t[o+2],t[o+1]=s,t[o+2]=s},HSL:function(c){var u,N,z,V,B,t=c.data,n=t.length,s=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,h=127*this.luminance(),p=1*s*Math.cos(l*Math.PI/180),_=1*s*Math.sin(l*Math.PI/180),v=.299+.701*p+.167*_,T=.587-.587*p+.33*_,b=.114-.114*p-.497*_,P=.299-.299*p-.328*_,y=.587+.413*p+.035*_,Z=.114-.114*p+.293*_,E=.299-.3*p+1.25*_,F=.587-.586*p-1.05*_,D=.114+.886*p-.2*_;for(u=0;u<n;u+=4)B=t[u+3],t[u+0]=v*(N=t[u+0])+T*(z=t[u+1])+b*(V=t[u+2])+h,t[u+1]=P*N+y*z+Z*V+h,t[u+2]=E*N+F*z+D*V+h,t[u+3]=B},HSV:function(c){var h,D,N,z,V,t=c.data,n=t.length,o=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,u=o*s*Math.cos(l*Math.PI/180),p=o*s*Math.sin(l*Math.PI/180),_=.299*o+.701*u+.167*p,v=.587*o-.587*u+.33*p,T=.114*o-.114*u-.497*p,b=.299*o-.299*u-.328*p,P=.587*o+.413*u+.035*p,y=.114*o-.114*u+.293*p,Z=.299*o-.3*u+1.25*p,E=.587*o-.586*u-1.05*p,F=.114*o+.886*u-.2*p;for(h=0;h<n;h+=4)V=t[h+3],t[h+0]=_*(D=t[h+0])+v*(N=t[h+1])+T*(z=t[h+2]),t[h+1]=b*D+P*N+y*z,t[h+2]=Z*D+E*N+F*z,t[h+3]=V},Invert:function(c){var o,t=c.data,n=t.length;for(o=0;o<n;o+=4)t[o]=255-t[o],t[o+1]=255-t[o+1],t[o+2]=255-t[o+2]},Kaleidoscope:function(c){var o,s,l,h,p,_,v,T,b,t=c.width,n=c.height,P=Math.round(this.kaleidoscopePower()),y=Math.round(this.kaleidoscopeAngle()),Z=Math.floor(t*(y%360)/360);if(!(P<1)){var E=A.createCanvasElement();E.width=t,E.height=n;var F=E.getContext("2d").getImageData(0,0,t,n);A.releaseCanvas(E),function(c,t,n){var _,v,T,E,o=c.data,s=t.data,l=c.width,h=c.height,u=n.polarCenterX||l/2,p=n.polarCenterY||h/2,b=0,P=0,y=0,Z=0,F=Math.sqrt(u*u+p*p);v=l-u,T=h-p,F=(E=Math.sqrt(v*v+T*T))>F?E:F;var z,V,X,J,D=h,N=l,B=360/N*Math.PI/180;for(V=0;V<N;V+=1)for(X=Math.sin(V*B),J=Math.cos(V*B),z=0;z<D;z+=1)v=Math.floor(u+F*z/D*J),b=o[0+(_=4*((T=Math.floor(p+F*z/D*X))*l+v))],P=o[_+1],y=o[_+2],Z=o[_+3],s[0+(_=4*(V+z*l))]=b,s[_+1]=P,s[_+2]=y,s[_+3]=Z}(c,F,{polarCenterX:t/2,polarCenterY:n/2});for(var D=t/Math.pow(2,P);D<=8;)D*=2,P-=1;var N=D=Math.ceil(D),z=0,V=N,B=1;for(Z+D>t&&(z=N,V=0,B=-1),s=0;s<n;s+=1)for(o=z;o!==V;o+=B)l=Math.round(o+Z)%t,p=F.data[1+(T=4*(t*s+l))],_=F.data[T+2],v=F.data[T+3],F.data[0+(b=4*(t*s+o))]=F.data[T+0],F.data[b+1]=p,F.data[b+2]=_,F.data[b+3]=v;for(s=0;s<n;s+=1)for(N=Math.floor(D),h=0;h<P;h+=1){for(o=0;o<N+1;o+=1)p=F.data[1+(T=4*(t*s+o))],_=F.data[T+2],v=F.data[T+3],F.data[0+(b=4*(t*s+2*N-o-1))]=F.data[T+0],F.data[b+1]=p,F.data[b+2]=_,F.data[b+3]=v;N*=2}!function(c,t,n){var _,v,T,b,P,D,o=c.data,s=t.data,l=c.width,h=c.height,u=n.polarCenterX||l/2,p=n.polarCenterY||h/2,y=0,Z=0,E=0,F=0,N=Math.sqrt(u*u+p*p);v=l-u,T=h-p,N=(D=Math.sqrt(v*v+T*T))>N?D:N;var B,X,$,z=h,V=l,J=n.polarRotation||0;for(v=0;v<l;v+=1)for(T=0;T<h;T+=1)b=v-u,P=T-p,B=Math.sqrt(b*b+P*P)*z/N,X=(X=(180*Math.atan2(P,b)/Math.PI+360+J)%360)*V/360,$=Math.floor(X),y=o[0+(_=4*(Math.floor(B)*l+$))],Z=o[_+1],E=o[_+2],F=o[_+3],s[0+(_=4*(T*l+v))]=y,s[_+1]=Z,s[_+2]=E,s[_+3]=F}(F,c,{polarRotation:0})}},Mask:function(c){var n=function _a(c,t){var n=yn(c,0,0),o=yn(c,c.width-1,0),s=yn(c,0,c.height-1),l=yn(c,c.width-1,c.height-1),h=t||10;if(nn(n,o)<h&&nn(o,l)<h&&nn(l,s)<h&&nn(s,n)<h){for(var u=function pa(c){for(var t=[0,0,0],n=0;n<c.length;n++)t[0]+=c[n][0],t[1]+=c[n][1],t[2]+=c[n][2];return t[0]/=c.length,t[1]/=c.length,t[2]/=c.length,t}([o,n,l,s]),p=[],_=0;_<c.width*c.height;_++){var v=nn(u,[c.data[4*_],c.data[4*_+1],c.data[4*_+2]]);p[_]=v<h?0:255}return p}}(c,this.threshold());return n&&function ma(c,t){for(var n=0;n<c.width*c.height;n++)c.data[4*n+3]=t[n]}(c,n=function xa(c,t,n){for(var o=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(o.length)),l=Math.floor(s/2),h=[],u=0;u<n;u++)for(var p=0;p<t;p++){for(var _=u*t+p,v=0,T=0;T<s;T++)for(var b=0;b<s;b++){var P=u+T-l,y=p+b-l;P>=0&&P<n&&y>=0&&y<t&&(v+=c[P*t+y]*o[T*s+b])}h[_]=v}return h}(n=function va(c,t,n){for(var o=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(o.length)),l=Math.floor(s/2),h=[],u=0;u<n;u++)for(var p=0;p<t;p++){for(var _=u*t+p,v=0,T=0;T<s;T++)for(var b=0;b<s;b++){var P=u+T-l,y=p+b-l;P>=0&&P<n&&y>=0&&y<t&&(v+=c[P*t+y]*o[T*s+b])}h[_]=v>=1020?255:0}return h}(n=function fa(c,t,n){for(var o=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(o.length)),l=Math.floor(s/2),h=[],u=0;u<n;u++)for(var p=0;p<t;p++){for(var _=u*t+p,v=0,T=0;T<s;T++)for(var b=0;b<s;b++){var P=u+T-l,y=p+b-l;P>=0&&P<n&&y>=0&&y<t&&(v+=c[P*t+y]*o[T*s+b])}h[_]=2040===v?255:0}return h}(n,c.width,c.height),c.width,c.height),c.width,c.height)),c},Noise:function(c){var l,t=255*this.noise(),n=c.data,o=n.length,s=t/2;for(l=0;l<o;l+=4)n[l+0]+=s-2*s*Math.random(),n[l+1]+=s-2*s*Math.random(),n[l+2]+=s-2*s*Math.random()},Pixelate:function(c){var s,l,h,u,p,_,v,P,y,Z,E,F,D,N,t=Math.ceil(this.pixelSize()),n=c.width,o=c.height,T=Math.ceil(n/t),b=Math.ceil(o/t),z=c.data;if(t<=0)A.error("pixelSize value can not be <= 0");else for(F=0;F<T;F+=1)for(D=0;D<b;D+=1){for(u=0,p=0,_=0,v=0,y=(P=F*t)+t,E=(Z=D*t)+t,N=0,s=P;s<y;s+=1)if(!(s>=n))for(l=Z;l<E;l+=1)l>=o||(u+=z[0+(h=4*(n*l+s))],p+=z[h+1],_+=z[h+2],v+=z[h+3],N+=1);for(u/=N,p/=N,_/=N,v/=N,s=P;s<y;s+=1)if(!(s>=n))for(l=Z;l<E;l+=1)l>=o||(z[0+(h=4*(n*l+s))]=u,z[h+1]=p,z[h+2]=_,z[h+3]=v)}},Posterize:function(c){var l,t=Math.round(254*this.levels())+1,n=c.data,o=n.length,s=255/t;for(l=0;l<o;l+=1)n[l]=Math.floor(n[l]/s)*s},RGB:function(c){var h,u,t=c.data,n=t.length,o=this.red(),s=this.green(),l=this.blue();for(h=0;h<n;h+=4)t[h]=(u=(.34*t[h]+.5*t[h+1]+.16*t[h+2])/255)*o,t[h+1]=u*s,t[h+2]=u*l,t[h+3]=t[h+3]},RGBA:function(c){var u,p,t=c.data,n=t.length,o=this.red(),s=this.green(),l=this.blue(),h=this.alpha();for(u=0;u<n;u+=4)t[u]=o*h+t[u]*(p=1-h),t[u+1]=s*h+t[u+1]*p,t[u+2]=l*h+t[u+2]*p},Sepia:function(c){var o,s,l,h,t=c.data,n=t.length;for(o=0;o<n;o+=4)s=t[o+0],l=t[o+1],h=t[o+2],t[o+0]=Math.min(255,.393*s+.769*l+.189*h),t[o+1]=Math.min(255,.349*s+.686*l+.168*h),t[o+2]=Math.min(255,.272*s+.534*l+.131*h)},Solarize:function(c){var t=c.data,n=c.width,s=4*n,l=c.height;do{var h=(l-1)*s,u=n;do{var p=h+4*(u-1),_=t[p],v=t[p+1],T=t[p+2];_>127&&(_=255-_),v>127&&(v=255-v),T>127&&(T=255-T),t[p]=_,t[p+1]=v,t[p+2]=T}while(--u)}while(--l)},Threshold:function(c){var s,t=255*this.threshold(),n=c.data,o=n.length;for(s=0;s<o;s+=1)n[s]=n[s]<t?0:255}}})}()}}]);