"use strict";(self.webpackChunkMeuBilhete_NewSite=self.webpackChunkMeuBilhete_NewSite||[]).push([[931],{3254:(E,P,i)=>{i.d(P,{w:()=>T});var Z=i(5e3);let T=(()=>{class g{testCpf(s){var n,m,r,c,h,v,w,C;let p=0,_=(null===(n=s.get("cpf"))||void 0===n?void 0:n.value)||(null===(m=null==s?void 0:s.get("identificationNumber"))||void 0===m?void 0:m.value);if(void 0===_)return!1;let t=_.replace(".","").replace(".","").replace("-","");("00000000000"===t||"11111111111"===t||"22222222222"===t||"33333333333"===t||"44444444444"===t||"55555555555"===t||"66666666666"===t||"77777777777"===t||"88888888888"===t||"99999999999"===t||11!==t.length)&&(null===(r=s.get("cpf"))||void 0===r||r.setErrors({invalidCpf:!0}),null===(c=s.get("identificationNumber"))||void 0===c||c.setErrors({invalidCpf:!0}));for(let u=1;u<=9;u++)p+=parseInt(t.substring(u-1,u))*(11-u);let f=10*p%11;(10===f||11===f)&&(f=0),f!==parseInt(t.substring(9,10))&&(null===(h=s.get("cpf"))||void 0===h||h.setErrors({invalidCpf:!0}),null===(v=s.get("identificationNumber"))||void 0===v||v.setErrors({invalidCpf:!0})),p=0;for(let u=1;u<=10;u++)p+=parseInt(t.substring(u-1,u))*(12-u);return f=10*p%11,(10===f||11===f)&&(f=0),f!==parseInt(t.substring(10,11))&&(null===(w=s.get("cpf"))||void 0===w||w.setErrors({invalidCpf:!0}),null===(C=s.get("identificationNumber"))||void 0===C||C.setErrors({invalidCpf:!0})),null}testPasswordSame(s){var n;return s.value.password!==s.value.repeatPassword&&(null===(n=s.get("repeatPassword"))||void 0===n||n.setErrors({notSame:!0})),null}testFullName(s){var n;return(-1==s.value.name.indexOf(" ")||0==s.value.name.indexOf(" "))&&(null===(n=s.get("name"))||void 0===n||n.setErrors({notFull:!0})),null}testEmailSame(s){var n;return s.value.email!==s.value.repeatEmail&&(null===(n=s.get("repeatEmail"))||void 0===n||n.setErrors({notSame:!0})),null}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275prov=Z.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},8931:(E,P,i)=>{i.r(P),i.d(P,{ChangePasswordModule:()=>b});var Z=i(9808),T=i(9485),g=i(5003),d=i(3075),s=i(3287),n=i(9646),m=i(262),r=i(5e3),c=i(7599),h=i(3254),v=i(5970);function w(o,l){1&o&&(r.TgZ(0,"div"),r.TgZ(1,"p",13),r._uU(2,"Senha \xe9 obrigat\xf3ria"),r.qZA(),r.qZA())}function C(o,l){1&o&&(r.TgZ(0,"div"),r.TgZ(1,"p",13),r._uU(2,"Senha tem que ter no m\xednimo 6 caracteres"),r.qZA(),r.qZA())}function p(o,l){if(1&o&&(r.TgZ(0,"div"),r.YNc(1,w,3,0,"div",5),r.YNc(2,C,3,0,"div",5),r.qZA()),2&o){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",1==(null==e.formChangePassword.controls.password||null==e.formChangePassword.controls.password.errors?null:e.formChangePassword.controls.password.errors.required)),r.xp6(1),r.Q6J("ngIf",null==e.formChangePassword.controls.password||null==e.formChangePassword.controls.password.errors?null:e.formChangePassword.controls.password.errors.minlength)}}function _(o,l){1&o&&(r.TgZ(0,"div"),r.TgZ(1,"p",13),r._uU(2,"Campo de repetir a senha \xe9 obrigat\xf3rio"),r.qZA(),r.qZA())}function t(o,l){1&o&&(r.TgZ(0,"div"),r.TgZ(1,"p",13),r._uU(2,"As senhas n\xe3o s\xe3o as mesmas "),r.qZA(),r.qZA())}function f(o,l){if(1&o&&(r.TgZ(0,"div"),r.YNc(1,_,3,0,"div",5),r.YNc(2,t,3,0,"div",5),r.qZA()),2&o){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",1==(null==e.formChangePassword.controls.repeatPassword||null==e.formChangePassword.controls.repeatPassword.errors?null:e.formChangePassword.controls.repeatPassword.errors.required)),r.xp6(1),r.Q6J("ngIf",null==e.formChangePassword.controls.repeatPassword||null==e.formChangePassword.controls.repeatPassword.errors?null:e.formChangePassword.controls.repeatPassword.errors.notSame)}}function u(o,l){1&o&&(r.TgZ(0,"div"),r.TgZ(1,"p",13),r._uU(2,"CPF \xe9 obrigat\xf3rio"),r.qZA(),r.qZA())}function x(o,l){1&o&&(r.TgZ(0,"div"),r.TgZ(1,"p",13),r._uU(2,"CPF \xe9 inv\xe1lido "),r.qZA(),r.qZA())}function I(o,l){if(1&o&&(r.TgZ(0,"div"),r.YNc(1,u,3,0,"div",5),r.YNc(2,x,3,0,"div",5),r.qZA()),2&o){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",1==(null==e.formChangePassword.controls.cpf||null==e.formChangePassword.controls.cpf.errors?null:e.formChangePassword.controls.cpf.errors.required)),r.xp6(1),r.Q6J("ngIf",1==e.formChangePassword.controls.cpf.touched&&1==(null==e.formChangePassword.controls.cpf||null==e.formChangePassword.controls.cpf.errors?null:e.formChangePassword.controls.cpf.errors.invalidCpf))}}const S=[{path:"",component:(()=>{class o{constructor(e,a,A,F,J,M){this.formBuilder=e,this.recoverPasswordService=a,this.router=A,this.activatedRoute=F,this.formHelper=J,this.alertService=M,this.loading=!1}ngOnInit(){this.formChangePassword=this.formBuilder.group({password:["",[d.kI.required,d.kI.minLength(8)]],repeatPassword:["",[d.kI.required]],email:[this.activatedRoute.snapshot.paramMap.get("email")],token:[this.activatedRoute.snapshot.paramMap.get("token")],cpf:["",[d.kI.required]]},{validators:[this.formHelper.testCpf,this.formHelper.testPasswordSame]})}changePassword(){1==this.formChangePassword.valid&&this.recoverPasswordService.changePassword({password:this.formChangePassword.controls.password.value,email:this.formChangePassword.controls.email.value,token:this.formChangePassword.controls.token.value}).pipe((0,m.K)(a=>(this.loading=!1,this.changePasswordErrorMessages=a.error.errors[0].msg,this.alertService.toast({icon:"error",title:"Erro",text:this.changePasswordErrorMessages}),(0,n.of)(a)))).subscribe(a=>{a.id&&(this.alertService.toast({icon:"success",title:"Sucesso",text:"Senha recuperada com sucesso"}),this.router.navigate(["/auth/login"])),this.loading=!1})}}return o.\u0275fac=function(e){return new(e||o)(r.Y36(d.qu),r.Y36(c.d),r.Y36(s.F0),r.Y36(s.gz),r.Y36(h.w),r.Y36(v.c))},o.\u0275cmp=r.Xpm({type:o,selectors:[["app-change-password"]],decls:23,vars:5,consts:[[1,"col-lg-6","mx-auto","p-5","container-fluid","row","animate__animated","animate__fadeIn"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","password","id","floatingPassword","formControlName","password","placeholder","Password",1,"form-control"],["for","floatingPassword"],[4,"ngIf"],["type","password","id","confirm-password","formControlName","repeatPassword","placeholder","confirm-password",1,"form-control"],["password",""],["for","confirm-password"],["type","text","formControlName","cpf","required","true","mask","000.000.000-00","id","cpf","placeholder","CPF",1,"form-control"],["for","cpf"],[1,"d-flex"],["type","submit",1,"btn","btn-grad","btn-lg","text-uppercase","fw-bold","mt-3",3,"disabled"],[1,"error"]],template:function(e,a){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"h4"),r._uU(2,"Crie uma nova senha"),r.qZA(),r.TgZ(3,"form",1),r.NdJ("ngSubmit",function(){return a.changePassword()}),r.TgZ(4,"div",2),r._UZ(5,"input",3),r.TgZ(6,"label",4),r._uU(7,"Senha"),r.qZA(),r.qZA(),r.YNc(8,p,3,2,"div",5),r.TgZ(9,"div",2),r._UZ(10,"input",6,7),r.TgZ(12,"label",8),r._uU(13,"Confirmar senha"),r.qZA(),r.qZA(),r.YNc(14,f,3,2,"div",5),r.TgZ(15,"div",2),r._UZ(16,"input",9),r.TgZ(17,"label",10),r._uU(18,"CPF"),r.qZA(),r.qZA(),r.YNc(19,I,3,2,"div",5),r.TgZ(20,"div",11),r.TgZ(21,"button",12),r._uU(22,"Mudar senha"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Q6J("formGroup",a.formChangePassword),r.xp6(5),r.Q6J("ngIf",(null==a.formChangePassword.controls.password?null:a.formChangePassword.controls.password.errors)&&1==a.formChangePassword.touched),r.xp6(6),r.Q6J("ngIf",(null==a.formChangePassword.controls.repeatPassword?null:a.formChangePassword.controls.repeatPassword.errors)&&1==a.formChangePassword.controls.repeatPassword.touched),r.xp6(5),r.Q6J("ngIf",(null==a.formChangePassword.controls.cpf?null:a.formChangePassword.controls.cpf.errors)&&1==a.formChangePassword.touched),r.xp6(2),r.Q6J("disabled",1==a.loading))},directives:[d._Y,d.JL,d.sg,d.Fj,d.JJ,d.u,Z.O5,g.hx,d.Q7],styles:[".error[_ngcontent-%COMP%]{color:red}"]}),o})()}];let q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[[s.Bz.forChild(S)],s.Bz]}),o})();const N={validation:!1};let b=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[[Z.ez,q,T.kz,g.yI.forRoot(N),d.UX]]}),o})()}}]);