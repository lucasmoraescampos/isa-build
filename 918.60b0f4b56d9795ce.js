"use strict";(self.webpackChunkMeuBilhete_NewSite=self.webpackChunkMeuBilhete_NewSite||[]).push([[918],{4974:(f,d,t)=>{t.d(d,{O:()=>c});var u=t(5e3),s=t(9808);let c=(()=>{class a{constructor(){this.spinnerType="grow"}ngOnInit(){}}return a.\u0275fac=function(m){return new(m||a)},a.\u0275cmp=u.Xpm({type:a,selectors:[["app-spinner"]],inputs:{spinnerType:"spinnerType",spinnerWidth:"spinnerWidth"},decls:3,vars:5,consts:[["role","status",3,"ngClass"],[1,"visually-hidden"]],template:function(m,p){1&m&&(u.TgZ(0,"div",0),u.TgZ(1,"span",1),u._uU(2,"Loading..."),u.qZA(),u.qZA()),2&m&&(u.Udp("width",p.spinnerWidth+"px")("height",p.spinnerWidth+"px"),u.Q6J("ngClass","spinner-"+p.spinnerType))},directives:[s.mk],styles:[""]}),a})()},1268:(f,d,t)=>{t.d(d,{F:()=>c});var u=t(9808),s=t(5e3);let c=(()=>{class a{}return a.\u0275fac=function(m){return new(m||a)},a.\u0275mod=s.oAB({type:a}),a.\u0275inj=s.cJS({imports:[[u.ez]]}),a})()},5918:(f,d,t)=>{t.r(d),t.d(d,{LoginModule:()=>$});var u=t(9808),s=t(3075),c=t(3287),a=t(7579),g=t(9646),m=t(2722),p=t(262),e=t(5e3),v=t(8408),_=t(3290),Z=t(7556),T=t(5970),C=t(4974);function L(o,i){1&o&&e._UZ(0,"input",25)}function b(o,i){1&o&&e._UZ(0,"input",26)}function x(o,i){1&o&&(e.TgZ(0,"label",27),e._uU(1,"Email ou usu\xe1rio"),e.qZA())}function I(o,i){1&o&&(e.TgZ(0,"label",27),e._uU(1,"Email"),e.qZA())}function F(o,i){1&o&&(e.TgZ(0,"p",29),e._uU(1,"Email \xe9 obrigat\xf3rio"),e.qZA())}function A(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,F,2,0,"p",28),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0==n.producerLogin)}}function E(o,i){1&o&&(e.TgZ(0,"div"),e.TgZ(1,"p",29),e._uU(2,"O email tem que ser um email v\xe1lido"),e.qZA(),e.qZA())}function M(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,A,2,1,"div",10),e.YNc(2,E,3,0,"div",10),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",1==(null==n.loginForm.controls.email||null==n.loginForm.controls.email.errors?null:n.loginForm.controls.email.errors.required)),e.xp6(1),e.Q6J("ngIf",1==(null==n.loginForm.controls.email||null==n.loginForm.controls.email.errors?null:n.loginForm.controls.email.errors.email))}}function P(o,i){1&o&&(e.TgZ(0,"p",29),e._uU(1,"Email ou usu\xe1rio \xe9 obrigat\xf3rio"),e.qZA())}function y(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,P,2,0,"p",28),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",1==n.producerLogin)}}function S(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,y,2,1,"div",10),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",1==(null==n.loginForm.controls.username||null==n.loginForm.controls.username.errors?null:n.loginForm.controls.username.errors.required))}}function w(o,i){1&o&&(e.TgZ(0,"div"),e.TgZ(1,"p",29),e._uU(2,"Senha \xe9 obrigat\xf3ria"),e.qZA(),e.qZA())}function U(o,i){1&o&&(e.TgZ(0,"div"),e.TgZ(1,"p",29),e._uU(2,"Senha tem que ter no m\xednimo 8 caracteres"),e.qZA(),e.qZA())}function k(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,w,3,0,"div",10),e.YNc(2,U,3,0,"div",10),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",1==(null==n.loginForm.controls.password||null==n.loginForm.controls.password.errors?null:n.loginForm.controls.password.errors.required)),e.xp6(1),e.Q6J("ngIf",null==n.loginForm.controls.password||null==n.loginForm.controls.password.errors?null:n.loginForm.controls.password.errors.minlength)}}function q(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-spinner",30),e.qZA())}function O(o,i){1&o&&e._uU(0," Entrar ")}const h=function(){return["/auth/register"]},J=function(){return{redirect:"checkout"}};function N(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," N\xe3o possui uma conta? "),e.TgZ(2,"a",35),e._uU(3,"Criar conta"),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Q6J("routerLink",e.DdM(2,h))("queryParams",e.DdM(3,J)))}function Y(o,i){1&o&&(e._uU(0," N\xe3o possui uma conta? "),e.TgZ(1,"a",36),e._uU(2,"Criar conta"),e.qZA()),2&o&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,h)))}function D(o,i){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,N,4,4,"div",18),e.YNc(2,Y,3,2,"ng-template",null,32,e.W1O),e.TgZ(4,"p",33),e._uU(5,"ou"),e.qZA(),e.TgZ(6,"a",34),e._uU(7,"Esqueci minha senha"),e.qZA(),e.qZA()),2&o){const n=e.MAs(3),r=e.oxw();e.xp6(1),e.Q6J("ngIf",1==r.redirectToCheckoutPage)("ngIfElse",n)}}const Q=function(){return["/"]},B=[{path:"",component:(()=>{class o{constructor(n,r,l,K,j,z,X){this.formBuilder=n,this.loginService=r,this.recaptchaV3Service=l,this.authService=K,this.alertService=j,this.activatedRoute=z,this.router=X,this.loading=!1,this.unsubscribe$=new a.x,this.comissaryId=null,this.eventId=null,this.redirectToCheckoutPage=!1,this.submitted=!1,this.producerLogin=!1}ngOnInit(){this.loginFormStart(),this.activatedRoute.snapshot.queryParams.redirect&&"checkout"==this.activatedRoute.snapshot.queryParams.redirect&&(this.redirectToCheckoutPage=!0);let n=this.activatedRoute.snapshot.queryParams.rfr;null!=n&&""!==n&&(this.eventId=this.activatedRoute.snapshot.queryParams.eventId,this.comissaryId=n)}loginFormStart(){this.loginForm=this.formBuilder.group(1==this.producerLogin?{username:["",[s.kI.required]],password:["",[s.kI.required,s.kI.minLength(4)]],rememberPasswordCheck:[!1]}:{email:["",[s.kI.email,s.kI.required]],password:["",[s.kI.required,s.kI.minLength(4)]],rememberPasswordCheck:[!1]})}defineLoginProducer(){1==this.producerLogin?(this.producerLogin=!1,this.loginFormStart()):(this.producerLogin=!0,this.loginFormStart())}login(){1==this.producerLogin?this.loginProducer():this.loginCostumer()}loginProducer(){this.submitted=!0,this.authService.onlyLogout(),1==this.loginForm.valid&&(this.loading=!0,this.recaptchaV3Service.execute("submitSearch").subscribe(n=>{let r={username:this.loginForm.controls.username.value,password:this.loginForm.controls.password.value,rememberMe:this.loginForm.controls.rememberPasswordCheck.value,token:n};this.loginService.loginProducer(r).pipe((0,p.K)(l=>(this.loginErrorMessages=l.error.errors[0].msg,this.alertService.toast({icon:"error",title:"Erro",text:this.loginErrorMessages}),this.loading=!1,(0,g.of)(l))),(0,m.R)(this.unsubscribe$)).subscribe(l=>{null==l.error&&(this.alertService.toast({icon:"success",title:"Sucesso",text:"Usu\xe1rio logado"}),l.rememberMe=r.rememberMe,window.location.href="/producer",this.authService.saveProducer(l),this.loading=!1)})}))}loginCostumer(){this.submitted=!0,1==this.loginForm.valid&&(this.loading=!0,this.recaptchaV3Service.execute("submitSearch").subscribe(n=>{let r={};r=""!=document.cookie.replace(/(?:(?:^|.*;\s*)token\s*\=\s*([^;]*).*$)|^.*$/,"$1")?{email:this.loginForm.controls.email.value,password:this.loginForm.controls.password.value,rememberMe:this.loginForm.controls.rememberPasswordCheck.value,token:n,fcmToken:document.cookie.replace(/(?:(?:^|.*;\s*)token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}:{email:this.loginForm.controls.email.value,password:this.loginForm.controls.password.value,rememberMe:this.loginForm.controls.rememberPasswordCheck.value,token:n},this.loginService.loginCostumer(r).pipe((0,p.K)(l=>(this.loginErrorMessages=l.error.errors[0].msg,this.alertService.toast({icon:"error",title:"Erro",text:this.loginErrorMessages}),this.loading=!1,(0,g.of)(l))),(0,m.R)(this.unsubscribe$)).subscribe(l=>{l.doc&&(this.authService.producerOnlyLogout(),this.alertService.toast({icon:"success",title:"Sucesso",text:"Usu\xe1rio logado"}),0==this.redirectToCheckoutPage?this.router.navigate(["/"]):null!==this.comissaryId?this.router.navigateByUrl("payment-method/"+this.eventId+"?rfr="+this.comissaryId):this.router.navigate(["../payment-method"]),l.rememberMe=r.rememberMe,this.authService.saveCustomer(l),this.loading=!1)})}))}ngOnDestroy(){this.unsubscribe$.next(null),this.unsubscribe$.complete()}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(s.qu),e.Y36(v.r),e.Y36(_.YC),e.Y36(Z.e),e.Y36(T.c),e.Y36(c.gz),e.Y36(c.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:33,vars:14,consts:[[1,"card","border-0","shadow","rounded-3","animate__animated","animate__fadeIn"],[1,"card-body","p-4","p-sm-5"],[1,"text-center","mb-4"],["href","#",3,"routerLink"],["src","../../../assets/images/logo.png","width","180px"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","class","form-control","id","floatingInput","formControlName","email","placeholder","name@example.com",4,"ngIf"],["type","email","class","form-control","id","floatingInput","formControlName","username","placeholder","Usu\xe1rio ou senha",4,"ngIf"],["for","floatingInput",4,"ngIf"],[4,"ngIf"],["type","password","id","floatingPassword","formControlName","password","placeholder","Password",1,"form-control"],["for","floatingPassword"],[1,"form-check","mb-3"],["formControlName","rememberPasswordCheck","type","checkbox","value","","id","rememberPasswordCheck",1,"form-check-input"],["for","rememberPasswordCheck",1,"form-check-label"],[1,"d-grid"],["type","submit",1,"btn","btn-grad","btn-lg","text-uppercase","fw-bold",3,"disabled"],[4,"ngIf","ngIfElse"],["displayLoginText",""],[1,"form-check","form-switch","mt-5","d-flex","justify-center"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input",3,"click"],["for","flexSwitchCheckDefault",1,"form-check-label","ms-1"],[1,"my-4"],["class","text-center",4,"ngIf"],["type","email","id","floatingInput","formControlName","email","placeholder","name@example.com",1,"form-control"],["type","email","id","floatingInput","formControlName","username","placeholder","Usu\xe1rio ou senha",1,"form-control"],["for","floatingInput"],["class","error",4,"ngIf"],[1,"error"],["spinnerType","grow","spinnerWidth","21"],[1,"text-center"],["showRegularButton",""],[1,"m-0"],["routerLink","/auth/recover"],["href","#",1,"ms-1",3,"routerLink","queryParams"],["href","#",1,"ms-1",3,"routerLink"]],template:function(n,r){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"a",3),e._UZ(4,"img",4),e.qZA(),e.qZA(),e.TgZ(5,"form",5),e.NdJ("ngSubmit",function(){return r.login()}),e.TgZ(6,"div",6),e.YNc(7,L,1,0,"input",7),e.YNc(8,b,1,0,"input",8),e.YNc(9,x,2,0,"label",9),e.YNc(10,I,2,0,"label",9),e.qZA(),e.YNc(11,M,3,2,"div",10),e.YNc(12,S,2,1,"div",10),e.TgZ(13,"div",6),e._UZ(14,"input",11),e.TgZ(15,"label",12),e._uU(16,"Senha"),e.qZA(),e.qZA(),e.YNc(17,k,3,2,"div",10),e.TgZ(18,"div",13),e._UZ(19,"input",14),e.TgZ(20,"label",15),e._uU(21," Lembra senha "),e.qZA(),e.qZA(),e.TgZ(22,"div",16),e.TgZ(23,"button",17),e.YNc(24,q,2,0,"div",18),e.YNc(25,O,1,0,"ng-template",null,19,e.W1O),e.qZA(),e.TgZ(27,"div",20),e.TgZ(28,"input",21),e.NdJ("click",function(){return r.defineLoginProducer()}),e.qZA(),e.TgZ(29,"label",22),e._uU(30,"Produtor"),e.qZA(),e.qZA(),e.qZA(),e._UZ(31,"hr",23),e.YNc(32,D,8,2,"div",24),e.qZA(),e.qZA(),e.qZA()),2&n){const l=e.MAs(26);e.xp6(3),e.Q6J("routerLink",e.DdM(13,Q)),e.xp6(2),e.Q6J("formGroup",r.loginForm),e.xp6(2),e.Q6J("ngIf",0==r.producerLogin),e.xp6(1),e.Q6J("ngIf",1==r.producerLogin),e.xp6(1),e.Q6J("ngIf",1==r.producerLogin),e.xp6(1),e.Q6J("ngIf",0==r.producerLogin),e.xp6(1),e.Q6J("ngIf",(null==r.loginForm.controls.email?null:r.loginForm.controls.email.errors)&&1==r.submitted),e.xp6(1),e.Q6J("ngIf",(null==r.loginForm.controls.username?null:r.loginForm.controls.username.errors)&&1==r.submitted),e.xp6(5),e.Q6J("ngIf",(null==r.loginForm.controls.password?null:r.loginForm.controls.password.errors)&&1==r.submitted),e.xp6(6),e.Q6J("disabled",r.loading),e.xp6(1),e.Q6J("ngIf",r.loading)("ngIfElse",l),e.xp6(8),e.Q6J("ngIf",0==r.producerLogin)}},directives:[c.yS,s._Y,s.JL,s.sg,u.O5,s.Fj,s.JJ,s.u,s.Wl,C.O],styles:[".card[_ngcontent-%COMP%]{width:100vw;height:100vh;border-radius:0!important;overflow:auto}.form-control[_ngcontent-%COMP%]{border-radius:30px}a[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 576px){.card[_ngcontent-%COMP%]{width:auto;height:auto;min-width:400px;border-radius:.3rem!important}}.error[_ngcontent-%COMP%]{color:red}"]}),o})()}];let R=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.Bz.forChild(B)],c.Bz]}),o})();var W=t(1268);let $=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,R,s.UX,W.F]]}),o})()},2722:(f,d,t)=>{t.d(d,{R:()=>g});var u=t(4482),s=t(5403),c=t(8421),a=t(5032);function g(m){return(0,u.e)((p,e)=>{(0,c.Xf)(m).subscribe(new s.Q(e,()=>e.complete(),a.Z)),!e.closed&&p.subscribe(e)})}}}]);