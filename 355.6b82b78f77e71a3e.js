"use strict";(self.webpackChunkMeuBilhete_NewSite=self.webpackChunkMeuBilhete_NewSite||[]).push([[355],{3254:(y,f,n)=>{n.d(f,{w:()=>h});var m=n(5e3);let h=(()=>{class s{testCpf(a){var p,g,Z,T,e,A,E,q;let F=0,S=(null===(p=a.get("cpf"))||void 0===p?void 0:p.value)||(null===(g=null==a?void 0:a.get("identificationNumber"))||void 0===g?void 0:g.value);if(void 0===S)return!1;let u=S.replace(".","").replace(".","").replace("-","");("00000000000"===u||"11111111111"===u||"22222222222"===u||"33333333333"===u||"44444444444"===u||"55555555555"===u||"66666666666"===u||"77777777777"===u||"88888888888"===u||"99999999999"===u||11!==u.length)&&(null===(Z=a.get("cpf"))||void 0===Z||Z.setErrors({invalidCpf:!0}),null===(T=a.get("identificationNumber"))||void 0===T||T.setErrors({invalidCpf:!0}));for(let v=1;v<=9;v++)F+=parseInt(u.substring(v-1,v))*(11-v);let C=10*F%11;(10===C||11===C)&&(C=0),C!==parseInt(u.substring(9,10))&&(null===(e=a.get("cpf"))||void 0===e||e.setErrors({invalidCpf:!0}),null===(A=a.get("identificationNumber"))||void 0===A||A.setErrors({invalidCpf:!0})),F=0;for(let v=1;v<=10;v++)F+=parseInt(u.substring(v-1,v))*(12-v);return C=10*F%11,(10===C||11===C)&&(C=0),C!==parseInt(u.substring(10,11))&&(null===(E=a.get("cpf"))||void 0===E||E.setErrors({invalidCpf:!0}),null===(q=a.get("identificationNumber"))||void 0===q||q.setErrors({invalidCpf:!0})),null}testPasswordSame(a){var p;return a.value.password!==a.value.repeatPassword&&(null===(p=a.get("repeatPassword"))||void 0===p||p.setErrors({notSame:!0})),null}testFullName(a){var p;return(-1==a.value.name.indexOf(" ")||0==a.value.name.indexOf(" "))&&(null===(p=a.get("name"))||void 0===p||p.setErrors({notFull:!0})),null}testEmailSame(a){var p;return a.value.email!==a.value.repeatEmail&&(null===(p=a.get("repeatEmail"))||void 0===p||p.setErrors({notSame:!0})),null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},4974:(y,f,n)=>{n.d(f,{O:()=>s});var m=n(5e3),h=n(9808);let s=(()=>{class c{constructor(){this.spinnerType="grow"}ngOnInit(){}}return c.\u0275fac=function(p){return new(p||c)},c.\u0275cmp=m.Xpm({type:c,selectors:[["app-spinner"]],inputs:{spinnerType:"spinnerType",spinnerWidth:"spinnerWidth"},decls:3,vars:5,consts:[["role","status",3,"ngClass"],[1,"visually-hidden"]],template:function(p,g){1&p&&(m.TgZ(0,"div",0),m.TgZ(1,"span",1),m._uU(2,"Loading..."),m.qZA(),m.qZA()),2&p&&(m.Udp("width",g.spinnerWidth+"px")("height",g.spinnerWidth+"px"),m.Q6J("ngClass","spinner-"+g.spinnerType))},directives:[h.mk],styles:[""]}),c})()},1268:(y,f,n)=>{n.d(f,{F:()=>s});var m=n(9808),h=n(5e3);let s=(()=>{class c{}return c.\u0275fac=function(p){return new(p||c)},c.\u0275mod=h.oAB({type:c}),c.\u0275inj=h.cJS({imports:[[m.ez]]}),c})()},4544:(y,f,n)=>{n.r(f),n.d(f,{RegisterModule:()=>ae});var m=n(9808),h=n(5003),s=n(3075),c=n(1268),a=n(3287),p=n(7579),g=n(9646),Z=n(2722),T=n(262),e=n(5e3),A=n(9339),E=n(3254),q=n(2340),F=n(520);let S=(()=>{class r{constructor(t){this.httpClient=t,this.apiUrl=q.N.apiUrl}registerCostumer(t){return this.httpClient.post(`${this.apiUrl}/customer/create`,t)}generateValidationCode(t){return this.httpClient.post(`${this.apiUrl}/customer/create/generatecode`,t)}checkValidationCode(t){return this.httpClient.post(`${this.apiUrl}/customer/create/validatecode`,t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(F.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),u=(()=>{class r{constructor(t){this.registerRepository=t}registerCostumer(t){return this.registerRepository.registerCostumer(t)}generateValidationCode(t){return this.registerRepository.generateValidationCode(t)}checkValidationCode(t){return this.registerRepository.checkValidationCode(t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(S))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var C=n(5970),v=n(8827),x=n(7556),V=n(3290),k=n(8408),R=n(4974);const U=["number"],I=["step1"],N=["step3"],M=["step4"],P=["step5"],w=["codeValidation"];function J(r,d){1&r&&(e.TgZ(0,"div",9),e.TgZ(1,"div",10),e._UZ(2,"input",72),e.TgZ(3,"label",73),e._uU(4,"CPF"),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.xp6(2),e.Q6J("dropSpecialCharacters",!1))}function D(r,d){1&r&&(e.TgZ(0,"div",9),e.TgZ(1,"div",10),e._UZ(2,"input",74),e.TgZ(3,"label",75),e._uU(4,"Passaporte"),e.qZA(),e.qZA(),e.qZA())}function O(r,d){1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-spinner",76),e.qZA())}function Q(r,d){1&r&&e._uU(0," Continuar ")}function Y(r,d){1&r&&e._UZ(0,"app-spinner",77)}function B(r,d){1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-spinner",77),e.qZA())}function L(r,d){1&r&&e._uU(0," Cadastrar ")}function W(r,d){1&r&&(e.TgZ(0,"h4",91),e._uU(1,"Validar Telefone"),e.qZA())}function H(r,d){1&r&&(e.TgZ(0,"h4",91),e._uU(1,"Validar WhatsApp"),e.qZA())}function G(r,d){1&r&&(e.TgZ(0,"h4",91),e._uU(1,"Validar Email"),e.qZA())}function K(r,d){1&r&&(e.TgZ(0,"h6",92),e._uU(1,"Digite o c\xf3digo sms que voc\xea recebeu no seu telefone. "),e.qZA())}function $(r,d){1&r&&(e.TgZ(0,"h6",92),e._uU(1,"Digite o c\xf3digo de confirma\xe7\xe3o que voc\xea recebeu no seu whatsapp."),e.qZA())}function j(r,d){1&r&&(e.TgZ(0,"h6",92),e._uU(1,"Enviamos o c\xf3digo de confirma\xe7\xe3o para o email informado. Por favor, verifique tamb\xe9m na caixa de entrada, lixo eletr\xf4nico ou spam! \u{1f609}"),e.qZA())}function z(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",93),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sendValidationCode(!0)}),e._uU(1," Reenviar C\xf3digo "),e.qZA()}}function X(r,d){1&r&&e._UZ(0,"app-spinner",76)}function ee(r,d){1&r&&(e.TgZ(0,"span"),e._uU(1,"Verificar"),e.qZA())}function te(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",78),e.YNc(1,W,2,0,"h4",79),e.YNc(2,H,2,0,"h4",79),e.YNc(3,G,2,0,"h4",79),e.qZA(),e.TgZ(4,"div",80),e.TgZ(5,"form"),e.TgZ(6,"div",81),e.TgZ(7,"div",46),e.YNc(8,K,2,0,"h6",82),e.YNc(9,$,2,0,"h6",82),e.YNc(10,j,2,0,"h6",82),e.qZA(),e.TgZ(11,"div",46),e.TgZ(12,"div",83),e.TgZ(13,"input",84),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().validationCode=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",85),e.YNc(15,z,2,0,"a",86),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",87),e.TgZ(17,"button",88),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkValidationCode()}),e.YNc(18,X,1,0,"app-spinner",89),e.YNc(19,ee,2,0,"span",90),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.needSMSValidation&&!t.smsValidated),e.xp6(1),e.Q6J("ngIf",t.needPhoneValidation&&!t.phoneValidated&&t.smsValidated),e.xp6(1),e.Q6J("ngIf",t.needEmailValidation&&!t.emailValidated&&t.smsValidated&&t.phoneValidated),e.xp6(5),e.Q6J("ngIf",t.needSMSValidation&&!t.smsValidated),e.xp6(1),e.Q6J("ngIf",t.needPhoneValidation&&!t.phoneValidated&&t.smsValidated),e.xp6(1),e.Q6J("ngIf",t.needEmailValidation&&!t.emailValidated&&t.smsValidated&&t.phoneValidated),e.xp6(3),e.Q6J("ngModel",t.validationCode),e.xp6(2),e.Q6J("ngIf",0==t.timer),e.xp6(2),e.Q6J("disabled",t.validationCode.length<6||1==t.loading),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading)}}const ie=function(){return["/"]},re=function(){return["/auth/login"]},oe=[{path:"",component:(()=>{class r{constructor(t,i,o,l,_,b,le,de,pe,me,ce){this.searchCep=t,this.formBuilder=i,this.formHelper=o,this.registerService=l,this.alertService=_,this.router=b,this.route=le,this.modalService=de,this.authService=pe,this.recaptchaV3Service=me,this.loginService=ce,this.step1FormInvalid=!0,this.step3FormInvalid=!0,this.step4FormInvalid=!0,this.step5FormInvalid=!0,this.step1Submitted=!1,this.step3Submitted=!1,this.step4Submitted=!1,this.step5Submitted=!1,this.doc="cpf",this.steps=[1,2,3,4,5],this.invalidCEPMessage="",this.loading=!1,this.needEmailValidation=!1,this.needPhoneValidation=!1,this.needSMSValidation=!1,this.emailValidated=!1,this.phoneValidated=!1,this.smsValidated=!1,this.validationCode="",this.validationCodeError=!1,this.generateCodeErrors="",this.blockCep=!1,this.unsubscribe$=new p.x,this.timer=90,this.redirectToLogoinToCheckout=!1}ngOnInit(){this.step1Form=this.formBuilder.group({name:["",s.kI.required],cpf:["",s.kI.required],email:["",[s.kI.required,s.kI.email]],repeatEmail:["",[s.kI.required,s.kI.email]],phone:["",[s.kI.required,s.kI.pattern("^\\([1-9]{2}\\) (?:[2-8]|9[1-9])[0-9]{3}\\-[0-9]{4}$")]]},{validators:[this.formHelper.testFullName,this.formHelper.testEmailSame]}),"cpf"==this.doc&&this.step1Form.setValidators(this.formHelper.testCpf),this.step3Form=this.formBuilder.group({password:["",[s.kI.required,s.kI.minLength(8)]],repeatPassword:["",s.kI.required],genre:[null],birth:["",s.kI.required]},{validators:[this.formHelper.testPasswordSame]}),this.step4Form=this.formBuilder.group({cep:["",s.kI.required]}),this.step5Form=this.formBuilder.group({address:["",s.kI.required],number:["",s.kI.required],district:["",s.kI.required],city:["",s.kI.required],state:["",s.kI.required],complement:[""],country:["BRA",s.kI.required]}),this.step1.nativeElement.style.display="block",this.step3.nativeElement.style.display="none",this.step4.nativeElement.style.display="none",this.step5.nativeElement.style.display="none",this.route.snapshot.queryParams.redirect&&"checkout"==this.route.snapshot.queryParams.redirect&&(this.redirectToLogoinToCheckout=!0)}changeDocument(t){this.doc=t,"cpf"==this.doc?(this.step1Form.controls.cpf.setValue(""),this.step1Form.setValidators([this.formHelper.testCpf,this.formHelper.testFullName,this.formHelper.testEmailSame])):(this.step1Form.controls.cpf.setValue(""),this.step1Form.setValidators([this.formHelper.testFullName,this.formHelper.testEmailSame]))}openModal(t){this.modalRef=this.modalService.show(t,{class:"modal-dialog-centered",ignoreBackdropClick:!0});const i=setInterval(()=>{this.timer--,0==this.timer&&clearInterval(i)},1e3)}goStep(t){1==t?(this.step1.nativeElement.style.display="block",this.step3.nativeElement.style.display="none",this.step4.nativeElement.style.display="none",this.step5.nativeElement.style.display="none"):3==t?(this.step1.nativeElement.style.display="none",this.step3.nativeElement.style.display="block",this.step4.nativeElement.style.display="none",this.step5.nativeElement.style.display="none"):4==t?(this.step1.nativeElement.style.display="none",this.step3.nativeElement.style.display="none",this.step4.nativeElement.style.display="block",this.step5.nativeElement.style.display="none"):5==t&&(this.step1.nativeElement.style.display="none",this.step3.nativeElement.style.display="none",this.step4.nativeElement.style.display="none",this.step5.nativeElement.style.display="block")}validateStep1Form(){1==this.step1Form.invalid&&(this.step1Form.controls.phone.errors&&(this.step1Form.controls.phone.errors.required&&this.alertService.toast({icon:"error",title:"Telefone",text:"Telefone \xe9 obrigat\xf3rio"}),this.step1Form.controls.phone.errors.pattern&&this.alertService.toast({icon:"error",title:"Telefone",text:"Telefone tem que ser v\xe1lido"})),this.step1Form.controls.repeatEmail.errors&&(this.step1Form.controls.repeatEmail.errors.required&&this.alertService.toast({icon:"error",title:"Email",text:"Confirmar email \xe9 obrigat\xf3rio"}),this.step1Form.controls.repeatEmail.errors.email&&this.alertService.toast({icon:"error",title:"Email",text:"Email tem que ser v\xe1lido"}),1==this.step1Form.controls.repeatEmail.errors.notSame&&this.alertService.toast({icon:"error",title:"Email",text:"Email n\xe3o confere"})),this.step1Form.controls.email.errors&&(this.step1Form.controls.email.errors.required&&this.alertService.toast({icon:"error",title:"Email",text:"Email \xe9 obrigat\xf3rio"}),1==this.step1Form.controls.email.errors.email&&this.alertService.toast({icon:"error",title:"Email",text:"Email tem que ser v\xe1lido"})),this.step1Form.controls.cpf.errors&&this.step1Form.controls.cpf.errors.invalidCpf&&this.alertService.toast({icon:"error",title:"CPF",text:"Cpf \xe9 inv\xe1lido"}),this.step1Form.controls.name.errors&&this.alertService.toast({icon:"error",title:"Nome",text:"Nome completo \xe9 obrigat\xf3rio"}))}validateStep3Form(){1==this.step3Form.invalid&&(this.step3Form.controls.birth.errors&&(this.step3Form.controls.birth.errors.required&&this.alertService.toast({icon:"error",title:"Data de nascimento",text:"Data de nascimento \xe9 obrigat\xf3rio"}),this.step3Form.controls.birth.errors.pattern&&this.alertService.toast({icon:"error",title:"Data de nascimento",text:"Data de nascimento tem que ser v\xe1lida"})),this.step3Form.controls.genre.errors&&this.step3Form.controls.genre.errors.required&&this.alertService.toast({icon:"error",title:"Erro",text:"G\xeanero \xe9 obrigat\xf3rio"}),this.step3Form.controls.repeatPassword.errors&&(1==this.step3Form.controls.repeatPassword.errors.required&&this.alertService.toast({icon:"error",title:"Repetir senha",text:"Confimar a senha \xe9 obrigat\xf3rio"}),1==this.step3Form.controls.repeatPassword.errors.notSame&&this.alertService.toast({icon:"error",title:"Repetir senha",text:"Senhas tem que ser iguais"})),this.step3Form.controls.password.errors&&(this.step3Form.controls.password.errors.required&&this.alertService.toast({icon:"error",title:"Senha",text:"Senha \xe9 obrigat\xf3rio"}),this.step3Form.controls.password.errors.minlength&&this.alertService.toast({icon:"error",title:"Senha",text:"Senha tem que ter no m\xednimo 8 caracteres"})))}validateStep4Form(){1==this.step4Form.invalid&&this.step4Form.controls.cep.errors&&this.step4Form.controls.cep.errors.required&&this.alertService.toast({icon:"error",title:"CEP",text:"Cep \xe9 obrigat\xf3rio"})}validateStep5Form(){1==this.step5Form.invalid&&(this.step5Form.controls.address.errors&&this.step5Form.controls.address.errors.required&&this.alertService.toast({icon:"error",title:"Endere\xe7o",text:"Rua \xe9 obrigat\xf3rio"}),this.step5Form.controls.number.errors&&this.step5Form.controls.number.errors.required&&this.alertService.toast({icon:"error",title:"N\xfamero",text:"N\xfamero \xe9 obrigat\xf3rio"}),this.step5Form.controls.city.errors&&this.step5Form.controls.city.errors.required&&this.alertService.toast({icon:"error",title:"Cidade",text:"Cidade \xe9 obrigat\xf3rio"}),this.step5Form.controls.state.errors&&this.step5Form.controls.state.errors.required&&this.alertService.toast({icon:"error",title:"Estado",text:"Estado \xe9 obrigat\xf3rio"}),this.step5Form.controls.country.errors&&this.step5Form.controls.country.errors.required&&this.alertService.toast({icon:"error",title:"Pa\xeds",text:"Pa\xeds \xe9 obrigat\xf3rio"}))}sendValidationCode(t){if(0==this.step1Form.invalid){this.loading=!0;let i={doc:this.step1Form.controls.cpf.value,name:this.step1Form.controls.name.value,email:this.step1Form.controls.email.value,phone:this.step1Form.controls.phone.value};t&&(this.needSMSValidation&&!this.smsValidated?i.smsOnly=!0:this.needPhoneValidation&&!this.phoneValidated?i.whatsOnly=!0:this.needEmailValidation&&!this.emailValidated&&(i.emailOnly=!0)),this.registerService.generateValidationCode(i).pipe((0,T.K)(o=>(this.loading=!1,this.generateCodeErrors=o.error.errors[0].msg,this.alertService.toast({icon:"error",title:"Erro",text:this.generateCodeErrors}),(0,g.of)(o)))).subscribe(o=>{setTimeout(()=>{this.loading=!1},311),!t&&(o.needPhoneValidation||o.needEmailValidation||o.needSMSValidation)&&(this.needEmailValidation=o.needEmailValidation,this.needPhoneValidation=o.needPhoneValidation,this.needSMSValidation=o.needSMSValidation,this.emailValidated=!o.needEmailValidation,this.phoneValidated=!o.needPhoneValidation,this.smsValidated=!o.needSMSValidation,this.openModal(this.codeValidation))})}}checkValidationCode(){this.loading=!0;let t="",i="";this.needSMSValidation&&!this.smsValidated?(t="sms",i=this.step1Form.value.phone):this.needPhoneValidation&&!this.phoneValidated?(t="whatsapp",i=this.step1Form.value.phone):this.needEmailValidation&&!this.emailValidated&&(t="email",i=this.step1Form.value.email),this.registerService.checkValidationCode({code:this.validationCode,type:t,value:i}).pipe((0,Z.R)(this.unsubscribe$),(0,T.K)(l=>(this.loading=!1,this.validationCodeError=!0,this.alertService.toast({icon:"error",title:"Erro",text:"C\xf3digo inv\xe1lido. Insira o c\xf3digo enviado para "+this.step1Form.controls.email.value}),(0,g.of)(l)))).subscribe(l=>{var _;"C\xf3digo validado!"==l&&(this.loading=!1,this.validationCode="","sms"==t?this.smsValidated=!0:"whatsapp"==t?this.phoneValidated=!0:"email"==t&&(this.emailValidated=!0),this.smsValidated&&this.phoneValidated&&this.emailValidated&&(null===(_=this.modalRef)||void 0===_||_.hide(),this.goStep(3)))})}getCep(){this.blockCep=!0;let t=this.step4Form.controls.cep.value;t.length>=8&&this.searchCep.getCep(t).pipe((0,T.K)(i=>(0,g.of)(i))).subscribe(i=>{var o,l,_,b;null===(o=this.step5Form.get("address"))||void 0===o||o.setValue(i.address),null===(l=this.step5Form.get("district"))||void 0===l||l.setValue(i.district),null===(_=this.step5Form.get("city"))||void 0===_||_.setValue(i.city),null===(b=this.step5Form.get("state"))||void 0===b||b.setValue(i.state),console.log(i),404!==i.status&&400!==i.status&&null!==i.city&&t.length>=8&&null!=i&&"Timeout has occurred"!==i.message&&(this.goStep(5),this.blockCep=!1,setTimeout(()=>{this.number.nativeElement.focus()},301)),(404==i.status||400==i.status||null==i.status||500==i.status||null==i||null==i)&&(this.blockCep=!0,this.getCep2(t)),null!=i.error&&(this.blockCep=!0,this.getCep2(t))})}getCep2(t){this.blockCep=!0,this.searchCep.getCep2(t).subscribe(i=>{var o,l,_,b;null===(o=this.step5Form.get("address"))||void 0===o||o.setValue(i.logradouro),null===(l=this.step5Form.get("district"))||void 0===l||l.setValue(i.bairro),null===(_=this.step5Form.get("city"))||void 0===_||_.setValue(i.localidade),null===(b=this.step5Form.get("state"))||void 0===b||b.setValue(i.uf),null==i.erro&&!0!==i.erro&&null!==i.localidade&&t.length>=8?(this.blockCep=!1,this.goStep(5),setTimeout(()=>{this.number.nativeElement.focus()},301)):(this.blockCep=!0,this.alertService.toast({icon:"error",title:"Erro",text:"Cep inv\xe1lido ou n\xe3o existe"}))})}registerCostumer(){this.loading=!0,0==this.step1Form.invalid&&0==this.step3Form.invalid&&0==this.step4Form.invalid&&0==this.step5Form.invalid&&(this.registerForm=""!=document.cookie.replace(/(?:(?:^|.*;\s*)token\s*\=\s*([^;]*).*$)|^.*$/,"$1")?{name:this.step1Form.controls.name.value,doc:this.step1Form.controls.cpf.value,email:this.step1Form.controls.email.value,phone:this.step1Form.controls.phone.value,password:this.step3Form.controls.password.value,genre:this.step3Form.controls.genre.value,birthDate:this.step3Form.controls.birth.value,addressPostalCode:this.step4Form.controls.cep.value,addressStreet:this.step5Form.controls.address.value,addressNumber:this.step5Form.controls.number.value,addressDistrict:this.step5Form.controls.district.value,addressCity:this.step5Form.controls.city.value,addressState:this.step5Form.controls.state.value,addressComplement:this.step5Form.controls.complement.value,addressCountry:this.step5Form.controls.country.value,fcmToken:document.cookie.replace(/(?:(?:^|.*;\s*)token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}:{name:this.step1Form.controls.name.value,doc:this.step1Form.controls.cpf.value,email:this.step1Form.controls.email.value,phone:this.step1Form.controls.phone.value,password:this.step3Form.controls.password.value,genre:this.step3Form.controls.genre.value,birthDate:this.step3Form.controls.birth.value,addressPostalCode:this.step4Form.controls.cep.value,addressStreet:this.step5Form.controls.address.value,addressNumber:this.step5Form.controls.number.value,addressDistrict:this.step5Form.controls.district.value,addressCity:this.step5Form.controls.city.value,addressState:this.step5Form.controls.state.value,addressComplement:this.step5Form.controls.complement.value,addressCountry:this.step5Form.controls.country.value},this.registerService.registerCostumer(this.registerForm).pipe((0,Z.R)(this.unsubscribe$),(0,T.K)(t=>(this.registerCustomerErrorMessages=t.error.errors[0].msg,this.alertService.toast({icon:"error",title:"Erro",text:this.registerCustomerErrorMessages}),this.loading=!1,(0,g.of)(t)))).subscribe(t=>{t.id&&(this.alertService.toast({icon:"success",title:"Sucesso",text:"Cadastro feito com sucesso"}),1==this.redirectToLogoinToCheckout?(this.recaptchaV3Service.execute("submitSearch").subscribe(i=>{let o={email:this.step1Form.controls.email.value,password:this.step3Form.controls.password.value,rememberMe:!1,token:i,fcmToken:document.cookie.replace(/(?:(?:^|.*;\s*)token\s*\=\s*([^;]*).*$)|^.*$/,"$1")};this.loginService.loginCostumer(o).pipe((0,T.K)(l=>(this.loading=!1,(0,g.of)(l))),(0,Z.R)(this.unsubscribe$)).subscribe(l=>{l.doc&&(this.alertService.toast({icon:"success",title:"Sucesso",text:"Usu\xe1rio logado"}),this.router.navigate(["../payment-method"]),this.authService.saveCustomer(l),this.loading=!1)})}),this.router.navigate(["payment-method/"])):this.router.navigate(["/auth/login"]),this.loading=!1)}))}removeSpace(t,i){var o,l;"email"==i?null===(o=this.step1Form.get("email"))||void 0===o||o.setValue(t.srcElement.value.split(" ").join("")):null===(l=this.step1Form.get("repeatEmail"))||void 0===l||l.setValue(t.srcElement.value.split(" ").join(""))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(A._),e.Y36(s.qu),e.Y36(E.w),e.Y36(u),e.Y36(C.c),e.Y36(a.F0),e.Y36(a.gz),e.Y36(v.tT),e.Y36(x.e),e.Y36(V.YC),e.Y36(k.r))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],viewQuery:function(t,i){if(1&t&&(e.Gf(U,5),e.Gf(I,7),e.Gf(N,7),e.Gf(M,7),e.Gf(P,7),e.Gf(w,7)),2&t){let o;e.iGM(o=e.CRH())&&(i.number=o.first),e.iGM(o=e.CRH())&&(i.step1=o.first),e.iGM(o=e.CRH())&&(i.step3=o.first),e.iGM(o=e.CRH())&&(i.step4=o.first),e.iGM(o=e.CRH())&&(i.step5=o.first),e.iGM(o=e.CRH())&&(i.codeValidation=o.first)}},decls:152,vars:23,consts:[[1,"card","border-0","shadow","rounded-3","animate__animated","animate__fadeIn"],[1,"card-body","p-4","p-sm-5"],[1,"text-center","mb-4"],["href","#",3,"routerLink"],["src","../../../assets/images/logo.png","width","180px"],[1,"formStep"],["step1",""],[1,"animate__animated","animate__fadeIn",3,"formGroup"],[1,"row","p-1"],[1,"col-sm-6"],[1,"form-floating","mb-3"],["type","text","formControlName","name","id","name","placeholder","name",1,"form-control"],["for","name"],[1,"col-12","ms-2"],["for","nacionalidade"],[1,"mb-3"],["type","radio","checked","","required","true","name","doc",1,"me-2",3,"value","click"],["type","radio","required","true","name","doc",1,"ms-3","me-2",3,"value","click"],["class","col-sm-6",4,"ngIf"],["type","text","formControlName","email","id","email","placeholder","email",1,"form-control",3,"keyup"],["for","email"],["type","text","formControlName","repeatEmail","id","repeatEmail","placeholder","repeat-email",1,"form-control",3,"keyup"],["for","repeatEmail"],["type","text","formControlName","phone","mask","(00) 00000-0000","id","phone","placeholder","phone",1,"form-control",3,"dropSpecialCharacters"],["for","phone"],[1,"col-sm-12","d-flex","justify-content-end"],[3,"click"],["type","button",1,"btn","btn-grad","btn-lg","text-uppercase","fw-bold",3,"disabled","click"],[4,"ngIf","ngIfElse"],["showContinueText",""],["step3",""],[1,"mb-5","animate__animated","animate__fadeIn",3,"formGroup"],["type","password","formControlName","password","id","password","formControlName","password","placeholder","password",1,"form-control"],["for","password"],["type","password","id","repeatPassword","formControlName","repeatPassword","placeholder","repeat-password",1,"form-control"],["password",""],["for","repeatPassword"],["id","genre","formControlName","genre",1,"form-control"],["hidden",""],["selected","",3,"ngValue"],["for","genre"],["type","text","mask","d0/M0/0000","id","birth","formControlName","birth","placeholder","birth",1,"form-control"],["for","birth"],[1,"col-sm-12","d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","btn-lg","text-uppercase","fw-bold",3,"click"],["step4",""],[1,"col-sm-12"],["type","text","mask","00000-000","minlength","8","id","cep","formControlName","cep","placeholder","cep",1,"form-control",3,"keyup"],["for","cep"],["spinnerType","grow","spinnerWidth","21",4,"ngIf"],["step5",""],[1,"col-sm-8"],["type","text","id","address","formControlName","address","placeholder","address",1,"form-control"],["for","address"],[1,"col-sm-4"],["type","text","id","number","formControlName","number","placeholder","number",1,"form-control"],["number",""],["for","number"],["type","text","id","complement","formControlName","complement","placeholder","complement",1,"form-control"],["for","complement"],["type","text","id","district","formControlName","district","placeholder","district",1,"form-control"],["for","district"],["type","text","readonly","true","id","state","formControlName","state","placeholder","state",1,"form-control"],["for","state"],[1,"form-floating","mb-5"],["type","text","readonly","true","formControlName","city","id","city","placeholder","city",1,"form-control"],["for","city"],["displayRegisterText",""],[1,"my-4"],[1,"text-center"],["href","#",1,"ms-1",3,"routerLink"],["codeValidation",""],["type","text","formControlName","cpf","required","true","mask","000.000.000-00","id","cpf","placeholder","CPF",1,"form-control",3,"dropSpecialCharacters"],["for","cpf"],["type","text","formControlName","cpf","required","true","id","passport","placeholder","Passaporte",1,"form-control"],["for","passport"],["spinnerType","grow","spinnerWidth","17"],["spinnerType","grow","spinnerWidth","21"],[1,"modal-header","justify-content-center","border-0"],["class","modal-title text-uppercase fw-bold text-grad animate__animated animate__fadeIn",4,"ngIf"],[1,"modal-body"],[1,"row"],["class","text-center animate__animated animate__fadeIn",4,"ngIf"],[1,"form-group","mx-4"],["minlength","6","maxlength","8","mask","000000","placeholder","- - - - - -","name","validationCode",1,"form-control","text-center","rounded-1",3,"ngModel","ngModelChange"],[1,"col-sm-12","mt-3","text-center"],["href","javascript:void(0);","class","text-grad h5 text-uppercase",3,"click",4,"ngIf"],[1,"modal-footer","justify-content-center","border-0"],[1,"btn","btn-grad","btn-lg","fw-bold","text-uppercase",3,"disabled","click"],["spinnerType","grow","spinnerWidth","17",4,"ngIf"],[4,"ngIf"],[1,"modal-title","text-uppercase","fw-bold","text-grad","animate__animated","animate__fadeIn"],[1,"text-center","animate__animated","animate__fadeIn"],["href","javascript:void(0);",1,"text-grad","h5","text-uppercase",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"a",3),e._UZ(4,"img",4),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"div",null,6),e.TgZ(8,"form",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e._UZ(12,"input",11),e.TgZ(13,"label",12),e._uU(14,"Nome completo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"label",14),e._uU(17,"Nacionalidade"),e.qZA(),e.TgZ(18,"div",15),e.TgZ(19,"input",16),e.NdJ("click",function(){return i.changeDocument("cpf")}),e.qZA(),e._uU(20,"Brasileiro "),e.TgZ(21,"input",17),e.NdJ("click",function(){return i.changeDocument("passport")}),e.qZA(),e._uU(22,"Estrangeiro "),e.qZA(),e.qZA(),e.YNc(23,J,5,1,"div",18),e.YNc(24,D,5,0,"div",18),e.TgZ(25,"div",9),e.TgZ(26,"div",10),e.TgZ(27,"input",19),e.NdJ("keyup",function(l){return i.removeSpace(l,"email")}),e.qZA(),e.TgZ(28,"label",20),e._uU(29,"E-mail"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",9),e.TgZ(31,"div",10),e.TgZ(32,"input",21),e.NdJ("keyup",function(l){return i.removeSpace(l,"repeatEmail")}),e.qZA(),e.TgZ(33,"label",22),e._uU(34,"Confirmar E-mail"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",9),e.TgZ(36,"div",10),e._UZ(37,"input",23),e.TgZ(38,"label",24),e._uU(39,"Telefone"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",8),e.TgZ(41,"div",25),e.TgZ(42,"div",26),e.NdJ("click",function(){return i.validateStep1Form()}),e.TgZ(43,"button",27),e.NdJ("click",function(){return i.sendValidationCode()}),e.YNc(44,O,2,0,"div",28),e.YNc(45,Q,1,0,"ng-template",null,29,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",null,30),e.TgZ(49,"form",31),e.TgZ(50,"div",8),e.TgZ(51,"div",9),e.TgZ(52,"div",10),e._UZ(53,"input",32),e.TgZ(54,"label",33),e._uU(55,"Senha"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",9),e.TgZ(57,"div",10),e._UZ(58,"input",34,35),e.TgZ(60,"label",36),e._uU(61,"Confirmar senha"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",9),e.TgZ(63,"div",10),e.TgZ(64,"select",37),e.TgZ(65,"option",38),e._uU(66,"Selecione"),e.qZA(),e.TgZ(67,"option"),e._uU(68,"Masculino"),e.qZA(),e.TgZ(69,"option"),e._uU(70,"Feminino"),e.qZA(),e.TgZ(71,"option",39),e._uU(72,"N\xe3o informar"),e.qZA(),e.qZA(),e.TgZ(73,"label",40),e._uU(74,"Sexo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(75,"div",9),e.TgZ(76,"div",10),e._UZ(77,"input",41),e.TgZ(78,"label",42),e._uU(79,"Data de nascimento"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"div",43),e.TgZ(81,"button",44),e.NdJ("click",function(){return i.goStep(2)}),e._uU(82,"Voltar"),e.qZA(),e.TgZ(83,"div",26),e.NdJ("click",function(){return i.validateStep3Form()}),e.TgZ(84,"button",27),e.NdJ("click",function(){return i.goStep(4)}),e._uU(85,"Continuar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",null,45),e.TgZ(88,"form",31),e.TgZ(89,"div",8),e.TgZ(90,"div",46),e.TgZ(91,"div",10),e.TgZ(92,"input",47),e.NdJ("keyup",function(){return i.getCep()}),e.qZA(),e.TgZ(93,"label",48),e._uU(94,"CEP"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(95,"div",43),e.TgZ(96,"button",44),e.NdJ("click",function(){return i.goStep(3)}),e._uU(97,"Voltar"),e.qZA(),e.TgZ(98,"div",26),e.NdJ("click",function(){return i.validateStep4Form()}),e.TgZ(99,"button",27),e.NdJ("click",function(){return i.goStep(5)}),e._uU(100,"Continuar "),e.YNc(101,Y,1,0,"app-spinner",49),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(102,"div",null,50),e.TgZ(104,"form",31),e.TgZ(105,"div",8),e.TgZ(106,"div",51),e.TgZ(107,"div",10),e._UZ(108,"input",52),e.TgZ(109,"label",53),e._uU(110,"Endere\xe7o"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(111,"div",54),e.TgZ(112,"div",10),e._UZ(113,"input",55,56),e.TgZ(115,"label",57),e._uU(116,"N\xfamero"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(117,"div",9),e.TgZ(118,"div",10),e._UZ(119,"input",58),e.TgZ(120,"label",59),e._uU(121,"Complemento"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(122,"div",9),e.TgZ(123,"div",10),e._UZ(124,"input",60),e.TgZ(125,"label",61),e._uU(126,"Bairro"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(127,"div",9),e.TgZ(128,"div",10),e._UZ(129,"input",62),e.TgZ(130,"label",63),e._uU(131,"Estado"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(132,"div",9),e.TgZ(133,"div",64),e._UZ(134,"input",65),e.TgZ(135,"label",66),e._uU(136,"Cidade"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(137,"div",43),e.TgZ(138,"button",44),e.NdJ("click",function(){return i.goStep(4)}),e._uU(139,"Voltar"),e.qZA(),e.TgZ(140,"div",26),e.NdJ("click",function(){return i.validateStep5Form()}),e.TgZ(141,"button",27),e.NdJ("click",function(){return i.registerCostumer()}),e.YNc(142,B,2,0,"div",28),e.YNc(143,L,1,0,"ng-template",null,67,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(145,"hr",68),e.TgZ(146,"div",69),e._uU(147," J\xe1 possui uma conta? "),e.TgZ(148,"a",70),e._uU(149,"Acessar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(150,te,20,11,"ng-template",null,71,e.W1O)),2&t){const o=e.MAs(46),l=e.MAs(144);e.xp6(3),e.Q6J("routerLink",e.DdM(21,ie)),e.xp6(5),e.Q6J("formGroup",i.step1Form),e.xp6(11),e.Q6J("value",i.doc),e.xp6(2),e.Q6J("value",i.doc),e.xp6(2),e.Q6J("ngIf","cpf"==i.doc),e.xp6(1),e.Q6J("ngIf","passport"==i.doc),e.xp6(13),e.Q6J("dropSpecialCharacters",!1),e.xp6(6),e.Q6J("disabled",i.step1Form.invalid||1==i.loading),e.xp6(1),e.Q6J("ngIf",i.loading)("ngIfElse",o),e.xp6(5),e.Q6J("formGroup",i.step3Form),e.xp6(22),e.Q6J("ngValue",null),e.xp6(13),e.Q6J("disabled",i.step3Form.invalid),e.xp6(4),e.Q6J("formGroup",i.step4Form),e.xp6(11),e.Q6J("disabled",i.step4Form.invalid||1==i.blockCep),e.xp6(2),e.Q6J("ngIf",1==i.blockCep),e.xp6(3),e.Q6J("formGroup",i.step5Form),e.xp6(37),e.Q6J("disabled",1==i.step5Form.invalid||1==i.loading),e.xp6(1),e.Q6J("ngIf",i.loading)("ngIfElse",l),e.xp6(6),e.Q6J("routerLink",e.DdM(22,re))}},directives:[a.yS,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,m.O5,h.hx,s.Q7,R.O,s.EJ,s.YN,s.Kr,s.wO,s.F,s.nD,s.On],styles:[".card[_ngcontent-%COMP%]{width:100vw;height:100vh;border-radius:0!important;overflow:auto}.form-control[_ngcontent-%COMP%]{border-radius:30px}a[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 576px){.card[_ngcontent-%COMP%]{width:auto;height:auto;width:400px;border-radius:.3rem!important}}@media (min-width: 768px){.card[_ngcontent-%COMP%]{width:auto;height:auto;width:600px;border-radius:.3rem!important}}.error[_ngcontent-%COMP%]{color:red}"]}),r})()}];let se=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[a.Bz.forChild(oe)],a.Bz]}),r})();const ne={validation:!1};let ae=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[m.ez,se,h.yI.forRoot(ne),s.u5,s.UX,c.F,v.zk.forRoot()]]}),r})()},2722:(y,f,n)=>{n.d(f,{R:()=>a});var m=n(4482),h=n(5403),s=n(8421),c=n(5032);function a(p){return(0,m.e)((g,Z)=>{(0,s.Xf)(p).subscribe(new h.Q(Z,()=>Z.complete(),c.Z)),!Z.closed&&g.subscribe(Z)})}},4986:(y,f,n)=>{n.d(f,{P:()=>c,z:()=>s});var m=n(4408);const s=new(n(640).v)(m.o),c=s},1165:(y,f,n)=>{function m(h){return h instanceof Date&&!isNaN(h)}n.d(f,{q:()=>m})}}]);